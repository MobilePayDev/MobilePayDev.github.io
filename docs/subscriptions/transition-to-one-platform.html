<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-subscriptions/transition-to-one-platform">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">💙🧡 Preparation to migrate to the NEW Recurring API | MobilePay Developer</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://developer.mobilepay.dk/docs/subscriptions/transition-to-one-platform"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="💙🧡 Preparation to migrate to the NEW Recurring API | MobilePay Developer"><meta data-rh="true" name="description" content="Integration Availability:"><meta data-rh="true" property="og:description" content="Integration Availability:"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developer.mobilepay.dk/docs/subscriptions/transition-to-one-platform"><link data-rh="true" rel="alternate" href="https://developer.mobilepay.dk/docs/subscriptions/transition-to-one-platform" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.mobilepay.dk/docs/subscriptions/transition-to-one-platform" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-206187508-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.859f3dba.css">
<link rel="preload" href="/assets/js/runtime~main.0727d4e1.js" as="script">
<link rel="preload" href="/assets/js/main.5b808a05.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-blue.svg" alt="MobilePay" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-white.svg" alt="MobilePay" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Developer</b></a><a class="navbar__item navbar__link" href="/docs/app-payments">App Payments Facade</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/subscriptions">Subscriptions Facade</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">API references</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/api/app-payments">App payments Facade</a></li><li><a class="dropdown__link" href="/api/subscriptions">Subscriptions Facade</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://developer.vippsmobilepay.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Vipps MobilePay Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/app-payments">App Payments Facade</a><button aria-label="Toggle the collapsible sidebar category &#x27;App Payments Facade&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/subscriptions">Subscriptions Facade</a><button aria-label="Toggle the collapsible sidebar category &#x27;Subscriptions Facade&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/subscriptions/development-guide">Development Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/subscriptions/authentication">Authentication</a><button aria-label="Toggle the collapsible sidebar category &#x27;Authentication&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/subscriptions/general-notes">General notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/subscriptions/subscriptions-providers">Subscriptions Providers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/subscriptions/agreement">Agreements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/subscriptions/subscriptions-payments">Subscriptions Payments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/subscriptions/one-off-payments">One-off Payments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/subscriptions/refund">Refund</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/subscriptions/invoice">Invoice</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/subscriptions/release-notes">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/subscriptions/glossary">Glossary of Terms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/subscriptions/api-principles">API principles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/subscriptions/transition-to-one-platform">💙🧡 Preparation to migrate to the NEW Recurring API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/subscriptions/resources">Migration info 🔗</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/online">Online PSP</a><button aria-label="Toggle the collapsible sidebar category &#x27;Online PSP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/subscriptions"><span itemprop="name">Subscriptions Facade</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">💙🧡 Preparation to migrate to the NEW Recurring API</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>💙🧡 Preparation to migrate to the NEW Recurring API</h1><p><strong>Integration Availability:</strong>
The NEW Recurring API is available since March 12th. Email <a href="mailto:developer@vippsmobilepay.com" target="_blank" rel="noopener noreferrer">developer@vippsmobilepay.com</a> for help.</p><p><strong>Documentation and Changelogs</strong></p><ul><li><p><a href="https://developer.vippsmobilepay.com/api/recurring/" target="_blank" rel="noopener noreferrer">API Reference</a>: Explore the documentation for the New Recurring API.   </p></li><li><p><a href="https://developer.vippsmobilepay.com/docs/APIs/recurring-api/" target="_blank" rel="noopener noreferrer">API Documentation</a>: Find detailed information on the New Recurring API.   </p></li><li><p><a href="https://developer.vippsmobilepay.com/docs/APIs/recurring-api/CHANGELOG/" target="_blank" rel="noopener noreferrer">Changelogs</a>: All changes to the Recurring API.</p></li></ul><p><strong>Testing the API</strong></p><p>Test the new Recurring API in the merchant test environment. Recreate your test data as previous data won’t be migrated. Use the new Access Token API; old tokens are invalid post-launch. If you want to test the Mobilepay Subscriptions facade instead please <a href="https://developer.mobilepay.dk/docs/subscriptions/transition-to-one-platform#10-test" target="_blank" rel="noopener noreferrer">read here</a>. </p><p><strong>Please note:</strong></p><ol><li>You must recreate your Subscriptions test data as previous data (agreements, payments, refunds, etc.) won&#x27;t be migrated to the Recurring merchant test environment.</li><li>Integrate with the new Access Token API. Old MobilePay-issued tokens are be invalid post-Nordic Wallet launch. <a href="https://developer.vippsmobilepay.com/docs/APIs/access-token-api/" target="_blank" rel="noopener noreferrer">Access Token API Guide</a></li></ol><p>The Merchant Test (MT) environment is now open for testing. See <a href="https://developer.vippsmobilepay.com/docs/test-environment/" target="_blank" rel="noopener noreferrer">limitations of the test environment</a> for more details.</p><p><strong>Request Access</strong></p><ul><li><a href="https://www.vippsmobilepay.com/partner/become-a-partner" target="_blank" rel="noopener noreferrer">Partners</a></li><li><a href="https://vippsmobilepay.com/merchant-test-account-sign-up" target="_blank" rel="noopener noreferrer">Merchants</a></li></ul><p>You&#x27;ll receive an email with the required information, even if you&#x27;re an existing integrator or merchant.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-agreements"><strong>1. Agreements</strong><a class="hash-link" href="#1-agreements" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-agreement-identifier">1.1 Agreement Identifier<a class="hash-link" href="#11-agreement-identifier" title="Direct link to heading">​</a></h3><p>-<strong>Change:</strong> Agreement main identifier is <code>agreementId</code>. Example of id: agr_e5Gd2fIjr
-<strong>Recommendation:</strong> We strongly recommend to use the <code>agreementId</code> instead of the <code>uuid</code> when transitioning to the recurring-api. While it is possible for merchants to fetch agreement by uuid or fetch charge using agreement uuid, it is less efficient and slower than fetching by id. This approach also eliminates the need for you to keep a mapping between <code>uuid</code> and <code>agreementId</code>. Read more about agreements in recurring in <a href="https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#agreements" target="_blank" rel="noopener noreferrer">the api guide</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-agreement-request-expiration">1.2 Agreement Request Expiration<a class="hash-link" href="#12-agreement-request-expiration" title="Direct link to heading">​</a></h3><ul><li><strong>Change:</strong> Signing period will be reduced to 10 minutes after Nordic Wallet Launch. Existing agreements with longer expiration will expire on launch day.</li><li><strong>Recommendation:</strong> Create a middle layer to handle agreement requests on your infrastructure, allowing more than 10 minutes for signing. This reduces unnecessary data and GDPR concerns.</li><li><strong>Tech:</strong> <ul><li><strong>API Endpoint:</strong> <code>POST:/api/providers/{providerId}/agreements</code></li><li><strong>Parameter:</strong> <code>expiration_timeout_minutes</code> (will always be 10 minutes post-launch).</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-agreement-deletion-validations">1.3 Agreement Deletion Validations<a class="hash-link" href="#13-agreement-deletion-validations" title="Direct link to heading">​</a></h3><ul><li><strong>Change:</strong> Preventing customer cancellations within 24 hours will be unavailable after Nordic Wallet Launch.</li><li><strong>Recommendation:</strong> Provide a seamless payment experience to avoid cancellations.</li><li><strong>Tech:</strong> <ul><li><strong>API Endpoint:</strong> <code>POST:/api/providers/{providerId}/agreements</code></li><li><strong>Parameter:</strong> <code>retention_period_hours</code> (will be ignored post-launch).</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="14-agreements-without-amount">1.4 Agreements Without Amount<a class="hash-link" href="#14-agreements-without-amount" title="Direct link to heading">​</a></h3><ul><li><strong>Change:</strong> Agreements without a stated amount will be considered variable amount agreements.</li><li><strong>Recommendation:</strong> Update/create agreements with known amounts.</li><li><strong>Tech:</strong> <ul><li><strong>API Endpoint:</strong> <code>POST /api/providers/{providerId}/agreements</code> or <code>PATCH /api/providers/{providerId}/agreements/{agreementId}</code></li><li><strong>Parameter:</strong> <code>amount</code></li></ul></li></ul><p><img loading="lazy" alt="WMP Amount" src="/assets/images/vmpamount-ff9c33d05ab59b77e0103110c9a3f751.png" width="1500" height="3336" class="img_ev3q">
<a target="_blank" href="/assets/files/vmpamount-ff9c33d05ab59b77e0103110c9a3f751.png"><img loading="lazy" src="/assets/images/vmpamount-ff9c33d05ab59b77e0103110c9a3f751.png" alt="WMP Amount" width="250" class="img_ev3q"></a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="14-agreement-cancellation-by-merchant">1.4 Agreement Cancellation by Merchant<a class="hash-link" href="#14-agreement-cancellation-by-merchant" title="Direct link to heading">​</a></h3><ul><li><strong>Change:</strong> Canceling agreements will also cancel any reserved payments post-launch.</li><li><strong>Recommendation:</strong> Capture reserved payments before canceling agreements if applicable.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-recurring-payments"><strong>2. Recurring payments</strong><a class="hash-link" href="#2-recurring-payments" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-payments-visible-8-days-in-advance">2.1 Payments visible 8 days in advance<a class="hash-link" href="#21-payments-visible-8-days-in-advance" title="Direct link to heading">​</a></h3><p>We want to empower you with transparency and flexibility when it comes to your recurring payments. Currently, your customer can view upcoming payments in the app up to 8 days in advance, regardless of whether the payment was sent 30 or 60 days earlier. However, from Nordic Wallet Launch, we&#x27;re excited to announce that customers will be able to see your upcoming payment 35 days in advance if you send it that early.</p><p>⭐ <strong>Recommendation:</strong> If 35 days of payment visibility in the app is too long for you, we recommend sending a payment closer to the due date. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-update-existing-payment">2.2 Update existing payment<a class="hash-link" href="#22-update-existing-payment" title="Direct link to heading">​</a></h3><p>Error in the payment you sent to your customer?  From Nordic Wallet Launch, we ask you to update existing payments in a slightly different way. </p><p>⭐ <strong>Recommendation:</strong> We recommend that you cancel existing payments and create brand-new ones in cases when payment information needs to be updated.</p><p>⚙️ Tech: API endpoint: <code>PATCH:/api/providers/{providerId}/agreements/{agreementId}/paymentrequests/{paymentId}</code> will be unavailable from Nordic Wallet Launch.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-push-message-for-the-user">2.3 Push message for the user<a class="hash-link" href="#23-push-message-for-the-user" title="Direct link to heading">​</a></h3><p>Currently, your customers are receiving push messages 1 day in advance about upcoming recurring payments. You have the option to manage this notification through Subscription APIs. From Nordic Wallet Launch, we are removing this push notification for your customers, and push management will stop being relevant, too. But do not worry, customers choosing to get those push messages will be informed about executed payments instead; in addition to notifications about all failed payments where they need to change a card, increase funds, etc. </p><p>⭐ <strong>Recommendation:</strong> Sit back and relax, we will make sure that all payments are executed successfully. </p><p>⚙️ Tech: API endpoint: <code>POST:/api/providers/{providerId}/agreements</code></p><p>Parameter: <code>disable_notification_management</code>, <code>notifications_on</code> will be ignored from Nordic Wallet Launch.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-invalid-recurring-payments">2.4 Invalid recurring payments<a class="hash-link" href="#24-invalid-recurring-payments" title="Direct link to heading">​</a></h3><p>This one is a bit more technical. ⚙️ Currently, we are saving every payment request you send to us, even Invalid ones. You can check the whole status diagram <a href="https://developer.mobilepay.dk/docs/subscriptions/subscriptions-payments#payment-state-diagram" target="_blank" rel="noopener noreferrer">here</a>. From Nordic Wallet Launch, we will stop storing these requests. This will not impact payment validation or payment execution logic. You will still get callbacks about payment status changes.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-one-off-payments"><strong>3. One-off payments</strong><a class="hash-link" href="#3-one-off-payments" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-one-off-payments-types">3.1 One-off payments types<a class="hash-link" href="#31-one-off-payments-types" title="Direct link to heading">​</a></h3><p>One-off payments in Subscriptions were used in 3 different ways:</p><ul><li>Create a new Agreement with an initial One-Off Payment. ✅ Will continue. </li><li>Customer can initiate and request arbitrary One-Off Payment payments on their existing Agreement. ❌ Will be terminated. </li><li>Merchants can send One-Off payment, which MobilePay will attempt to automatically reserve, without user’s confirmation. ✅ Will continue. </li></ul><p>We reevaluated all our product packages, that from Nordic Wallet Launch, flow 2 will be moved from Subscriptions (Recurring) product to another Vipps MobilePay product - ePayment! 🍀 Basically, all payments which are merchant initiated (MIT) and do not require Strong Customer Authentication (SCA) stay in Subscriptions and also Recurring. All payments where SCA is needed will be in ePayment product. </p><p>⭐ <strong>Recommendation:</strong> If you want to continue charging your customers with payments where SCA is needed, please reintegrate these types of payments to Vipps MobilePay ePayment.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-one-off-expiration-period">3.2 One-off expiration period<a class="hash-link" href="#32-one-off-expiration-period" title="Direct link to heading">​</a></h3><p>Similarly, as with agreements, we are aligning the expiration period for one-off payments.
From Nordic Wallet Launch, the expiration timeout for:</p><ul><li>one-off with a new agreement will always be 10 minutes. </li><li>one-off for an existing agreement will always be 1 minutes.
All one-offs with longer expiration time will be expired on Nordic Wallet Launch day.</li></ul><p>⭐ <strong>Recommendation:</strong></p><ul><li>Flow 1: Create a new Agreement with an initial One-Off Payment. Just set the same expiration period subtracting for the one-offs as you set for agreements. You can read about changes in agreements <a href="https://developer.mobilepay.dk/docs/subscriptions/transition-to-one-platform#11-agreement-request-expiration-period" target="_blank" rel="noopener noreferrer">here</a>.</li><li>Flow 3: Merchants can send a One-Off payment, which MobilePay will attempt to automatically reserve, without the user’s confirmation. The long expiration time is not relevant for one-off auto reservation payments. So all is good here 😉.</li></ul><p>⚙️ Tech: API endpoint: <code>POST:/api/providers/{providerId}/agreements</code>  <code>POST:/api/providers/{providerId}/agreements/{agreementId}/oneoffpayments</code></p><p>Parameter: <code>expiration_timeout_minutes</code>, <code>one_off_payment.expiration_timeout_minutes</code> Current range from 1 to 181440 min, the default was 10 minutes. After Nordic Wallet Launch, the expiration time will always be:</p><ul><li>10 minutes for one-off when it&#x27;s with new agreement</li><li>1 minutes for one-off created when it&#x27;s for an existing agreement</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-description-of-a-one-off-with-a-new-agreement">3.3 Description of a one-off with a new agreement<a class="hash-link" href="#33-description-of-a-one-off-with-a-new-agreement" title="Direct link to heading">​</a></h3><p>Currently, in Subscriptions, the Description field for one-off which is created together with the new agreement is not mandatory. We are changing that and making it a required field.</p><p>⭐ <strong>Recommendation:</strong> When creating a one-off payment with a new agreement provide a Description, but if you will forget, do not worry, we will prefill it with &quot;Initial charge&quot;.</p><p>⚙️ Tech: API endpoint: <code>POST /api/providers/{providerId}/agreements</code></p><p>Parameter: <code>one_off_payment.description</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-refunds"><strong>4. Refunds</strong><a class="hash-link" href="#4-refunds" title="Direct link to heading">​</a></h2><p>In general: it is possible to do GET requests for pre-launch refunds. Furthermore, it is also possible to make refunds for pre-launch payments. Please note: We can only handle 30 days backward for pre-launch payments, whereas we can handle 365 days backward on the new platform, if the payment is completed on the new platform GET requests and refunds (up to 30 days) can be made for payments executed on the existing MobilePay platform  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-refund-up-to-365-days">4.1 Refund up to 365 days<a class="hash-link" href="#41-refund-up-to-365-days" title="Direct link to heading">​</a></h3><p>Currently, you can refund payments that were executed up to 90 days in the past. Good news! We will give you an amazingly long period to refund your payments on One Platform - <strong>365 days!</strong>  ⚡️
The new period will be applied only to payments that will be executed on the new platform after Nordic Wallet Launch. </p><ul><li>Payments made on the old platform starting from March 12th 2024 have a refund window of 30 days.</li><li>Payments made on the new platform have a refund window of 365 days.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-refunds-description">4.2 Refunds description<a class="hash-link" href="#42-refunds-description" title="Direct link to heading">​</a></h3><p>In Subscriptions, Refunds had no Description, but in the new Recurring setup, this field is present and mandatory. We will prefill it with a simple &quot;Refund&quot; for you.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-refund-responses">4.3 Refund responses<a class="hash-link" href="#43-refund-responses" title="Direct link to heading">​</a></h3><p>There will be no callbacks anymore for refunds after Nordic Wallet Launch. All needed information will be handled through API response.  </p><p>Note: For payments made before Nordic Wallet Launch, status_callback_url will still be required and callbacks will still be sent. For payments made after Nordic Wallet Launch, the Facade will return the status_callback_url, although it will not be utilized in the backend logic since callbacks for refunds will no longer be present. </p><p>⭐ <strong>Recommendation:</strong> If you use refunds review planned API responses and adjust your integration to handle it. </p><p>⚙️ Tech:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">HTTP 200 - Charge was refunded</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;d5f51369-5c3b-4246-958e-9aefeb2ac5fe&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;external_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;AA3F5Y6G4&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;status_callback_url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://merchantProviderUrl.com/refund&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">HTTP 500 - Something went wrong while trying to refund charge/payment</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;StatusCode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;StatusText&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Something went wrong while refunding charge&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">HTTP 400 - Charge is too old to refund (older than 365 days)</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;StatusCode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;StatusText&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Cannot refund a charge older than 365 days&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">HTTP 400 - Agreement for charge is in wrong status to refund (if accepting and pending)</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;StatusCode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">102</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;StatusText&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Cannot modify an agreement which is not active&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">HTTP 400 - Charge is in wrong status to refund (not charged/captured, partially captured or fully refunded)</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;StatusCode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">103</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;StatusText&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Invalid status&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">HTTP 400 - Trying to refund higher amount than what is charged/captured</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;StatusCode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">104</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;StatusText&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Invalid amount, you cannot refund more than the remaining value on this charge/payment&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-app-"><strong>5. App 📱</strong><a class="hash-link" href="#5-app-" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-merchant-visibility">5.1 Merchant visibility<a class="hash-link" href="#51-merchant-visibility" title="Direct link to heading">​</a></h3><p>The list of potential merchants is no longer be displayed in the app. However, all active and stopped agreements will still be readily visible to the app users.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-merchant-information-on-agreements">5.2 Merchant information on agreements<a class="hash-link" href="#52-merchant-information-on-agreements" title="Direct link to heading">​</a></h3><p>Currently, you are able to show your contact information in every agreement for your customer in the agreement Info tab: Website, Customer Support, Self Service, FAQ. From Nordic Wallet Launch, this contact information will no longer be displayed for the user. </p><p>⭐<strong>Recommendation:</strong>  You can always provide an agreement management URL to the user (we call it cancel-redirect in our documentation) which enables them to reach your environment from the app. Or you could add contact information in the agreement description if this is necessary. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-payment-attachments"><strong>6. Payment attachments</strong><a class="hash-link" href="#6-payment-attachments" title="Direct link to heading">​</a></h2><p>Read more <a href="https://developer.mobilepay.dk/docs/subscriptions/invoice#payment-attachments-v2" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="61-pdf-generation">6.1 PDF generation<a class="hash-link" href="#61-pdf-generation" title="Direct link to heading">​</a></h3><p> We have decided to focus more on payment execution and agreement signing success rather than PDF generation capabilities. So, the PDF generation option will no longer be available from 12th of March.</p><p>⭐<strong>Recommendation:</strong> We hope you will find other ways to send PDF documents to your customers.  </p><p>⚙️ Tech: API endpoint:  <code>PUT:/api/providers/{providerId}/payments/{paymentId}/attachment</code></p><p>Parameter: <code>generate_pdf</code> : true will be ignored from Nordic Wallet Launch.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="62-external-url">6.2 External URL<a class="hash-link" href="#62-external-url" title="Direct link to heading">​</a></h3><p>Before the 12th of March, we provided the possibility for you to update your Subscription payment with extra attachments like External URL. We will not be able to re-introduce this feature from the moment of Nordic Wallet Launch<br>
<!-- -->⚙️ Tech: API endpoint:  <code>PUT:/api/providers/{providerId}/payments/{paymentId}/attachment</code></p><p>Parameter: <code>external_attachment_url</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="63-attachment-details">6.3 Attachment details<a class="hash-link" href="#63-attachment-details" title="Direct link to heading">​</a></h3><p>Similarly, as with External URL, we will not make it to re-introduce this feature from the moment of 12th of march. We promise to work on it as soon as possible and introduce the feature right after Launch. </p><p>⚙️ Tech: API endpoint:  <code>PUT:/api/providers/{providerId}/payments/{paymentId}/attachment</code></p><p>Parameter: <code>attachment_details</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-onboarding"><strong>7. Onboarding</strong><a class="hash-link" href="#7-onboarding" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="71-authorisation">7.1 Authorisation<a class="hash-link" href="#71-authorisation" title="Direct link to heading">​</a></h3><p><strong>For merchants</strong></p><ul><li>If you will need to restart the consent flow, e.g. get a new refresh token after Nordic Wallet Launch, you will have to do that already though new Vipps MobilePay platform.</li><li>If you are planning to start using Recurring on the New Vipps MobilePay platform, just integrate into the new setup from the beginning. </li></ul><p>Read more about <a href="https://developer.vippsmobilepay.com/docs/APIs/access-token-api/" target="_blank" rel="noopener noreferrer">Access token API guide</a>.</p><p><strong>For integrators/partners</strong></p><ul><li>If you are planning to start using Recurring on New Vipps MobilePay platform, just integrate to the new setup from the beginning.</li><li>If you are an existing partner in Subscriptions on the MobilePay platform and you want to onboard new merchants, we will ask you to change your authorization setup. From the Nordic Wallet Launch, we will not be able to support the existing flow where the merchant grants consent to you. Access and refresh tokens that were issued before the transition will remain valid and continue to work. To get providerId for new onboarded merchants, you can call <code>GET:/api/merchants/me</code> with the new authorization token and <code>Merchant-Serial-Number</code> header. </li></ul><ul><li>Read more about <a href="https://developer.vippsmobilepay.com/docs/APIs/access-token-api/" target="_blank" rel="noopener noreferrer">Access token API guide</a> and <a href="https://developer.vippsmobilepay.com/docs/vipps-partner/#technical-information-for-partners" target="_blank" rel="noopener noreferrer">Technical information for partners</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-settlements"><strong>8. Settlements</strong><a class="hash-link" href="#8-settlements" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="81-from-the-nordic-wallet-launch-all-sales-units-payment-points-will-be-switched-to-daily-settlements">8.1 From the Nordic Wallet Launch all sales units (payment points) will be switched to daily settlements<a class="hash-link" href="#81-from-the-nordic-wallet-launch-all-sales-units-payment-points-will-be-switched-to-daily-settlements" title="Direct link to heading">​</a></h3><p>Currently you were able to select how to receive settlements: daily or instant. After NWL all sales units will be switched to receive daily settlements. Instant transfers will stay as a functionality, but it will be renamed to Single payment settlements, which represents the functionality in better way. Furthermore, functionality will be for an extra fee.  With Single payment settlements every payment will be settled separately (not bundled up) and you will receive it in 1 days after payment was executed. </p><p>⭐<strong>Recommendation:</strong> If you need to have your payments settled separately, log in to new Merchant Portal after NWL and select Single payment settlement functionality. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="9-other"><strong>9. Other</strong><a class="hash-link" href="#9-other" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="91-callback-changes-for-recurring-and-one-off-payments">9.1 Callback changes for recurring and one-off payments<a class="hash-link" href="#91-callback-changes-for-recurring-and-one-off-payments" title="Direct link to heading">​</a></h3><p>We will stop sending our old callbacks for one-off payment expiration and rejection by users from Nordic Wallet Launch. </p><p>Instead we will start sending new callback for both recurring and one-off payment:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;agreement_id&quot;: &quot;d230e533-dceb-483b-a9ce-cf99e7851d0e&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;payment_id&quot;: &quot;86957d1c-00f5-4b9c-bd29-dd2e8de082d8&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;amount&quot;: &quot;54.00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;currency&quot;: &quot;DKK&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;payment_date&quot;: &quot;2023-08-24&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;payment_type&quot;: &quot;OneOff&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status&quot;: &quot;Cancelled&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status_text&quot;: &quot;Payment cancelled.&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status_code&quot;: 70003,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;external_id&quot;: &quot;ed40a2e7-a14b-44c8-a35d-ec015e6d31f0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;agreement_id&quot;: &quot;d230e533-dceb-483b-a9ce-cf99e7851d0e&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;payment_id&quot;: &quot;86957d1c-00f5-4b9c-bd29-dd2e8de082d8&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;amount&quot;: &quot;54.00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;currency&quot;: &quot;DKK&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;payment_date&quot;: &quot;2023-08-24&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;payment_type&quot;: &quot;Regular&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status&quot;: &quot;Cancelled&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status_text&quot;: &quot;Payment cancelled.&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status_code&quot;: 70003,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;external_id&quot;: &quot;ed40a2e7-a14b-44c8-a35d-ec015e6d31f0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Above callbacks will be sent in following cases:</p><ul><li>For each pending recurring payment which is cancelled due to users&#x27; initiated cancellation of agreement</li><li>For each pending recurring payment which is cancelled due to merchants&#x27; initiated cancellation of agreement</li><li>For merchants&#x27; initiated cancellation of pending recurring payment</li><li>For each one-off payment expiration</li><li>For each one-off payment rejection by user</li><li>For each cancellation of pending one-off payment, due to merchants&#x27; initiated cancellation of pending agreement</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="93-callbacks-for-non-reintegrated-merchants-after-nwl">9.3 Callbacks for non reintegrated merchants after NWL<a class="hash-link" href="#93-callbacks-for-non-reintegrated-merchants-after-nwl" title="Direct link to heading">​</a></h3><p>These are the callbacks we will be sending for non reintegrated merchants.</p><p>Agreement callbacks (no changes):</p><table><thead><tr><th>Status</th><th>Status code</th><th>Status text</th></tr></thead><tbody><tr><td>Accepted</td><td>0</td><td>The agreement has been accepted.</td></tr><tr><td>Expired</td><td>40001</td><td>Pending agreement expired.</td></tr><tr><td>Rejected</td><td>40000</td><td>Rejected by user.</td></tr><tr><td>Canceled</td><td>40002</td><td>The agreement was canceled by the user.</td></tr><tr><td>Canceled</td><td>40003</td><td>The agreement was canceled by the merchant.</td></tr></tbody></table><p>Recurring payment callbacks:</p><table><thead><tr><th>Status</th><th>Status code</th><th>Status text</th><th>Callback sending condition</th></tr></thead><tbody><tr><td>Cancelled</td><td>70003</td><td>Payment cancelled.</td><td>Pending payment cancelled due to user cancelling an agreement</td></tr><tr><td></td><td></td><td></td><td>Pending payment cancelled due to merchant cancelling an agreement</td></tr><tr><td></td><td></td><td></td><td>Merchants&#x27; initiated cancellation of pending recurring payment</td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td>Executed</td><td>0</td><td>null</td><td>Payment successfully executed on due date</td></tr><tr><td>Failed</td><td>50000</td><td><code>See note below</code></td><td>Payment failed to execute during the due date</td></tr><tr><td>Declined</td><td>70001</td><td>Payment amount is 5 times higher than agreement amount.</td><td>Payment batch request contains a payment which amount is 5 times higher than</td></tr><tr><td></td><td></td><td></td><td>agreement&#x27;s amount. Applicable when agreement has an amount more than 0</td></tr><tr><td>Declined</td><td>50003</td><td>Declined by system: Agreement is not in \&quot;Active\&quot; state.</td><td>Payment batch request contains a payment for non-active agreement</td></tr><tr><td>Declined</td><td>50004</td><td>Declined by system: Found duplicates for the same DueDate and AgreementId/ExternalId.</td><td>Payment batch request contains a duplicate payment with the same DueDate and AgreementId/ExternalId</td></tr><tr><td>Declined</td><td>50006</td><td>Declined by system.</td><td>Unspecified error when processing payment from payment batch request</td></tr></tbody></table><p><strong>Please note:</strong>
Recurring payment callback with status <code>Failed</code> and status code <code>50000</code> will be sent with different status text, depending on the reason for the recurring payment failure. For more information, please refer to <a href="https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#charge-failure-reasons" target="_blank" rel="noopener noreferrer">https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#charge-failure-reasons</a>.
Please also note that the <code>charge_amount_too_high</code> failure reason is not applicable to non-reintegrated merchants.</p><p>One-off payment sent with an agreement:</p><table><thead><tr><th>Status</th><th>Status code</th><th>Status text</th><th>Callback sending condition</th></tr></thead><tbody><tr><td>Cancelled</td><td>70003</td><td>Payment cancelled.</td><td>Pending agreement with one-off payment has expired</td></tr><tr><td></td><td></td><td></td><td>Pending agreement with one-off payment was rejected by user</td></tr><tr><td></td><td></td><td></td><td>Merchant cancels pending agreement with one-off payment</td></tr><tr><td></td><td></td><td></td><td>Merchant cancels active agreement and one-off payment is Reserved</td></tr><tr><td></td><td></td><td></td><td>Merchant cancels Reserved one-off payment</td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td>Reserved</td><td>0</td><td>Payment successfully reserved.</td><td>Agreement with one-off payment was accepted and payment was reserved</td></tr></tbody></table><p>Autoreserve one-off payment:</p><table><thead><tr><th>Status</th><th>Status code</th><th>Status text</th><th>Callback sending condition</th></tr></thead><tbody><tr><td>Cancelled</td><td>70003</td><td>Payment cancelled.</td><td>Merchant cancels autoreserve one-off payment in Requested or Reserved status</td></tr><tr><td></td><td></td><td></td><td>Merchant cancels active agreement and one-off payment is Reserved or Requested</td></tr><tr><td></td><td></td><td></td><td>Payment expires</td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td>Reserved</td><td>0</td><td>Payment successfully reserved.</td><td>Payment reserved</td></tr><tr><td>Requested</td><td>50013</td><td>Automatic reservation failed. User action is needed.</td><td>Reservation failed</td></tr></tbody></table><p>In the new platform reservation failure and expiration callbacks are sent only after payment expiration with few seconds delay between each other.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="94-callbacks-for-reintegrated-merchants">9.4 Callbacks for reintegrated merchants<a class="hash-link" href="#94-callbacks-for-reintegrated-merchants" title="Direct link to heading">​</a></h3><p>When you are reintegrating, you will use Webhook solution <a href="https://developer.vippsmobilepay.com/docs/APIs/webhooks-api/" target="_blank" rel="noopener noreferrer">https://developer.vippsmobilepay.com/docs/APIs/webhooks-api/</a>
By default after integrating with new Webhook solution, you will still receive old <strong>payment</strong> callbacks to your old payment callback URL and there is no possibility to change callback url or authentication method for old integration. This means that you will receive both old callbacks and new webhooks. Once you have integrated towards Webooks and no longer rely on old callbacks, please notify us and we will turn them off.</p><p>Here you can find a payload and other useful information about new Webhooks <a href="https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#webhooks-integration" target="_blank" rel="noopener noreferrer">https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#webhooks-integration</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="95-error-messages">9.5 Error messages<a class="hash-link" href="#95-error-messages" title="Direct link to heading">​</a></h3><p>We are making adjustments to error responses, specifically related to <code>error_description.message</code> and <code>error_description.error_type</code>. Some values will remain unchanged, some will be modified, and new validations will be introduced. Some messages may be less explicit than before, as they are generated directly from the backend and not specifically tailored for exact app branding (MobilePay or Vipps) responses.</p><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;error&quot;: &quot;BadRequest&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;error_description&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;message&quot;: &quot;The field &#x27;phoneNumber&#x27; has an invalid format for a phone number, provided value: &#x27;44444444444444&#x27;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;error_type&quot;: &quot;InputError&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;correlation_id&quot;: &quot;ef928510-ae19-4fe7-ae1e-76b43de202f5&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;error_code&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;localized_message&quot;: &quot;A technical error occurred.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Some field names, like <code>mobile_phone_number</code>, will undergo changes; for instance, it will be referred to as <code>phoneNumber</code>. If clarity is needed, refer to <a href="https://developer.vippsmobilepay.com/docs/APIs/recurring-api/" target="_blank" rel="noopener noreferrer">Recurring documentation</a> for field specifications.</p><p>⭐ <strong>Recommendation:</strong> Avoid relying on specific values in <code>error_description.message</code> and <code>error_description.error_type</code>. Update your error handling processes to ensure flexibility in these two fields.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="10-test"><strong>10. Test</strong><a class="hash-link" href="#10-test" title="Direct link to heading">​</a></h2><p>The first version of the new test environment is ready for the Subscriptions facade. All features are available.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="101-test-credentials">10.1 Test credentials<a class="hash-link" href="#101-test-credentials" title="Direct link to heading">​</a></h3><p><strong>Test merchant</strong>: Find a guide to create test merchant <a href="https://developer.vippsmobilepay.com/docs/developer-resources/portal/#how-to-create-a-test-sales-unit" target="_blank" rel="noopener noreferrer">here</a>. The test credentials consist of a client id, client secret and subscriptions key. </p><p><strong>Test user</strong>: Find a guide to create test users <a href="https://developer.vippsmobilepay.com/docs/test-environment/#test-users" target="_blank" rel="noopener noreferrer">here</a> </p><p><em>For partners</em>: Please contact <a href="mailto:partner@vippsmobilepay.com" target="_blank" rel="noopener noreferrer">partner@vippsmobilepay.com</a> to request a DK or FI test merchant and user.</p><p>Please note: If you want to reuse your Subscriptions test data you will need to recreate your test data. Please note that all test data, including payments, refunds, and so on, created on the old platform will not be migrated from the sandbox to the merchant test environment.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="102-authentication">10.2 Authentication<a class="hash-link" href="#102-authentication" title="Direct link to heading">​</a></h3><p>You will  have to integrate with the new and simplified Access Token API designed for the merchant test environment. The old MobilePay OpenId consent flow for the sandbox will cease to function. <a href="https://developer.vippsmobilepay.com/docs/APIs/access-token-api/" target="_blank" rel="noopener noreferrer">Access token API guide</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="103-headers-and-endpoints">10.3 Headers and endpoints<a class="hash-link" href="#103-headers-and-endpoints" title="Direct link to heading">​</a></h3><p>You must include these headers for all requests to the API</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-H &#x27;Authorization: Bearer {JWT}&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H &#x27;Ocp-Apim-Subscription-Key: {subscriptions key}&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H &#x27;Merchant-Serial-Number: {MSN}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The endpoints have not changed. Please find them in the <a href="https://developer.mobilepay.dk/api/subscriptions" target="_blank" rel="noopener noreferrer">API specification</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="104-initiate-test">10.4 Initiate test<a class="hash-link" href="#104-initiate-test" title="Direct link to heading">​</a></h3><ol><li>Fetch test merchant and test use</li><li><a href="https://developer.vippsmobilepay.com/api/access-token/#tag/Authorization-Service/operation/fetchAuthorizationTokenUsingPost" target="_blank" rel="noopener noreferrer">GET access token</a></li><li><a href="https://developer.mobilepay.dk/api/subscriptions#tag/Subscriptions-Merchant/paths/~1api~1merchants~1me/get" target="_blank" rel="noopener noreferrer">GET subscriptionsProviderId</a></li><li><a href="https://developer.mobilepay.dk/api/subscriptions#tag/Subscriptions/paths/~1api~1providers~1%7Bproviderid%7D~1agreements/post" target="_blank" rel="noopener noreferrer">Create new agreement</a></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq"><strong>FAQ</strong><a class="hash-link" href="#faq" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-how-will-the-migration-of-data-work"><strong>1. How will the migration of data work?</strong><a class="hash-link" href="#1-how-will-the-migration-of-data-work" title="Direct link to heading">​</a></h3><p>Vipps MobilePay will make sure that all needed data is migrated from Subscriptions to Recurring:</p><ul><li><p>All active merchants and their payment points will be migrated to the new system. The primary identifiers are <code>provider_id</code>, <code>agreement_id</code>, <code>payment_id</code>, and <code>refund_id</code>. These remain unchanged; there is no changes there.</p></li><li><p>All partners/integrators will be created in the new system.</p></li><li><p>We will make sure that proper connection of merchant and partner/integrator is maintained on the new setup.</p></li><li><p>We will migrate all active agreements. There is no need to recreate agreements from NewWalletLaunch neither from reintegration.</p></li><li><p>All payment requests with due dates will be migrated and executed on new system.</p></li><li><p>We will migrate 3 years of historical production data (agreements, payment requests, refunds) to the new environment.</p></li></ul><p>If you have a need to have a list of old and new ID&#x27;s, we have an endpoint for obtaining agreements that offers both <code>ExternalId</code> and <code>AgreementUuid</code>.
Please refer to the <a href="https://developer.vippsmobilepay.com/api/recurring/" target="_blank" rel="noopener noreferrer">NEW Recurring API endpoint description</a> - You can utilize <code>Agreement-v3-endpoints ListAgreementsV3</code>  endpoint for mapping.  </p><p><strong>To be clear:</strong></p><p>-Facade merchants: There will be not changes to the identifiers. The facade api will return the exact same identifiers. Below you can find information for when merchants will re-integrate to the <a href="https://developer.vippsmobilepay.com/api/recurring/" target="_blank" rel="noopener noreferrer">NEW Recurring API Reference</a></p><p><strong><code>providerid</code></strong></p><p>There is no provider_id in the calls to Recurring API endpoints.</p><p><strong><code>agreements</code></strong></p><p>⚙️ Docs on agreements <a href="https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#agreements" target="_blank" rel="noopener noreferrer">here</a>:</p><p>GET Agreements endpoint</p><ul><li>Path parameters pageNumber and pageSize are no longer needed. Instead, use query parameter createdAfter.</li></ul><p>GET Agreement endpoint</p><ul><li>Merchants can call GET agreement using either <code>agr_xxxxxx</code> or the <code>uuid</code>.</li><li>We will return both <code>agreementId</code> ( &quot;agr_xxxxxxx&quot; format ) and a <code>uuid</code>.</li></ul><p>POST Agreement endpoint</p><ul><li>Field country_code becomes countryCode, and is not required.</li><li>Field external_id becomes externalId, and is not nullable.</li><li>Field description becomes productDescription, and has a maximum of 100 characters.</li><li>Field frequency becomes interval. It is composed of 2 required fields :<ul><li>unit. Type : String. Value has to be among :  &quot;YEAR&quot;, &quot;MONTH&quot;, &quot;WEEK&quot;, &quot;DAY&quot;.</li><li>count. Type : Int. Value has to be between 1 and 31.</li></ul></li><li>Field mobile_phone_number becomes phoneNumber, and has a maximum of 15 characters.</li><li>Field one_off_payment becomes initialCharge.</li><li>Field plan becomes productName, and has a maximum of 45 characters.</li><li>The following fields are not needed anymore :<ul><li>expiration_timeout_minutes</li><li>links</li><li>next_payment_date</li><li>retention_period_hours</li><li>disable_notification_management</li><li>notifications_on</li></ul></li><li>The following fields are new :<ul><li>campaign</li><li>pricing. Required field. Fields currency and amount are moved into this field.</li><li>isApp</li><li>merchantAgreementUrl. Required field.</li><li>merchantRedirectUrl. Required field.</li><li>scope</li><li>skipLandingPage</li></ul></li></ul><p><strong><code>charges</code></strong></p><p>⚙️ Docs on charges <a href="https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#charges" target="_blank" rel="noopener noreferrer">here</a>:</p><ul><li>id stays the same. charge.id = paymentId. chargeId = paymentid.</li></ul><p>GET Charges endpoint</p><ul><li>New query parameter : status. It filters by status of the charge.</li></ul><p>New endpoint : POST Charge endpoint</p><p>POST Charges endpoint :</p><ul><li>Amount has to be equal or superior to 100.</li><li>Description has between 1 and 45 characters.</li><li>Field due_date becomes due.</li><li>Field grace_period_days becomes retryDays. Required field. Value is between 0 and 14.</li><li>Field next_payment_date is no longer needed.</li><li>New fields :<ul><li>transactionType. Required field. Type : String. Value has to be &quot;DIRECT_CAPTURE&quot; or &quot;RESERVE_CAPTURE&quot;.</li><li>orderId. Type : String.</li></ul></li></ul><p><strong><code>refunds</code></strong></p><p>⚙️ Docs on refunds <a href="https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#refund-a-charge" target="_blank" rel="noopener noreferrer">here</a>:</p><ul><li>Merchant will need to call the GET charge endpoint using the id of the charge refunded.</li><li>Refunds won&#x27;t have their own ids.</li><li>Fields &quot;amount&quot; and &quot;description&quot; are required.</li><li>No externalId and no status_callback_url are needed.</li><li>Amount has to be equal or superior to 100.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-does-the-recurring-api-have-callbacks"><strong>2. Does the Recurring API have callbacks?</strong><a class="hash-link" href="#2-does-the-recurring-api-have-callbacks" title="Direct link to heading">​</a></h3><p>Yes! <a href="https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#webhooks-integration" target="_blank" rel="noopener noreferrer">webhooks</a></p><ul><li><a href="https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#webhooks-integration" target="_blank" rel="noopener noreferrer">Webhooks technical documentation</a></li><li><a href="https://developer.vippsmobilepay.com/api/webhooks/" target="_blank" rel="noopener noreferrer">Webhooks endpoint documentation</a>
Another method is <a href="https://developer.vippsmobilepay.com/docs/knowledge-base/polling-guidelines/" target="_blank" rel="noopener noreferrer">polling</a>.    </li><li><a href="https://developer.vippsmobilepay.com/docs/knowledge-base/polling-guidelines/" target="_blank" rel="noopener noreferrer">Polling guidelines</a>)</li></ul><p>Callbacks will work on the facade API.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-how-will-i-find-data-about-my-payments"><strong>3. How will I find data about my payments?</strong><a class="hash-link" href="#3-how-will-i-find-data-about-my-payments" title="Direct link to heading">​</a></h3><p>We will migrate 3 years of historical data (agreements, payment requests, refunds). You will be able to access that data though:</p><ol><li>API GET calls. For new and historical data.</li><li>Though <a href="https://portal.vipps.no/register" target="_blank" rel="noopener noreferrer">Merchant Portal</a>. Just for new transactions done after Nordic Wallet Launch.</li><li>Integrate it into the <a href="https://developer.vippsmobilepay.com/docs/APIs/report-api/" target="_blank" rel="noopener noreferrer">Report API</a>. Read more <a href="https://developer.vippsmobilepay.com/docs/mp-migration-guide/reporting/" target="_blank" rel="noopener noreferrer">here</a> about transition period.</li></ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/subscriptions/api-principles"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">API principles</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/subscriptions/resources"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Migration info 🔗</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-agreements" class="table-of-contents__link toc-highlight"><strong>1. Agreements</strong></a><ul><li><a href="#11-agreement-identifier" class="table-of-contents__link toc-highlight">1.1 Agreement Identifier</a></li><li><a href="#12-agreement-request-expiration" class="table-of-contents__link toc-highlight">1.2 Agreement Request Expiration</a></li><li><a href="#13-agreement-deletion-validations" class="table-of-contents__link toc-highlight">1.3 Agreement Deletion Validations</a></li><li><a href="#14-agreements-without-amount" class="table-of-contents__link toc-highlight">1.4 Agreements Without Amount</a></li><li><a href="#14-agreement-cancellation-by-merchant" class="table-of-contents__link toc-highlight">1.4 Agreement Cancellation by Merchant</a></li></ul></li><li><a href="#2-recurring-payments" class="table-of-contents__link toc-highlight"><strong>2. Recurring payments</strong></a><ul><li><a href="#21-payments-visible-8-days-in-advance" class="table-of-contents__link toc-highlight">2.1 Payments visible 8 days in advance</a></li><li><a href="#22-update-existing-payment" class="table-of-contents__link toc-highlight">2.2 Update existing payment</a></li><li><a href="#23-push-message-for-the-user" class="table-of-contents__link toc-highlight">2.3 Push message for the user</a></li><li><a href="#24-invalid-recurring-payments" class="table-of-contents__link toc-highlight">2.4 Invalid recurring payments</a></li></ul></li><li><a href="#3-one-off-payments" class="table-of-contents__link toc-highlight"><strong>3. One-off payments</strong></a><ul><li><a href="#31-one-off-payments-types" class="table-of-contents__link toc-highlight">3.1 One-off payments types</a></li><li><a href="#32-one-off-expiration-period" class="table-of-contents__link toc-highlight">3.2 One-off expiration period</a></li><li><a href="#33-description-of-a-one-off-with-a-new-agreement" class="table-of-contents__link toc-highlight">3.3 Description of a one-off with a new agreement</a></li></ul></li><li><a href="#4-refunds" class="table-of-contents__link toc-highlight"><strong>4. Refunds</strong></a><ul><li><a href="#41-refund-up-to-365-days" class="table-of-contents__link toc-highlight">4.1 Refund up to 365 days</a></li><li><a href="#42-refunds-description" class="table-of-contents__link toc-highlight">4.2 Refunds description</a></li><li><a href="#43-refund-responses" class="table-of-contents__link toc-highlight">4.3 Refund responses</a></li></ul></li><li><a href="#5-app-" class="table-of-contents__link toc-highlight"><strong>5. App 📱</strong></a><ul><li><a href="#51-merchant-visibility" class="table-of-contents__link toc-highlight">5.1 Merchant visibility</a></li><li><a href="#52-merchant-information-on-agreements" class="table-of-contents__link toc-highlight">5.2 Merchant information on agreements</a></li></ul></li><li><a href="#6-payment-attachments" class="table-of-contents__link toc-highlight"><strong>6. Payment attachments</strong></a><ul><li><a href="#61-pdf-generation" class="table-of-contents__link toc-highlight">6.1 PDF generation</a></li><li><a href="#62-external-url" class="table-of-contents__link toc-highlight">6.2 External URL</a></li><li><a href="#63-attachment-details" class="table-of-contents__link toc-highlight">6.3 Attachment details</a></li></ul></li><li><a href="#7-onboarding" class="table-of-contents__link toc-highlight"><strong>7. Onboarding</strong></a><ul><li><a href="#71-authorisation" class="table-of-contents__link toc-highlight">7.1 Authorisation</a></li></ul></li><li><a href="#8-settlements" class="table-of-contents__link toc-highlight"><strong>8. Settlements</strong></a><ul><li><a href="#81-from-the-nordic-wallet-launch-all-sales-units-payment-points-will-be-switched-to-daily-settlements" class="table-of-contents__link toc-highlight">8.1 From the Nordic Wallet Launch all sales units (payment points) will be switched to daily settlements</a></li></ul></li><li><a href="#9-other" class="table-of-contents__link toc-highlight"><strong>9. Other</strong></a><ul><li><a href="#91-callback-changes-for-recurring-and-one-off-payments" class="table-of-contents__link toc-highlight">9.1 Callback changes for recurring and one-off payments</a></li><li><a href="#93-callbacks-for-non-reintegrated-merchants-after-nwl" class="table-of-contents__link toc-highlight">9.3 Callbacks for non reintegrated merchants after NWL</a></li><li><a href="#94-callbacks-for-reintegrated-merchants" class="table-of-contents__link toc-highlight">9.4 Callbacks for reintegrated merchants</a></li><li><a href="#95-error-messages" class="table-of-contents__link toc-highlight">9.5 Error messages</a></li></ul></li><li><a href="#10-test" class="table-of-contents__link toc-highlight"><strong>10. Test</strong></a><ul><li><a href="#101-test-credentials" class="table-of-contents__link toc-highlight">10.1 Test credentials</a></li><li><a href="#102-authentication" class="table-of-contents__link toc-highlight">10.2 Authentication</a></li><li><a href="#103-headers-and-endpoints" class="table-of-contents__link toc-highlight">10.3 Headers and endpoints</a></li><li><a href="#104-initiate-test" class="table-of-contents__link toc-highlight">10.4 Initiate test</a></li></ul></li><li><a href="#faq" class="table-of-contents__link toc-highlight"><strong>FAQ</strong></a><ul><li><a href="#1-how-will-the-migration-of-data-work" class="table-of-contents__link toc-highlight"><strong>1. How will the migration of data work?</strong></a></li><li><a href="#2-does-the-recurring-api-have-callbacks" class="table-of-contents__link toc-highlight"><strong>2. Does the Recurring API have callbacks?</strong></a></li><li><a href="#3-how-will-i-find-data-about-my-payments" class="table-of-contents__link toc-highlight"><strong>3. How will I find data about my payments?</strong></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 MobilePay. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.0727d4e1.js"></script>
<script src="/assets/js/main.5b808a05.js"></script>
</body>
</html>