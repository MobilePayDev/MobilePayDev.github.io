<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-pos/best-practices" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Best Practices | MobilePay Developer</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://developer.mobilepay.dk/docs/pos/best-practices"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Best Practices | MobilePay Developer"><meta data-rh="true" name="description" content="This section is an overview over best practices when integrating to MobilePay PoS. The purpose of these best practices is to optimize the customer and merchant experience, to reduce errors and to keep the integration as simple as possible without reducing customer and merchant experience."><meta data-rh="true" property="og:description" content="This section is an overview over best practices when integrating to MobilePay PoS. The purpose of these best practices is to optimize the customer and merchant experience, to reduce errors and to keep the integration as simple as possible without reducing customer and merchant experience."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developer.mobilepay.dk/docs/pos/best-practices"><link data-rh="true" rel="alternate" href="https://developer.mobilepay.dk/docs/pos/best-practices" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.mobilepay.dk/docs/pos/best-practices" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-206187508-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.913a1e15.css">
<link rel="preload" href="/assets/js/runtime~main.ca864f76.js" as="script">
<link rel="preload" href="/assets/js/main.057d2bb2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-blue.svg" alt="MobilePay" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-white.svg" alt="MobilePay" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Developer</b></a><a class="navbar__item navbar__link" href="/docs/app-payments">App Payments</a><a class="navbar__item navbar__link" href="/docs/invoice">Invoice</a><a class="navbar__item navbar__link" href="/docs/online">Online</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/pos">Point of Sale</a><a class="navbar__item navbar__link" href="/docs/subscriptions">Subscriptions</a><a class="navbar__item navbar__link" href="/docs/reporting">Reporting</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">API references</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/api/app-payments">App payments</a></li><li><a class="dropdown__link" href="/api/wehooks">Webhooks</a></li><li><a class="dropdown__link" href="/api/invoice">Invoice</a></li><li><a class="dropdown__link" href="/api/online">Online</a></li><li><a class="dropdown__link" href="/api/pos">PoS</a></li><li><a class="dropdown__link" href="/api/subscriptions">Subscriptions</a></li><li><a class="dropdown__link" href="/api/reporting">Reporting (v3)</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/support">Support</a><a href="https://github.com/MobilePayDev/MobilePayDev.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/app-payments">App Payments</a><button aria-label="Toggle the collapsible sidebar category &#x27;App Payments&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/invoice">Invoice</a><button aria-label="Toggle the collapsible sidebar category &#x27;Invoice&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/online">Online</a><button aria-label="Toggle the collapsible sidebar category &#x27;Online&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/pos">Point of Sale</a><button aria-label="Toggle the collapsible sidebar category &#x27;Point of Sale&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pos/development-guide">Development Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/authentication">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/detecting-mobilepay">Detecting MobilePay</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pos/payment-flows">Payment Flows</a><button aria-label="Toggle the collapsible sidebar category &#x27;Payment Flows&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/pos-management">Point-of-Sale Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/notification-service">Notification Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/pos/best-practices">Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/api-principles">API Principles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/api-errors">API Errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/input-and-output-formats">Input and Output Formats</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/create-qr-codes">Create QR codes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/release-notes">PoS API Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/glossary">Glossary of Terms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/transition-to-one-platform">Transition to One Platform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/resources">Resources</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/subscriptions">Subscriptions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Subscriptions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/reporting">Reporting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reporting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/support">Developer Support</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developer Support&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/pos"><span itemprop="name">Point of Sale</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Best Practices</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Best Practices</h1><p>This section is an overview over best practices when integrating to MobilePay PoS. The purpose of these best practices is to optimize the customer and merchant experience, to reduce errors and to keep the integration as simple as possible without reducing customer and merchant experience.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="check-in-before-or-after-payment-has-been-initiated">Check-in before or after payment has been initiated<a href="#check-in-before-or-after-payment-has-been-initiated" class="hash-link" aria-label="Direct link to Check-in before or after payment has been initiated" title="Direct link to Check-in before or after payment has been initiated">​</a></h2><p>While the system supports customers checking in both before or after a payment has been initiated, best practice is to urge customers to check in before.
As an example: In a supermarket a customer can check in and then start bagging their groceries. When all the groceries have been scanned the cash register will initiate the payment and allow the customer to swipe.
This is an advantage over both cash and card payments, as the customer has no need to go back to the terminal/payment area again. This results in a faster transaction for all involved parties.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="payment-and-loyalty-payment-flows">Payment and loyalty payment flows<a href="#payment-and-loyalty-payment-flows" class="hash-link" aria-label="Direct link to Payment and loyalty payment flows" title="Direct link to Payment and loyalty payment flows">​</a></h2><p>There are two main payment flows in the V10 API.
Initiating a payment followed by a capture (the <a href="/docs/pos/payment-flows/payment-flow">Payment Flow</a>), and a flow where initiate payment is split into two parts: Prepare-Ready and then followed by a capture (the <a href="/docs/pos/payment-flows/prepared-payment-flow">Prepared Payment Flow</a>).
The recommendation is to use the Payment Flow if there is no need for knowing the customer before setting the amount.
Using the Payment Flow will save a call to the API and in the end improve the overall time it takes to complete a payment.
Cases in which knowing the customer before setting the amount includes loyalty payments where a discount is based on the customer&#x27;s loyalty ID.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="specify-planned-capture-delay">Specify planned capture delay<a href="#specify-planned-capture-delay" class="hash-link" aria-label="Direct link to Specify planned capture delay" title="Direct link to Specify planned capture delay">​</a></h2><p>It is required to specify when the payment is expected to be captured. The values are either <em>None</em>, <em>LessThan24Hours</em>, and <em>LessThan14Days</em>. These are values that control how payments are handled by MobilePay Support and it is therefore beneficial that these values are set as accurate as possible.
The three values differ in the following way:</p><ul><li><strong>None</strong>: If payments with this value are not captured <strong>the following day</strong> it is possible for MobilePay Support to reach out to make sure the payments are handled (either cancelled or captured) although this is not guaranteed.</li><li><strong>LessThan24Hours</strong>: If payments with this value are not captured <strong>the following 2-3 days</strong> it is possible for MobilePay Support to reach out to make sure the payments are handled (either cancelled or captured) although this is not guaranteed.</li><li><strong>LessThan14Days</strong>: If payments with this value are not captured MobilePay Support cannot help since the reservation will be expired and, hence, cannot be captured. Make sure this value is only used when appropriate.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="order-ids">Order IDs<a href="#order-ids" class="hash-link" aria-label="Direct link to Order IDs" title="Direct link to Order IDs">​</a></h2><p>Order IDs are not required to be unique however this is highly recommended.
In error cases where the <code>paymentId</code> is lost it can be retrieved based on the <code>posId</code> and the <code>orderId</code> by calling the <code>GET /v10/payments</code> endpoint. If the <code>orderId</code> is unique the endpoint will return the expected <code>paymentId</code>. However, if the <code>orderId</code> is not unique the mapping is overwritten and the endpoint will return the latest <code>paymentId</code> that was associated with the specified <code>orderId</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="capture-or-cancellation-of-old-payments">Capture or cancellation of old payments<a href="#capture-or-cancellation-of-old-payments" class="hash-link" aria-label="Direct link to Capture or cancellation of old payments" title="Direct link to Capture or cancellation of old payments">​</a></h2><p>All payments in <em>Reserved</em> state should be captured or cancelled as soon as practically possible. If an error occurs that makes it temporarily impossible to neither cancel or capture the payment, the PoS client is responsible for persisting which payments should be captured and which should be cancelled at a later stage. Later when processing old payments in <em>Reserved</em> state it is important that only payments that should be captured are captured and the same in regards to payments that should be cancelled.
It is bad practice to poll for every outstanding payments that are in the <em>Reserved</em> state, since that could lead to payments being captured which should have been cancelled and vice versa.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="polling">Polling<a href="#polling" class="hash-link" aria-label="Direct link to Polling" title="Direct link to Polling">​</a></h2><p>It is possible to get information on a payment using <code>GET /v10/payments/{paymentId}</code>, and it is possible to get information about an active check-in using <code>GET /v10/pointofsales/{posId}/checkin</code>.
For both of these endpoints, it is allowed to do polling at most once per second. Polling times are controlled by the backend. The response will always contain a time interval that specifies, when the endpoint should at the earliest be polled again. The recommendation is to poll as fast as allowed by the backend to ensure maximal merchant and customer experience.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="payment-restrictions">Payment restrictions<a href="#payment-restrictions" class="hash-link" aria-label="Direct link to Payment restrictions" title="Direct link to Payment restrictions">​</a></h2><p>It is possible to restrict which card types can be used for a payment. This restriction is available in order to support that some countries have restrictions on which cards can be used for certain products.
The recommendation is to only set restrictions on payments where it is required to do so by the law or in case there are some business related reasons for restricting the payment. You can put restrictions when starting payments with either <code>POST /v10/payments/</code> or <code>POST /v10/payments/{paymentId}/ready</code>. See <a href="/docs/pos/input-and-output-formats#payment-restrictions">Restrictions formatting</a> for how to provide restrictions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="merchant-onboarding">Merchant onboarding<a href="#merchant-onboarding" class="hash-link" aria-label="Direct link to Merchant onboarding" title="Direct link to Merchant onboarding">​</a></h2><p>When a PoS client needs to onboard a merchant to the MobilePay V10 API, the Pos client needs to know the <code>storeId</code> for the store they will do payments on behalf of. There are two possible ways to obtain the <code>storeId</code> needed.</p><ul><li><strong>Merchant VAT number</strong>: If the merchant that needs onboarding is a new customer for the PoS Integrator, then Merchant VAT number should be used to obtain storeIds. The PoS integrator can call <code>GET /v10/stores</code> and the MobilePay backend will use the VAT number to return all storeIds for that merchant. To get details about each store you can then call the endpoint <code>GET /v10/stores/{storeId}</code> for each <code>storeId</code>.</li><li><strong>MerchantBrandId + MerchantLocationId</strong>: If the merchant that needs onboarding is already a customer of the PoS Integrator, then <code>MerchantBrandId</code> and <code>MerchantLocationId</code> can be used to obtain storeIds. The PoS client can call <code>GET /v10/stores/?merchantBrandId={merchantBrandId}&amp;merchantLocationId={merchantLocationId}</code> for each location to get a list of storeIds that only contains the <code>storeId</code> for that location. This way the PoS client can avoid the process of looking up specific store data to determine which <code>storeId</code> represents which store.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="choosing-a-beaconid">Choosing a BeaconId<a href="#choosing-a-beaconid" class="hash-link" aria-label="Direct link to Choosing a BeaconId" title="Direct link to Choosing a BeaconId">​</a></h2><p>There are three principles for choosing a BeaconId.</p><ol><li>If you have received a 15-digit Id from MobilePay - use that as your Id.</li><li>If you have an earlier GUID that you need to use because you have it printed or similar - then use that GUID.</li><li>Otherwise let MobilePay generate a new GUID for you everytime you create a PoS.</li></ol><p>Following this approach will lead to fewer issues with collisions for everyone.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="optimal-flow">Optimal flow<a href="#optimal-flow" class="hash-link" aria-label="Direct link to Optimal flow" title="Direct link to Optimal flow">​</a></h2><p>To ensure the best costumer experience, the payment flow from a costumers point of view, ends when the payment has reached Reserved state. At this stage the customer is allowed to leave the store.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/pos/notification-service"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Notification Service</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/pos/api-principles"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Principles</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#check-in-before-or-after-payment-has-been-initiated" class="table-of-contents__link toc-highlight">Check-in before or after payment has been initiated</a></li><li><a href="#payment-and-loyalty-payment-flows" class="table-of-contents__link toc-highlight">Payment and loyalty payment flows</a></li><li><a href="#specify-planned-capture-delay" class="table-of-contents__link toc-highlight">Specify planned capture delay</a></li><li><a href="#order-ids" class="table-of-contents__link toc-highlight">Order IDs</a></li><li><a href="#capture-or-cancellation-of-old-payments" class="table-of-contents__link toc-highlight">Capture or cancellation of old payments</a></li><li><a href="#polling" class="table-of-contents__link toc-highlight">Polling</a></li><li><a href="#payment-restrictions" class="table-of-contents__link toc-highlight">Payment restrictions</a></li><li><a href="#merchant-onboarding" class="table-of-contents__link toc-highlight">Merchant onboarding</a></li><li><a href="#choosing-a-beaconid" class="table-of-contents__link toc-highlight">Choosing a BeaconId</a></li><li><a href="#optimal-flow" class="table-of-contents__link toc-highlight">Optimal flow</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 MobilePay. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ca864f76.js"></script>
<script src="/assets/js/main.057d2bb2.js"></script>
</body>
</html>