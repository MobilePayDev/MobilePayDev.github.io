<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-pos/pos-management" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Point-of-Sale Management | MobilePay Developer</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://developer.mobilepay.dk/docs/pos/pos-management"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Point-of-Sale Management | MobilePay Developer"><meta data-rh="true" name="description" content="The Point-of-Sale (PoS) represents the contact point between a customer wanting to pay with MobilePay and the merchant."><meta data-rh="true" property="og:description" content="The Point-of-Sale (PoS) represents the contact point between a customer wanting to pay with MobilePay and the merchant."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developer.mobilepay.dk/docs/pos/pos-management"><link data-rh="true" rel="alternate" href="https://developer.mobilepay.dk/docs/pos/pos-management" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.mobilepay.dk/docs/pos/pos-management" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-206187508-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.7873bfd6.css">
<link rel="preload" href="/assets/js/runtime~main.8bdceea3.js" as="script">
<link rel="preload" href="/assets/js/main.01e1196c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-blue.svg" alt="MobilePay" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-white.svg" alt="MobilePay" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Developer</b></a><a class="navbar__item navbar__link" href="/docs/app-payments">App Payments</a><a class="navbar__item navbar__link" href="/docs/invoice">Invoice</a><a class="navbar__item navbar__link" href="/docs/online">Online</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/pos">Point of Sale</a><a class="navbar__item navbar__link" href="/docs/subscriptions">Subscriptions</a><a class="navbar__item navbar__link" href="/docs/reporting">Reporting</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">API references</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/api/app-payments">App payments</a></li><li><a class="dropdown__link" href="/api/wehooks">Webhooks</a></li><li><a class="dropdown__link" href="/api/invoice">Invoice</a></li><li><a class="dropdown__link" href="/api/online">Online</a></li><li><a class="dropdown__link" href="/api/pos">PoS</a></li><li><a class="dropdown__link" href="/api/subscriptions">Subscriptions</a></li><li><a class="dropdown__link" href="/api/reporting">Reporting (v3)</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/support">Support</a><a href="https://github.com/MobilePayDev/MobilePayDev.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/app-payments">App Payments</a><button aria-label="Toggle the collapsible sidebar category &#x27;App Payments&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/invoice">Invoice</a><button aria-label="Toggle the collapsible sidebar category &#x27;Invoice&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/online">Online</a><button aria-label="Toggle the collapsible sidebar category &#x27;Online&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/pos">Point of Sale</a><button aria-label="Toggle the collapsible sidebar category &#x27;Point of Sale&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pos/development-guide">Development Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/authentication">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/detecting-mobilepay">Detecting MobilePay</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pos/payment-flows">Payment Flows</a><button aria-label="Toggle the collapsible sidebar category &#x27;Payment Flows&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/pos/pos-management">Point-of-Sale Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/notification-service">Notification Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/best-practices">Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/api-principles">API Principles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/api-errors">API Errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/input-and-output-formats">Input and Output Formats</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/create-qr-codes">Create QR codes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/release-notes">PoS API Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/glossary">Glossary of Terms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/transition-to-one-platform">Transition to One Platform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pos/resources">Resources</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/subscriptions">Subscriptions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Subscriptions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/reporting">Reporting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reporting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/support">Developer Support</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developer Support&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/pos"><span itemprop="name">Point of Sale</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Point-of-Sale Management</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Point-of-Sale Management</h1><p>The Point-of-Sale (PoS) represents the contact point between a customer wanting to pay with MobilePay and the merchant.
To initiate a MobilePay payment it is necessary to first create a PoS.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="onboarding">Onboarding<a href="#onboarding" class="hash-link" aria-label="Direct link to Onboarding" title="Direct link to Onboarding">​</a></h2><p>Each PoS belongs to a <em>Store</em> which belongs to a <em>Brand</em>. A brand can be thought of as a combination of a name and a logo. An example of a brand could be 7-Eleven in Denmark or K-Market in Finland. Each brand consists of one or more stores. A store is the representation of a merchant&#x27;s shop. It contains a <code>storeId</code> as well as the name and the address of the shop. When a MobilePay customer checks in on a PoS they will see the brand logo and name as well as the shop name in the app, which helps the customer confirm that they have in fact checked in where they intended.
When an integrator needs to onboard a PoS they need the <code>storeId</code> to create all the PoSes on that store. The <code>storeId</code> will therefore have to be persisted in an application configuration file for subsequent calls to the V10 API. There are generally two ways to acquire the <code>storeId</code>. The recommended option depends on the merchant being a migrated merchant or not. The two different approaches are described below.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="no-existing-solution">No existing solution<a href="#no-existing-solution" class="hash-link" aria-label="Direct link to No existing solution" title="Direct link to No existing solution">​</a></h3><p>When an integrator is building a new integration for a merchant they need to know the store to which the PoS should be created. The goal is to get a list of all the stores that belongs to a merchant and then use the <code>storeId</code> from the appropriate store to create the PoS. First the integrator needs to call <code>GET /v10/stores</code> without any query parameters and the endpoint will return all the <code>storeId</code>s based on the Merchant VAT either provided in the <code>x-mobilepay-merchant-vat-number</code> header or provided in the access token (see <a href="/docs/pos/authentication#obtaining-an-access-token">Authentication</a>). Then the integrator will loop through the list and for each <code>storeId</code> call <code>GET /v10/stores/{storeid}</code> that will return the store information for that specific store. In the end the integrator have a list of all the stores the merchant has and then the integrator knows which <code>storeId</code> for each store to use when creating a PoS. Below diagram illustrates a flow to get all merchant stores.</p><img loading="lazy" src="/assets/images/pos-GetStoresByVat-efcd23c810d6dc812116f768e1922c6e.png" alt="Get Stores by VAT" width="550" class="img_ev3q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="existing-solution">Existing solution<a href="#existing-solution" class="hash-link" aria-label="Direct link to Existing solution" title="Direct link to Existing solution">​</a></h3><p>A brand is identified by a <code>merchantBrandId</code>. A <code>merchantLocationId</code> together with a <code>merchantBrandId</code> identifies a store within a brand.
If the merchant already has a MobilePay PoS solution with integration to either API V06, V07 or V08 then an integrator can use the already known <code>merchantBrandId</code> and <code>merchantLocationId</code> to get the <code>StoreId</code>, If the <code>merchantBrandId</code> and <code>merchantLocationId</code> is not known the process from the above paragraph will be the most efficient. To get the <code>StoreId</code> the integrator will have to call <code>GET /v10/stores</code> with the two ids, and in return they will receive the <code>storeId</code>. Below diagram illustrates a flow for getting the <code>storeId</code> using <code>GET /v10/stores</code>.</p><img loading="lazy" src="/assets/images/pos-get_store-aca37409927adc46ef1f952c1f8119e2.png" alt="Get Store" width="550" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pos-creation">PoS Creation<a href="#pos-creation" class="hash-link" aria-label="Direct link to PoS Creation" title="Direct link to PoS Creation">​</a></h2><p>A PoS is created using the <code>POST /v10/pointofsales</code> endpoint. A PoS is identified in the PoS V10 API by a <code>posId</code> that is assigned by MobilePay upon creation of the PoS. Clients can provide their own internal identifier as a <code>merchantPosId</code> upon creation and use the <code>GET /v10/pointofsales</code> endpoint to lookup a <code>posId</code> based on a <code>merchantPosId</code>. The <code>merchantPosId</code> field is required, so if no internal identifier is applicable, the client should generate and supply a random string (eg. a fresh GUID) instead.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="beacons">Beacons<a href="#beacons" class="hash-link" aria-label="Direct link to Beacons" title="Direct link to Beacons">​</a></h3><p>The first thing to consider when creating a PoS is what beacon(s) will be used to connect MobilePay users to the given PoS.
This can range from an unmanned vending machine that has no payment hardware at all and hence only shows a QR code on a screen, to a full fledged super market ECR with a 2-way bluetooth capable terminal that also can show a QR code. To create a PoS, the client needs to provide a list of possible ways to detect the PoS. The more accurate the list is, the better MobilePay will be able to detect errors (if bluetooth is provided as a beacon type but we detect that no user ever checks in via bluetooth something is likely wrong). It is recommended to keep the list of supported beacon types in an application configuration and then edit the list in case the setup changes.</p><p>Each beacon, whether through a MobilePay QR code or a bluetooth/NFC signal, encodes a <code>beaconId</code> that can be read by the MobilePay app. It is the <code>beaconId</code> that is used to connect a MobilePay user to a specific PoS. <code>beaconId</code>s are globally unique across all merchants in MobilePay PoS and each <code>beaconId</code> can refer to at most one active PoS at any given time.</p><p>Depending on the client setup, there are different use cases for handling <code>beaconId</code>s in API V10</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="client-that-only-supports-dynamic-qr-codes">Client that only supports dynamic QR codes<a href="#client-that-only-supports-dynamic-qr-codes" class="hash-link" aria-label="Direct link to Client that only supports dynamic QR codes" title="Direct link to Client that only supports dynamic QR codes">​</a></h4><p>In case the client only allows QR beacons (no physical device) and can create a QR code dynamically (i.e generate a QR code and show it on a screen in opposition to printing a physical QR code), then the client can choose to let MobilePay create a GUID to use as <code>beaconId</code>. The client then omits to provide a <code>beaconId</code> on PoS creation and afterwards queries the PoS to get the <code>beaconId</code>. The client can then store the <code>beaconId</code> in memory for QR code generation. Everytime the client reboots the client then has to query the PoS and grab the <code>beaconId</code>. This way the client is not required to store a <code>beaconId</code> in a configuration file since they can rely on querying it dynamically.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="client-that-only-supports-static-qr-codes">Client that only supports static QR codes<a href="#client-that-only-supports-static-qr-codes" class="hash-link" aria-label="Direct link to Client that only supports static QR codes" title="Direct link to Client that only supports static QR codes">​</a></h4><p>In case the client only allows QR beacons but is not able to generate a QR code dynamically, the client needs the <code>beaconId</code> for the PoS creation. The following options are available:</p><ol><li>The client can generate the <code>beaconId</code> and provide it on PoS creation</li><li>An arbitrary <code>beaconId</code> can be produced outside the client and be inputted to the client for instance using readers, scanners or inputted using a keyboard. MobilePay can generate the <code>beaconId</code> automatically as part of the production of stickers, if stickers are needed as the “acceptance device”.</li></ol><p>If stickers are needed as the acceptance device, we suggest that you use MobilePay to help deliver QR-code stickers to your merchants using option 2.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The easiest way of handling stickers is if the client is set up to support activation and deactivation of QR codes directly from the merchant location.
You can order the stickers directly from MobilePay’s print supplier’s sticker webshop, and the Beacon IDs and QR codes will automatically be generated. The BeaconId will be printed on the sticker, so that it can be added by the merchant, or the merchant can report to you, which Beacon IDs the merchant uses.
<a href="https://mp.bordingcentral.dk" target="_blank" rel="noopener noreferrer">Sticker Webshop</a></p></div></div><p>The <code>beaconId</code> should then be stored locally in a configuration file so that it can be used if the PoS needs to be updated (i.e. deleted and re-created. See <a href="/docs/pos/pos-management#pos-updating-and-deletion">PoS Update and Deletion</a>). To avoid clashes, the client must use a GUID as the <code>beaconId</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="client-that-supports-physical-devices-terminals-mobilepay-white-boxes">Client that supports physical devices (terminals, MobilePay white boxes)<a href="#client-that-supports-physical-devices-terminals-mobilepay-white-boxes" class="hash-link" aria-label="Direct link to Client that supports physical devices (terminals, MobilePay white boxes)" title="Direct link to Client that supports physical devices (terminals, MobilePay white boxes)">​</a></h4><p>In cases where the client uses a physical device then that device will have a MobilePay <code>beaconId</code> associated with it. On PoS creation this <code>beaconId</code> has to be provided. Some devices allows a client to read the <code>beaconId</code> from it. If that is the case we recommend to read the <code>beaconId</code> when the client reboots and query the PoS to see if the <code>beaconId</code>s match. If not delete the PoS and re-create it with the new <code>beaconId</code>. This will make it possible to replace the device if its broken, and only have to reboot the system to propagate the changes.
If reading the <code>beaconId</code> from the device is not possible, we recommend to store the <code>beaconId</code> locally in a configuration file so that it persists through reboots.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="preventing-checkin-before-payment">Preventing checkin before payment<a href="#preventing-checkin-before-payment" class="hash-link" aria-label="Direct link to Preventing checkin before payment" title="Direct link to Preventing checkin before payment">​</a></h3><p>Normally, a user is allowed to check in on a point of sale before a payment is created. Then, once the payment is created, the payment will pop up on the user&#x27;s phone for them to pay. However, in some cases, this is not what you want.</p><p>For example, in a self-service solution, a user could check in on a point of sale, walk away, and then they&#x27;ll get paired to the next user&#x27;s payment if the next user does not take over the check-in in time.</p><p>When creating a PoS, the client can set the <code>requirePaymentBeforeCheckin</code> property to <code>true</code> (by default it is <code>false</code>), and then users are not allowed to check in to a point of sale before a payment is created on the point of sale. This ensures that no users are checked in when the payment is created, so you can ensure the correct user gets paired.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="callback">Callback<a href="#callback" class="hash-link" aria-label="Direct link to Callback" title="Direct link to Callback">​</a></h3><p>If the client system cannot detect when a MobilePay user wants to pay and therefore needs to use the <a href="/docs/pos/detecting-mobilepay#notification-service">Notification service</a>, the client should set the callback parameter accordingly when calling <code>POST /v10/pointofsales</code>.
It is recommended to store the callback alias in the config file of the application.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="naming">Naming<a href="#naming" class="hash-link" aria-label="Direct link to Naming" title="Direct link to Naming">​</a></h3><p>The last thing to keep in mind when creating a PoS is to consider the name. When a MobilePay user checks in on the PoS they will in the app see, in sequence: The name of the brand, the name of the store and the name of the PoS. We recommend naming the PoS so that the MobilePay user can verify that they in fact have checked in the right place. So in a supermarket scenario a good name for the PoS would be &quot;Check-out 1&quot; for the first check-out counter in that supermarket.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pos-updating-and-deletion">PoS Updating and Deletion<a href="#pos-updating-and-deletion" class="hash-link" aria-label="Direct link to PoS Updating and Deletion" title="Direct link to PoS Updating and Deletion">​</a></h2><p>A PoS can be deleted using the <code>DELETE /v10/pointofsales/{posId}</code> endpoint.</p><p>We recommend only deleting a PoS if it is either not going to be used anymore, or you need to update it to reflect changes like a new callback alias, new name, new <code>beaconId</code> etc.</p><p>When a PoS is deleted it is no longer possible to issue payments. However it will still be possible to capture or cancel payments that are in the reserved state. It is best practice to delay the deletion of a PoS until all payments have either been cancelled or captured.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="keeping-in-sync-with-mobilepay">Keeping in sync with MobilePay<a href="#keeping-in-sync-with-mobilepay" class="hash-link" aria-label="Direct link to Keeping in sync with MobilePay" title="Direct link to Keeping in sync with MobilePay">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="when-pos-reboots">When PoS reboots<a href="#when-pos-reboots" class="hash-link" aria-label="Direct link to When PoS reboots" title="Direct link to When PoS reboots">​</a></h3><p>When the client reboots it is good practice to query the PoS with <code>GET /v10/pointofsales</code> with the <code>merchantPosId</code> and persist the <code>posId</code> in memory to use for initiating payments. If no PoS is returned, the client will have to re-create it. Here is the flow described:</p><img loading="lazy" src="/assets/images/pos-PoS_Onboarding-70916e32e4cde9535409d2f2c16ce816.png" alt="PoS onboarding" width="550" class="img_ev3q"><p>We recommend the client to store the following in a configuration file to be able to create the PoS when needed:</p><ul><li><code>StoreId</code></li><li><code>MerchantPosId</code></li><li>Name of PoS</li><li><code>BeaconId</code> (unless it can be read from the device itself. See <a href="/docs/pos/pos-management#beacons">Beacons</a> )</li><li>Callback (If the client is dependent on the notification service. See <a href="/docs/pos/pos-management#callback">Callback</a>)</li><li>Supported beacon types</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="master-data">Master Data<a href="#master-data" class="hash-link" aria-label="Direct link to Master Data" title="Direct link to Master Data">​</a></h2><p>A PoS belongs to a store which in turn belongs to a merchant and associated with a brand. A PoS is identified by a <code>posId</code>, but it is also possible to refer to a PoS by its <code>beaconId</code> or <code>merchantPosId</code>. There can be at most one active PoS with a given <code>beaconId</code> at any given time. There can be at most one active PoS with a given <code>merchantPosId</code> at any given time, for a given integrator and merchant.</p><p>A store is identified by a <code>storeId</code>, but it is also possible to refer to a store by the combination of <code>merchantBrandId</code> and <code>merchantLocationId</code>. Two stores with the same <code>merchantLocationId</code> but different <code>merchantBrandId</code>s are not related in any way. The <code>merchantBrandId</code>, <code>merchantLocationId</code> and <code>storeId</code> are supplied by MobilePay when the Merchant/Store is onboarded.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/pos/payment-flows/partial-capture"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Partial Capture</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/pos/notification-service"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Notification Service</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#onboarding" class="table-of-contents__link toc-highlight">Onboarding</a><ul><li><a href="#no-existing-solution" class="table-of-contents__link toc-highlight">No existing solution</a></li><li><a href="#existing-solution" class="table-of-contents__link toc-highlight">Existing solution</a></li></ul></li><li><a href="#pos-creation" class="table-of-contents__link toc-highlight">PoS Creation</a><ul><li><a href="#beacons" class="table-of-contents__link toc-highlight">Beacons</a></li><li><a href="#preventing-checkin-before-payment" class="table-of-contents__link toc-highlight">Preventing checkin before payment</a></li><li><a href="#callback" class="table-of-contents__link toc-highlight">Callback</a></li><li><a href="#naming" class="table-of-contents__link toc-highlight">Naming</a></li></ul></li><li><a href="#pos-updating-and-deletion" class="table-of-contents__link toc-highlight">PoS Updating and Deletion</a></li><li><a href="#keeping-in-sync-with-mobilepay" class="table-of-contents__link toc-highlight">Keeping in sync with MobilePay</a><ul><li><a href="#when-pos-reboots" class="table-of-contents__link toc-highlight">When PoS reboots</a></li></ul></li><li><a href="#master-data" class="table-of-contents__link toc-highlight">Master Data</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 MobilePay. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8bdceea3.js"></script>
<script src="/assets/js/main.01e1196c.js"></script>
</body>
</html>