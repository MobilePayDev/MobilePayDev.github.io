"use strict";(self.webpackChunkmobile_pay_merchant_payments_documentation=self.webpackChunkmobile_pay_merchant_payments_documentation||[]).push([[7716],{15680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>m});var r=n(96540);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=r.createContext({}),c=function(e){var t=r.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(d.Provider,{value:t},e.children)},u="mdxType",l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,d=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(n),f=a,m=u["".concat(d,".").concat(f)]||u[f]||l[f]||o;return n?r.createElement(m,s(s({ref:t},p),{},{components:n})):r.createElement(m,s({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=f;var i={};for(var d in t)hasOwnProperty.call(t,d)&&(i[d]=t[d]);i.originalType=e,i[u]="string"==typeof e?e:a,s[1]=i;for(var c=2;c<o;c++)s[c]=n[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},81517:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>l,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var r=n(58168),a=(n(96540),n(15680));const o={sidebar_position:4},s="Refunds",i={unversionedId:"pos/payment-flows/refunds",id:"pos/payment-flows/refunds",title:"Refunds",description:"Once a payment is captured, the payment amount is immediately charged from the customer. Therefore, the payment can no longer be cancelled. Instead, the payment amount can be transferred back to the customer, by performing refunds. Each captured payment can be refunded multiple times with the restriction that the sum of the refunds cannot exceed the captured payment amount. A payment can be refunded up to 90 days after the payment was captured. After 90 days a refund is no longer possible with MobilePay.",source:"@site/docs/pos/payment-flows/refunds.md",sourceDirName:"pos/payment-flows",slug:"/pos/payment-flows/refunds",permalink:"/docs/pos/payment-flows/refunds",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docsSidebar",previous:{title:"Payment Flow Error Handling",permalink:"/docs/pos/payment-flows/payment-flow-error-handling"},next:{title:"Cancel Flows",permalink:"/docs/pos/payment-flows/cancel-flows"}},d={},c=[],p={toc:c},u="wrapper";function l(e){let{components:t,...o}=e;return(0,a.yg)(u,(0,r.A)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"refunds"},"Refunds"),(0,a.yg)("p",null,"Once a payment is captured, the payment amount is immediately charged from the customer. Therefore, the payment can no longer be cancelled. Instead, the payment amount can be transferred back to the customer, by performing ",(0,a.yg)("em",{parentName:"p"},"refunds"),". Each captured payment can be refunded multiple times with the restriction that the sum of the refunds cannot exceed the captured payment amount. A payment can be refunded up to 90 days after the payment was captured. After 90 days a refund is no longer possible with MobilePay."),(0,a.yg)("p",null,"A refund can be executed if the store payment balance contains enough money to cover the refund. If the balance doesn\u2019t cover the amount of the refund, the refund will fail with error code 1368"),(0,a.yg)("p",null,"The sequence diagram below shows a sunshine scenario for a refund. Initiating a refund yields a ",(0,a.yg)("inlineCode",{parentName:"p"},"refundId")," that can be used to capture the refund. A refund starts out in the ",(0,a.yg)("em",{parentName:"p"},"Initiated")," state and transitions to the ",(0,a.yg)("em",{parentName:"p"},"Reserved")," state when the refund has been reserved as shown in the state diagram below. Once a refund has been reserved, the client can choose to capture the refund, transitioning the state to ",(0,a.yg)("em",{parentName:"p"},"Captured"),". When a refund is captured, the refunded amount is immediately transferred to the customer and the customer will be able to see the refund in the activity list.\nA refund reservation will expire and be automatically captured after 24 hours."),(0,a.yg)("img",{src:n(37352).A,alt:"Refund flow",width:"650"}),(0,a.yg)("p",null,"Until the refund has been captured, the client can also choose to cancel the refund. The diagram below shows the possible states and transitions for a refund."),(0,a.yg)("img",{src:n(33386).A,alt:"Refund states",width:"600"}),(0,a.yg)("p",null,"To refund a payment, the client needs to provide the paymentId of the payment to be refunded. In case the paymentId has been lost it can be retrieved by calling ",(0,a.yg)("inlineCode",{parentName:"p"},"GET /v10/payments?orderId={orderId}&state=Captured")," with the orderId from the payment to be refunded."))}l.isMDXComponent=!0},37352:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/pos-refund-flow-27fb851d9cf5e0f68a45ed238d36148b.png"},33386:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/pos-refund-states-ab44cf329f46e8c0eb94d59e1a1e257d.png"}}]);