"use strict";(self.webpackChunkmobile_pay_merchant_payments_documentation=self.webpackChunkmobile_pay_merchant_payments_documentation||[]).push([[2185],{15680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>c});var a=t(96540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),g=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=g(e.components);return a.createElement(o.Provider,{value:n},e.children)},m="mdxType",y={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},s=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,p=d(e,["components","mdxType","originalType","parentName"]),m=g(t),s=r,c=m["".concat(o,".").concat(s)]||m[s]||y[s]||l;return t?a.createElement(c,i(i({ref:n},p),{},{components:t})):a.createElement(c,i({ref:n},p))}));function c(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=s;var d={};for(var o in n)hasOwnProperty.call(n,o)&&(d[o]=n[o]);d.originalType=e,d[m]="string"==typeof e?e:r,i[1]=d;for(var g=2;g<l;g++)i[g]=t[g];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}s.displayName="MDXCreateElement"},66814:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>y,frontMatter:()=>l,metadata:()=>d,toc:()=>g});var a=t(58168),r=(t(96540),t(15680));const l={sidebar_position:4},i="API Endpoint Reference",d={unversionedId:"invoice/api-endpoint-reference",id:"invoice/api-endpoint-reference",title:"API Endpoint Reference",description:"InvoiceDirect",source:"@site/docs/invoice/api-endpoint-reference.md",sourceDirName:"invoice",slug:"/invoice/api-endpoint-reference",permalink:"/docs/invoice/api-endpoint-reference",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docsSidebar",previous:{title:"Invoice Issuers",permalink:"/docs/invoice/invoice-issuers"},next:{title:"Callbacks",permalink:"/docs/invoice/callbacks"}},o={},g=[{value:"InvoiceDirect",id:"invoicedirect",level:2},{value:"Create Invoice Direct",id:"create-invoice-direct",level:3},{value:"Input",id:"input",level:4},{value:"Create multiple invoices",id:"create-multiple-invoices",level:4},{value:"InvoiceLink",id:"invoicelink",level:2},{value:"Create InvoiceLink",id:"create-invoicelink",level:3},{value:"Create multiple invoice links",id:"create-multiple-invoice-links",level:3},{value:"Cancel invoice",id:"cancel-invoice",level:2},{value:"Get invoice details",id:"get-invoice-details",level:2},{value:"Get invoice status",id:"get-invoice-status",level:2},{value:"User consent for InvoiceDirect",id:"user-consent-for-invoicedirect",level:2},{value:"Attach a request of consent to send direct invoices to a particular invoice",id:"attach-a-request-of-consent-to-send-direct-invoices-to-a-particular-invoice",level:3},{value:"Get all consents in specified state",id:"get-all-consents-in-specified-state",level:3},{value:"Input (query string parameters)",id:"input-query-string-parameters",level:4},{value:"Get consent details",id:"get-consent-details",level:3},{value:"Error Codes",id:"error-codes",level:2},{value:"Validations",id:"validations",level:2},{value:"Limits",id:"limits",level:4}],p={toc:g},m="wrapper";function y(e){let{components:n,...l}=e;return(0,r.yg)(m,(0,a.A)({},p,l,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"api-endpoint-reference"},"API Endpoint Reference"),(0,r.yg)("h2",{id:"invoicedirect"},"InvoiceDirect"),(0,r.yg)("p",null,"High level ",(0,r.yg)("inlineCode",{parentName:"p"},"InvoiceDirect")," flow diagram"),(0,r.yg)("p",null,(0,r.yg)("a",{target:"_blank",href:t(60575).A},(0,r.yg)("img",{alt:"Invoice direct flow",src:t(58669).A,width:"732",height:"347"}))),(0,r.yg)("h3",{id:"create-invoice-direct"},"Create Invoice Direct"),(0,r.yg)("p",null,"You can create an invoice directly to MobilePay app. Notice that request require a customer mobile phone number. Check how invoice looks in the app ",(0,r.yg)("a",{parentName:"p",href:"/docs/invoice/visual-examples"},"here"),"."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},"POST api/v1/merchants/{merchantId}/invoices\n")),(0,r.yg)("h4",{id:"input"},"Input"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,r.yg)("th",{parentName:"tr",align:null},"Sub Parameter"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"InvoiceIssuer")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"guid")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," The ID of the invoicing department/branch of the merchant.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ConsumerAlias")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"object")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," Mobile alias of the MobilePay user to be invoiced.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"Alias")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," Mobile phone number of the MobilePay user. Should start with a '+' sign and country phone code. E.g. +4512345678 or +35812345678")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"AliasType")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," Alias type of the MobilePay user. Only value allowed is ",(0,r.yg)("inlineCode",{parentName:"td"},"Phone"),".")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ConsumerName")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Full name of the MobilePay user.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"TotalAmount")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," The requested amount to be paid. >0.00, decimals separated with a dot.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"TotalVatAmount")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"VAT amount. Decimals separated with a dot.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ConsumerAddressLines")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string[]")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"Address of consumer receiving the invoice.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"DeliveryAddressLines")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string[]")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"Delivery address.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"InvoiceNumber")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"At least one of the fields ",(0,r.yg)("inlineCode",{parentName:"strong"},"InvoiceNumber")," or ",(0,r.yg)("inlineCode",{parentName:"strong"},"PaymentReference")," is required.")," Invoice number. It will be used if PaymentReference is not filled.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"IssueDate")," \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"date")," \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"Issue date of invoice. ISO date format: ",(0,r.yg)("inlineCode",{parentName:"td"},"YYYY-MM-DD"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"DueDate")," \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"date")," \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," Payment due date. Must be between today and 400 days ahead, otherwise the request will be declined. ISO date format: ",(0,r.yg)("inlineCode",{parentName:"td"},"YYYY-MM-DD"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"OrderDate")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"date")),(0,r.yg)("td",{parentName:"tr",align:null},"Order date of invoice. ISO date format: ",(0,r.yg)("inlineCode",{parentName:"td"},"YYYY-MM-DD"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"DeliveryDate")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"date")),(0,r.yg)("td",{parentName:"tr",align:null},"Delivery date of invoice. ISO date format: ",(0,r.yg)("inlineCode",{parentName:"td"},"YYYY-MM-DD"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"Comment")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Additional information to the consumer.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"MerchantContactName")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"Contact name for the individual who issued the invoice.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"MerchantOrderNumber")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"The merchant order number for the invoice used internally by the merchant.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"BuyerOrderNumber")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"The buyer order number for the invoice used externally by the merchant.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"PaymentReference")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string(60)*")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"At least one of the fields ",(0,r.yg)("inlineCode",{parentName:"strong"},"InvoiceNumber")," or ",(0,r.yg)("inlineCode",{parentName:"strong"},"PaymentReference")," is required.")," Reference used on the payment to do reconciliation if merchant has chosen Instant Transfer method. If not filled, InvoiceNumber will be used as reference.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"InvoiceUrl")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"URL to the Invoice PDF provided by merchant.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"InvoiceArticles")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"array")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"At least one is required."))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ArticleNumber")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Article Number, e.g. 123456ABC")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ArticleDescription")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," Article Description.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"VATRate")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"VAT Rate of article.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"TotalVATAmount")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Total VAT amount of article. Decimals separated with a dot.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"TotalPriceIncludingVat")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Total price of article including VAT.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"Unit")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Unit, e.g. Pcs, Coli.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"Quantity")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Quantity of article. Allowed to have more than two decimal digits.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"\xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"PricePerUnit")," \xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Price per unit. Allowed to have more than two decimal digits.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"PriceReduction")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Price reduction.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"PriceDiscount")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Price discount.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"Bonus")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Bonus of article.")))),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},'Even though "PaymentReference" can contain up to 60 symbols the recommendation is to use up to 30 symbols. For instant transfers "PaymentReference" will be truncated up down to 30 symbols and included in bank statement.')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Example"',title:'"Example"'},'{\n  "InvoiceIssuer": "efd08c19-24cf-4833-a4a4-bfa7bd58fbb2",\n  "ConsumerAlias": {\n    "Alias": "+4577007700",\n    "AliasType": "Phone"\n  },\n  "ConsumerName": "Consumer Name",\n  "TotalAmount": 360,\n  "TotalVATAmount": 72,\n  "ConsumerAddressLines": [\n    "Paradis\xe6blevej 13",\n    "CC-1234 Andeby",\n    "WONDERLAND"\n  ],\n  "DeliveryAddressLines": [\n    "\xd8sterbrogade 120",\n    "CC-1234 Andeby",\n    "WONDERLAND"\n  ],\n  "InvoiceNumber": "301",\n  "IssueDate": "2018-02-12",\n  "DueDate": "2018-03-12",\n  "OrderDate": "2018-02-05",\n  "DeliveryDate": "2018-02-10",\n  "Comment": "Any comment",\n  "MerchantContactName": "Snowboard gear shop",\n  "MerchantOrderNumber": "938",\n  "BuyerOrderNumber": "631",\n  "PaymentReference": "186",\n  "InvoiceArticles": [\n    {\n      "ArticleNumber": "1-123",\n  "ArticleDescription": "Process Flying V Snowboard",\n      "VATRate": 25,\n      "TotalVATAmount": 72,\n      "TotalPriceIncludingVat": 360,\n      "Unit": "1",\n      "Quantity": 1,\n      "PricePerUnit": 288,\n      "PriceReduction": 0,\n      "PriceDiscount": 0,\n      "Bonus": 5\n    }\n  ]\n}\n')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'HTTP 202 Accepted\n\n{\n    "InvoiceId" : "63679ab7-cc49-4f75-80a7-86217fc105ea"\n}\n')),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"Note: If not accepted, invoice will expire 30 days after due date.")),(0,r.yg)("h4",{id:"create-multiple-invoices"},"Create multiple invoices"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},"POST api/v1/merchants/{merchantId}/invoices/batch\n")),(0,r.yg)("p",null,"You can create up to 2000 invoices per single batch."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Input (an array of objects used to create single invoice)"',title:'"Input',"(an":!0,array:!0,of:!0,objects:!0,used:!0,to:!0,create:!0,single:!0,'invoice)"':!0},"[\n  {\n     // InvoiceDirect input\n  },\n  {\n     // InvoiceDirect input\n  },\n  ...\n]\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'HTTP 202 Accepted\n\n{\n  "Accepted": [\n    {\n      "InvoiceNumber": "<original invoice number sent by the merchant>",\n      "InvoiceId": "66119129-aaf7-4ad0-a5b1-62382932b5c6"\n    },\n    {\n      "InvoiceNumber": "<original invoice number sent by the merchant>",\n      "InvoiceId": "5e3030a3-61ff-4143-a6bd-8457a09bcb0d"\n    },\n    ...\n  ],\n  "Rejected": [\n    {\n      "InvoiceNumber": "<original invoice number sent by the merchant>",\n           "Errors:[\n              {\n              "ErrorText": "<description of error>",\n              "ErrorCode": 10504\n              }\n       ]\n    },\n    ...\n  ]\n}\n')),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"When multiple invoices are sent, most of the validation is applied asynchronously. The result are sent via ",(0,r.yg)("a",{parentName:"p",href:"#callbacks"},"callbacks"),".")),(0,r.yg)("h2",{id:"invoicelink"},"InvoiceLink"),(0,r.yg)("p",null,"High level ",(0,r.yg)("inlineCode",{parentName:"p"},"InvoiceLink")," flow diagram"),(0,r.yg)("p",null,(0,r.yg)("a",{target:"_blank",href:t(14832).A},(0,r.yg)("img",{alt:"Invoice link flow",src:t(31790).A,width:"1059",height:"607"}))),(0,r.yg)("h3",{id:"create-invoicelink"},"Create InvoiceLink"),(0,r.yg)("p",null,"You can create an invoice and receive a link. That link can be sent to the user by any channel like email, sms, etc. and user can choose to pay with MobilePay. Check ",(0,r.yg)("inlineCode",{parentName:"p"},"InvoiceLink")," flows and how invoice looks in the app ",(0,r.yg)("a",{parentName:"p",href:"visual-examples#invoicelink-flows"},"here"),"."),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("ul",{parentName:"admonition"},(0,r.yg)("li",{parentName:"ul"},"Request does not require a ",(0,r.yg)("inlineCode",{parentName:"li"},"ConsumerAlias"),". It's because InvoiceLink can be paid by any MobilePay user."),(0,r.yg)("li",{parentName:"ul"},'InvoiceLink has an optional "RedirectUrl" property. It can be set when creating single or multiple Invoice links. User will be redirected to provided url after accepting invoice link payment for the future, or paying for it instantly. Redirect will happen with appropriate query parameters, i.e. if provided RedirectUrl value is "',(0,r.yg)("a",{parentName:"li",href:"https://ProvidedUrl.com/%22"},'https://ProvidedUrl.com/"'),' in case of accepted payment user will be redirected to "',(0,r.yg)("a",{parentName:"li",href:"https://ProvidedUrl.com/?status=accepted%22"},'https://ProvidedUrl.com/?status=accepted"'),' and in case of instant payment user will be redirected to "',(0,r.yg)("a",{parentName:"li",href:"https://ProvidedUrl.com/?status=paid%22"},'https://ProvidedUrl.com/?status=paid"'),". This feature supports both webUrls and deeplinks."))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},"POST api/v1/merchants/{merchantId}/invoices/link\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Input")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,r.yg)("th",{parentName:"tr",align:null},"Sub Parameter"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"InvoiceIssuer")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"guid")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," The ID of the invoicing department/branch of the merchant.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ConsumerAlias")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"object")),(0,r.yg)("td",{parentName:"tr",align:null},"Mobile alias of the MobilePay user to be invoiced.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"Alias")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Mobile phone number of the MobilePay user. Should start with a '+' sign and country phone code. E.g. +4512345678 or +35812345678")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"AliasType")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Alias type of the MobilePay user. This will be autofilled in the landing page if user opens the link not on the phone. Only value allowed is ",(0,r.yg)("inlineCode",{parentName:"td"},"Phone"),".")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ConsumerName")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Full name of the MobilePay user.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"TotalAmount")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," The requested amount to be paid. 0.00, decimals separated with a dot.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"TotalVatAmount")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"VAT amount. Decimals separated with a dot.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ConsumerAddressLines")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string[]")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"Address of consumer receiving the invoice.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"DeliveryAddressLines")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string[]")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"Delivery address.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"InvoiceNumber")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"At least one of the fields ",(0,r.yg)("inlineCode",{parentName:"strong"},"InvoiceNumber")," or ",(0,r.yg)("inlineCode",{parentName:"strong"},"PaymentReference")," is required."),"  Invoice number.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"IssueDate")," \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"date")," \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"Issue date of invoice. ISO date format: ",(0,r.yg)("inlineCode",{parentName:"td"},"YYYY-MM-DD"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"DueDate")," \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"date")," \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," Payment due date. Must be between today and 400 days ahead, otherwise the request will be declined. ISO date format: ",(0,r.yg)("inlineCode",{parentName:"td"},"YYYY-MM-DD"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"OrderDate")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"date")),(0,r.yg)("td",{parentName:"tr",align:null},"Order date of invoice. ISO date format: ",(0,r.yg)("inlineCode",{parentName:"td"},"YYYY-MM-DD"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"DeliveryDate")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"date")),(0,r.yg)("td",{parentName:"tr",align:null},"Delivery date of invoice. ISO date format: ",(0,r.yg)("inlineCode",{parentName:"td"},"YYYY-MM-DD"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"Comment")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Additional information to the consumer.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"MerchantContactName")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"Contact name for the individual who issued the invoice.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"MerchantOrderNumber")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"The merchant order number for the invoice used internally by the merchant.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"BuyerOrderNumber")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")," \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},"The buyer order number for the invoice used externally by the merchant.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"PaymentReference")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string(60)*")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"At least one of the fields ",(0,r.yg)("inlineCode",{parentName:"strong"},"InvoiceNumber")," or ",(0,r.yg)("inlineCode",{parentName:"strong"},"PaymentReference")," is required.")," Reference used on the payment to do reconciliation. If not filled, invoice number will be used as reference.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"InvoiceUrl")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"URL to the Invoice PDF provided by merchant.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"RedirectUrl")),(0,r.yg)("td",{parentName:"tr",align:null},"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Redirect url for accepting and paying invoice link.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"InvoiceArticles")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"array")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"At least one is required."))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ArticleNumber")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Article Number, e.g. 123456ABC")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ArticleDescription")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," Article Description.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"VATRate")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"VAT Rate of article.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"TotalVATAmount")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Total VAT amount of article. Decimals separated with a dot.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"TotalPriceIncludingVat")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Total price of article including VAT.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"Unit")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Unit, e.g. Pcs, Coli.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"Quantity")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Quantity of article. Allowed to have more than two decimal digits.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"\xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"PricePerUnit")," \xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Price per unit. Allowed to have more than two decimal digits.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"PriceReduction")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Price reduction.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"PriceDiscount")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Price discount.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"Bonus")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"decimal")),(0,r.yg)("td",{parentName:"tr",align:null},"Bonus of article.")))),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},'Even though "PaymentReference" can contain up to 60 symbols the recommendation is to use up to 30 symbols. For instant transfers "PaymentReference" will be truncated up down to 30 symbols and included in bank statement.')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Example"',title:'"Example"'},'{\n  "InvoiceIssuer": "efd08c19-24cf-4833-a4a4-bfa7bd58fbb2",\n  "ConsumerAlias": {\n    "Alias": "+4577007700",\n    "AliasType": "Phone"\n  },\n  "ConsumerName": "Consumer Name",\n  "TotalAmount": 360,\n  "TotalVATAmount": 72,\n  "ConsumerAddressLines": [\n    "Paradis\xe6blevej 13",\n    "CC-1234 Andeby",\n    "WONDERLAND"\n  ],\n  "DeliveryAddressLines": [\n    "\xd8sterbrogade 120",\n    "CC-1234 Andeby",\n    "WONDERLAND"\n  ],\n  "InvoiceNumber": "301",\n  "IssueDate": "2018-02-12",\n  "DueDate": "2018-03-12",\n  "OrderDate": "2018-02-05",\n  "DeliveryDate": "2018-02-10",\n  "Comment": "Any comment",\n  "MerchantContactName": "Snowboard gear shop",\n  "MerchantOrderNumber": "938",\n  "BuyerOrderNumber": "631",\n  "PaymentReference": "186",\n  "RedirectUrl" : "https://ProvidedUrl.com/"\n  "InvoiceArticles": [\n    {\n      "ArticleNumber": "1-123",\n      "ArticleDescription": "Process Flying V Snowboard",\n      "VATRate": 25,\n      "TotalVATAmount": 72,\n      "TotalPriceIncludingVat": 360,\n      "Unit": "1",\n      "Quantity": 1,\n      "PricePerUnit": 288,\n      "PriceReduction": 0,\n      "PriceDiscount": 0,\n      "Bonus": 5\n    }\n  ]\n}\n')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'HTTP 202 Accepted\n\n{\n    "InvoiceId": "c5d4fde3-81e2-49de-8cfe-8c96f449e367",\n    "Links": [\n        {\n            "Rel": "user-redirect",\n            "Href":"https://api.sandbox.mobilepay.dk/invoice-restapi/api/v1/consumers/me/invoices/invoices/c5d4fde3-81e2-49de-8cfe-8c96f449e367/link"\n        }\n    ]\n}\n')),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"If not accepted, invoice link will expire 30 days after due date. After expiration invoice link data and PDF will be deleted.")),(0,r.yg)("h3",{id:"create-multiple-invoice-links"},"Create multiple invoice links"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},"POST api/v1/merchants/{merchantId}/invoices/link/batch\n")),(0,r.yg)("p",null,"You can create up to 2000 invoice links per single batch."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Input (an array of objects used to create single invoice link)"',title:'"Input',"(an":!0,array:!0,of:!0,objects:!0,used:!0,to:!0,create:!0,single:!0,invoice:!0,'link)"':!0},"[\n  {\n    InvoiceLink input,\n  },\n  {\n    InvoiceLink input,\n  },\n  ...\n]\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'HTTP 202 Accepted\n\n{\n  "Accepted": [\n    {\n      "InvoiceNumber": "<original invoice number sent by the merchant>",\n      "InvoiceId": "66119129-aaf7-4ad0-a5b1-62382932b5c6"\n    },\n    {\n      "InvoiceNumber": "<original invoice number sent by the merchant>",\n      "InvoiceId": "5e3030a3-61ff-4143-a6bd-8457a09bcb0d"\n    },\n    ...\n  ],\n  "Rejected": [\n    {\n      "InvoiceNumber": "<original invoice number sent by the merchant>",\n           "Errors:[\n              {\n              "ErrorText": "<description of error>",\n              "ErrorCode": 10504\n              }\n       ]\n    },\n    ...\n  ]\n}\n')),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"Note: The success response is not much different from the regular, non-batch response, but it doesn't contain the link itself. This is because we are processing batches asynchronously and can't return an immediate result. The ",(0,r.yg)("inlineCode",{parentName:"p"},"InvoiceLink")," URLs will be sent back to you via a ",(0,r.yg)("a",{parentName:"p",href:"#callbacks"},"callback"),", as soon as they're created.")),(0,r.yg)("h2",{id:"cancel-invoice"},"Cancel invoice"),(0,r.yg)("p",null,'You can cancel an invoice which has not yet been paid, rejected and has not expired. If the user has chosen to pay at a later point, then the invoice can still be canceled by the merchant. The customer does not receive a notification. Changes will be visible in the MobilePay Activity List. The pending Invoice Payment will be changed to canceled. On payment date (if the user set the invoice to be paid at later point), MobilePay checks the status of the invoice. If it is canceled , then MobilePay ignores "Pay" command.'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},"PUT api/v1/merchants/{merchantId}/invoices/{invoiceId}/cancel\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},"HTTP 204 No Content\n")),(0,r.yg)("h2",{id:"get-invoice-details"},"Get invoice details"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},"GET api/v1/merchants/{merchantId}/invoices/{invoiceId}\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'HTTP 200 OK\n\n{\n    "InvoiceId": "578a9f10-4e81-4265-bbae-2e8fa33cb83b",\n    "InvoiceNumber": "301",\n    "IssueDate": "2018-07-02",\n    "DueDate": "2018-08-02",\n    "PaymentDate": "2018-08-23",\n    "Comment": "Sample Invoice",\n    "InvoiceArticles": [\n        {\n          "ArticleNumber": "1-123",\n          "ArticleDescription": "Process Flying V Snowboard",\n          "TotalPriceIncludingVat": 360,\n          "Quantity": 1,\n          "PricePerUnit": 288\n        }\n    ],\n    "CurrencyCode": "DKK",\n    "TotalAmount": 360,\n    "InvoiceVatTotals": [\n        {\n            "VatRate": 25,\n            "TotalVatAmount": 72\n        }\n    ],\n    "TotalVatAmount": 72,\n    "TotalAmountExcludingVat": 288,\n    "MerchantId": "f3dd9011-d930-4063-901d-2a47621e5b76",\n    "InvoiceIssuerId": "238fe387-f4a4-40e7-ae8a-4c107da2c0ad",\n    "InvoiceIssuerName": "Invoice Issuer 1",\n    "InvoiceIssuerAddress": "Edwin Rahrs Vej 2-12",\n    "InvoiceIssuerZipcode": "8220",\n    "InvoiceIssuerCity": "Brabrand",\n    "MerchantIsoCountryCode": "DK",\n    "LogoUrl": "https://api.qa.mobilepay.dk/invoice-restapi/api/v1/invoiceissuers/238fe387-f4a4-40e7-ae8a-4c107da2c0ad/logo",\n    "Status": "created",\n    "InvoiceUrl":"https://api.merchant.dk/invoice/578a9f10-4e81-4265-bbae-2e8fa33cb83b/pdf",\n    "PaymentTransactionId": "d1da2195-01c1-4981-bdde-04eb82e362ab",\n    "PaymentReference": "ABC-123"\n}\n')),(0,r.yg)("h2",{id:"get-invoice-status"},"Get invoice status"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},"GET api/v1/merchants/{merchantId}/invoices/{invoiceId}/status\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'HTTP 200 OK\n\n{\n    "InvoiceId" : "5e1210f9-4153-4fc3-83ec-2a8fc4843ea6",\n    "Status" : "created"\n}\n')),(0,r.yg)("p",null,"The table below shows all possible statuses."),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Status"),(0,r.yg)("th",{parentName:"tr",align:null},"Explanation"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"created")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("em",{parentName:"td"},"Merchant created the Invoice")),(0,r.yg)("td",{parentName:"tr",align:null},"Intermediate")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"invalid")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("em",{parentName:"td"},"Invoice validation failed")),(0,r.yg)("td",{parentName:"tr",align:null},"Intermediate")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"accepted")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("em",{parentName:"td"},"User swiped to accept the Invoice")),(0,r.yg)("td",{parentName:"tr",align:null},"Intermediate")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"paid")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("em",{parentName:"td"},"Invoice was paid")),(0,r.yg)("td",{parentName:"tr",align:null},"Final")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"rejected")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("em",{parentName:"td"},"User rejected the Invoice")),(0,r.yg)("td",{parentName:"tr",align:null},"Final")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"expired")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("em",{parentName:"td"},"User did not do do anything until Invoice DueDate + 30 days")),(0,r.yg)("td",{parentName:"tr",align:null},"Final")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"canceled")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("em",{parentName:"td"},"You canceled this invoice.")),(0,r.yg)("td",{parentName:"tr",align:null},"Final")))),(0,r.yg)("p",null,"User accepts the invoice and then pays it immediately or schedules a future payment. The user can change the date, for when the invoice should be paid in the MobilePay app, but nor more than 30 days from the DueDate. For InvoiceLink to be in ",(0,r.yg)("inlineCode",{parentName:"p"},"rejected")," state, the user needs to have first ",(0,r.yg)("inlineCode",{parentName:"p"},"accepted")," the invoice and scheduled for a future payment. Afterwards, it is possible for the user to reject the invoice."),(0,r.yg)("p",null,"An expired status can happen, if the user schedules payment for the future, then MobilePay tries to execute it, but an error happens (for example: card is expired) and the user does not change it and just ignores the payment. In the end that payment will expire."),(0,r.yg)("p",null,"There are two validation steps :  "),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Merchant validation: If all is good, then MobilePay create the invoice, send the callback ",(0,r.yg)("inlineCode",{parentName:"li"},"created")," to the merchant, and push message to the user. The outcome of this validation is that the Invoice is ",(0,r.yg)("inlineCode",{parentName:"li"},"created")," and delivered to the user, or the Invoice failed to be ",(0,r.yg)("inlineCode",{parentName:"li"},"created"),", and is returned to the merchant. If the validation fails, then MobilePay does not create invoice as an entity in MobilePay domain, so in a way it is kinda a final state."),(0,r.yg)("li",{parentName:"ol"},"User validation: Card validation, user status.. etc. The invoice is delivered to the user, when the merchant received callback about ",(0,r.yg)("inlineCode",{parentName:"li"},"created")," invoice. The outcome of this validation is either that the Invoice is ",(0,r.yg)("inlineCode",{parentName:"li"},"paid")," or an error message is returned in the app.")),(0,r.yg)("p",null,"The first state is either ",(0,r.yg)("inlineCode",{parentName:"p"},"created")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"invalid"),". If you received a callback with status ",(0,r.yg)("inlineCode",{parentName:"p"},"created")," then the Invoice has been delivered to the user."),(0,r.yg)("p",null,"Invoice status flow can be visualized by the following diagram."),(0,r.yg)("p",null,(0,r.yg)("a",{target:"_blank",href:t(28209).A},(0,r.yg)("img",{alt:"Invoice flow",src:t(24975).A,width:"705",height:"726"}))),(0,r.yg)("h2",{id:"user-consent-for-invoicedirect"},"User consent for InvoiceDirect"),(0,r.yg)("p",null,"Goal of this functionality is for Invoice Issuer to ask users phone number and consent to receive Invoices directly to MobilePay (InvoiceDirect)."),(0,r.yg)("h3",{id:"attach-a-request-of-consent-to-send-direct-invoices-to-a-particular-invoice"},"Attach a request of consent to send direct invoices to a particular invoice"),(0,r.yg)("p",null,"You can request for consent to send ",(0,r.yg)("inlineCode",{parentName:"p"},"InvoiceDirect")," to a payer with particular invoice. Consent window is displayed to the user after ",(0,r.yg)("inlineCode",{parentName:"p"},"InvoiceLink")," is paid. If user has already granted consent to the invoice issuer, consent window will not be displayed to the user."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},"POST api/v1/directinvoiceconsents\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Input")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"InvoiceId")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"guid")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," The ID of the invoice to which consent request will be attached.")))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Example"',title:'"Example"'},'{\n  "invoiceId": "c0b6e35d-9dfb-47d4-9c9c-1cdfd181e0a4"\n}\n')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'HTTP 201 Created\n\n{\n  "ConsentId": "e518e841-c058-422c-b8d9-d4d71bf671c4",\n  "InvoiceId": "c0b6e35d-9dfb-47d4-9c9c-1cdfd181e0a4",\n  "PhoneNumber": null,\n  "State": "Pending"\n}\n')),(0,r.yg)("h3",{id:"get-all-consents-in-specified-state"},"Get all consents in specified state"),(0,r.yg)("p",null,"You will get full list of users who granted consent for specific invoice issuer. Users phone number will be provided too."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},"GET /api/v1/directinvoiceconsents\n")),(0,r.yg)("h4",{id:"input-query-string-parameters"},"Input (query string parameters)"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"InvoiceIssuerId")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string(guid)")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," The ID of the invoicing department/branch of the merchant.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"State")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Required.")," State of consents to return.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"PagingState")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Optional.")))),(0,r.yg)("p",null,"The table below shows all possible consent statuses."),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Status"),(0,r.yg)("th",{parentName:"tr",align:null},"Explanation"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pending")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("em",{parentName:"td"},"User has not made an action regarding this consent")),(0,r.yg)("td",{parentName:"tr",align:null},"Intermediate")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"granted")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("em",{parentName:"td"},"User has granted direct invoice consent")),(0,r.yg)("td",{parentName:"tr",align:null},"Final")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"denied")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("em",{parentName:"td"},"User has denied direct invoice consent")),(0,r.yg)("td",{parentName:"tr",align:null},"Final")))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Example"',title:'"Example"'},"GET /api/v1/directinvoiceconsents?invoiceIssuerId=6bb6aff1-b88b-455a-a0ad-c4d1fec2e5d7&state=granted\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'HTTP 200 OK\n\n{\n  "GrantedConsents": [\n    {\n      "ConsentId": "e518e841-c058-422c-b8d9-d4d71bf671c4",\n      "InvoiceId": "c0b6e35d-9dfb-47d4-9c9c-1cdfd181e0a4",\n      "PhoneNumber": "+4577007700",\n      "State": "Granted",\n      "GrantedOn": "2021-01-01T12:34:56+00:00"\n    }\n  ],\n  "PagingState": null\n}\n')),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"Note: Endpoint supports only granted status.")),(0,r.yg)("h3",{id:"get-consent-details"},"Get consent details"),(0,r.yg)("p",null,"You can check state of your specific request - if user granted/denied consent with that request or maybe request is still pending."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},"GET /api/v1/directinvoiceconsents/{consentId}\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Example"',title:'"Example"'},"GET /api/v1/directinvoiceconsents/e518e841-c058-422c-b8d9-d4d71bf671c4\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'HTTP 200 OK\n\n{\n  "ConsentId": "e518e841-c058-422c-b8d9-d4d71bf671c4",\n  "InvoiceId": "c0b6e35d-9dfb-47d4-9c9c-1cdfd181e0a4",\n  "PhoneNumber": "+4577007700",\n  "State": "Pending",\n  "GrantedOn": null\n}\n')),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"DirectInvoiceConsent")," flow in application"),(0,r.yg)("p",null,(0,r.yg)("a",{target:"_blank",href:t(59418).A},(0,r.yg)("img",{alt:"Invoice link to invoice direct",src:t(20232).A,width:"5564",height:"2875"}))),(0,r.yg)("p",null,(0,r.yg)("a",{target:"_blank",href:t(54498).A},(0,r.yg)("img",{alt:"Invoice link to invoice direct flow",src:t(65640).A,width:"3395",height:"1830"}))),(0,r.yg)("h2",{id:"error-codes"},"Error Codes"),(0,r.yg)("p",null,"All of the endpoints described above can return an error response of this structure:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Name"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"correlation_id")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"guid")),(0,r.yg)("td",{parentName:"tr",align:null},"Unique id used for logging and debugging purposes.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"error")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Error type. Possible values: ",(0,r.yg)("inlineCode",{parentName:"td"},"DomainError"),", ",(0,r.yg)("inlineCode",{parentName:"td"},"InputError")," & ",(0,r.yg)("inlineCode",{parentName:"td"},"ServerError"),".")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"error_code")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Unique error code.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"error_description")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Human-friendly error description.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"error_context")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"Identifies context in which error has occured.")))),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("inlineCode",{parentName:"p"},"HTTP 400")," , if request input is invalid"),(0,r.yg)("blockquote",{parentName:"li"},(0,r.yg)("pre",{parentName:"blockquote"},(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "correlation_id": "54ccc98b-7d9f-40ea-8c1a-249d57126c39",\n    "error": "InputError",\n    "error_code": null,\n    "error_description": "input.TotalAmount : Invalid input\\r\\n",\n    "error_context": "Invoices"\n}\n')))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("inlineCode",{parentName:"p"},"HTTP 409")," , request is not compatible with a current state"),(0,r.yg)("blockquote",{parentName:"li"},(0,r.yg)("pre",{parentName:"blockquote"},(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "correlation_id": "8c153279-98f1-4e33-b053-3c6e3555adff",\n    "error": "DomainError",\n    "error_code": "10504",\n    "error_description": "Invoice has already been paid",\n    "error_context": "Invoices"\n}\n')))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("inlineCode",{parentName:"p"},"HTTP 500")," , server error"),(0,r.yg)("blockquote",{parentName:"li"},(0,r.yg)("pre",{parentName:"blockquote"},(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "correlation_id": "56db684c-7845-4abf-9f19-5632a625a47b",\n    "error": "ServerError",\n    "error_code": null,\n    "error_description": "The given key was not present in the dictionary.",\n    "error_context": "Invoices"\n}\n'))))),(0,r.yg)("p",null,"When creating ",(0,r.yg)("inlineCode",{parentName:"p"},"InvoiceDirect")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"InvoiceLink")," these values can be returned as ",(0,r.yg)("inlineCode",{parentName:"p"},"error_code")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"error_description"),":"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Error Code"),(0,r.yg)("th",{parentName:"tr",align:null},"Error Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10101"),(0,r.yg)("td",{parentName:"tr",align:null},"MobilePay user not found")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10102"),(0,r.yg)("td",{parentName:"tr",align:null},"MobilePay user not available")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10103"),(0,r.yg)("td",{parentName:"tr",align:null},"MobilePay user not found")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10104"),(0,r.yg)("td",{parentName:"tr",align:null},"Invoice already exists")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10105"),(0,r.yg)("td",{parentName:"tr",align:null},"Technical error - please contact MobilePay developer support  ",(0,r.yg)("a",{parentName:"td",href:"mailto:developer@vippsmobilepay.com"},"developer@vippsmobilepay.com"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10008"),(0,r.yg)("td",{parentName:"tr",align:null},"Total amount must be greater than 0")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10201"),(0,r.yg)("td",{parentName:"tr",align:null},"Total invoice amount is exceeded")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10202"),(0,r.yg)("td",{parentName:"tr",align:null},"Invoice issuer not found")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10203"),(0,r.yg)("td",{parentName:"tr",align:null},"Account validation error")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10204"),(0,r.yg)("td",{parentName:"tr",align:null},"Account validation error")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10205"),(0,r.yg)("td",{parentName:"tr",align:null},"Technical error - please contact MobilePay developer support  ",(0,r.yg)("a",{parentName:"td",href:"mailto:developer@vippsmobilepay.com"},"developer@vippsmobilepay.com"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10301"),(0,r.yg)("td",{parentName:"tr",align:null},"Invoice already exists")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10302"),(0,r.yg)("td",{parentName:"tr",align:null},"Merchant not found")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10303"),(0,r.yg)("td",{parentName:"tr",align:null},"Invoice issuer not found")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10304"),(0,r.yg)("td",{parentName:"tr",align:null},"MobilePay user not found")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10305"),(0,r.yg)("td",{parentName:"tr",align:null},"MobilePay user not found")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10306"),(0,r.yg)("td",{parentName:"tr",align:null},"MobilePay user not found")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10310"),(0,r.yg)("td",{parentName:"tr",align:null},"DueDate must be no later than 400 days from today")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10311"),(0,r.yg)("td",{parentName:"tr",align:null},"DueDate must be today or later")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10312"),(0,r.yg)("td",{parentName:"tr",align:null},"IssueDate must be no later than today")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"10314"),(0,r.yg)("td",{parentName:"tr",align:null},"Your daily limit has been reached. No more than 10 invoices can be created per consumer per merchant per day.")))),(0,r.yg)("h2",{id:"validations"},"Validations"),(0,r.yg)("p",null,"A set of business rules apply for an ",(0,r.yg)("inlineCode",{parentName:"p"},"invoice")," before it gets created. If any of following rules fail, an ",(0,r.yg)("inlineCode",{parentName:"p"},"invoice")," falls to ",(0,r.yg)("inlineCode",{parentName:"p"},"Not Created")," state and a response with ",(0,r.yg)("inlineCode",{parentName:"p"},"error_code")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"error_description")," is returned."),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Field"),(0,r.yg)("th",{parentName:"tr",align:null},"Country"),(0,r.yg)("th",{parentName:"tr",align:null},"Validation"),(0,r.yg)("th",{parentName:"tr",align:null},"Error Code"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"DueDate")),(0,r.yg)("td",{parentName:"tr",align:null},"DK/FI"),(0,r.yg)("td",{parentName:"tr",align:null},"CreatedDate <= DueDate < CreatedDate + 400 days"),(0,r.yg)("td",{parentName:"tr",align:null},"10310/10311"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"DueDate")," must be no more than 400 days in the future.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"IssueDate")),(0,r.yg)("td",{parentName:"tr",align:null},"DK/FI"),(0,r.yg)("td",{parentName:"tr",align:null},"IssueDate <= CreatedDate"),(0,r.yg)("td",{parentName:"tr",align:null},"10312"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"IssueDate")," can not be later than invoice creation date.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"TotalAmount")),(0,r.yg)("td",{parentName:"tr",align:null},"DK"),(0,r.yg)("td",{parentName:"tr",align:null},"TotalAmount <= 15000 DKK"),(0,r.yg)("td",{parentName:"tr",align:null},"10201"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"TotalAmount")," is limited to 300000 DKK.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},"FI"),(0,r.yg)("td",{parentName:"tr",align:null},"TotalAmount <= 2000 EUR"),(0,r.yg)("td",{parentName:"tr",align:null},"10201"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"TotalAmount")," is limited to 2000 EUR.")))),(0,r.yg)("p",null,"If all of the fields in the request are exactly the same as some existing invoice's fields, the duplication validation fails and the invoice cannot be created."),(0,r.yg)("h4",{id:"limits"},"Limits"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Consumer daily invoice count <= 10. No more than 10 invoices can be created per consumer from single merchant.")))}y.isMDXComponent=!0},60575:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/files/invoice_direct_high_level_flow_diagram-76004738f4b4c0d41cab62d812135e77.png"},28209:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/files/invoice_flow-b1aa3fb71f8422e6d34167536e15a12b.png"},14832:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/files/invoice_link_high_level_flow_diagram-05ed8bc37ec2a4a3256b10bdcf83b1c9.png"},59418:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/files/invoice_link_to_invoice_direct-c514e963abaf9e86354040dd0c9eebcb.jpeg"},54498:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/files/invoice_link_to_invoice_direct_flow-33ad9e95028ea9f13acc9bd9d558a178.png"},58669:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/invoice_direct_high_level_flow_diagram-76004738f4b4c0d41cab62d812135e77.png"},24975:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/invoice_flow-b1aa3fb71f8422e6d34167536e15a12b.png"},31790:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/invoice_link_high_level_flow_diagram-05ed8bc37ec2a4a3256b10bdcf83b1c9.png"},20232:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/invoice_link_to_invoice_direct-c514e963abaf9e86354040dd0c9eebcb.jpeg"},65640:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/invoice_link_to_invoice_direct_flow-33ad9e95028ea9f13acc9bd9d558a178.png"}}]);