"use strict";(self.webpackChunkmobile_pay_merchant_payments_documentation=self.webpackChunkmobile_pay_merchant_payments_documentation||[]).push([[5401],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),d=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(p.Provider,{value:t},e.children)},s="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),s=d(n),u=i,h=s["".concat(p,".").concat(u)]||s[u]||m[u]||o;return n?a.createElement(h,r(r({ref:t},c),{},{components:n})):a.createElement(h,r({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[s]="string"==typeof e?e:i,r[1]=l;for(var d=2;d<o;d++)r[d]=n[d];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},89201:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>s,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var a=n(87462),i=(n(67294),n(3905));const o={sidebar_position:3,pagination_label:"verification"},r="Verification",l={unversionedId:"online/development-guide/verification",id:"online/development-guide/verification",title:"Verification",description:"To ensure that your system is ready for production you need to have performed the basic API calls as described below. Once we have verified that the steps has been completed successfully, you are ready to start testing in hidden production.",source:"@site/docs/online/development-guide/verification.md",sourceDirName:"online/development-guide",slug:"/online/development-guide/verification",permalink:"/docs/online/development-guide/verification",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,pagination_label:"verification"},sidebar:"docsSidebar",previous:{title:"Test",permalink:"/docs/online/development-guide/test"},next:{title:"Production",permalink:"/docs/online/development-guide/production"}},p={},d=[{value:"From sandbox to hidden production",id:"from-sandbox-to-hidden-production",level:2},{value:"From hidden production to live",id:"from-hidden-production-to-live",level:2},{value:"Slim certification",id:"slim-certification",level:3},{value:"Slim certification - test webshop",id:"slim-certification---test-webshop",level:4},{value:"Merchant documentation",id:"merchant-documentation",level:3},{value:"Production",id:"production",level:2}],c={toc:d};function s(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"verification"},"Verification"),(0,i.kt)("p",null,"To ensure that your system is ready for production you need to have performed the basic API calls as described below. Once we have verified that the steps has been completed successfully, you are ready to start testing in hidden production."),(0,i.kt)("p",null,"When your test in hidden production is done, we will verify this and you will be able to go live and offer MobilePay Online to your clients."),(0,i.kt)("h2",{id:"from-sandbox-to-hidden-production"},"From sandbox to hidden production"),(0,i.kt)("p",null,"Before moving to hidden production you must have performed below actions. All actions are mandatory unless explicitly stated otherwise. Please send an email to ",(0,i.kt)("a",{parentName:"p",href:"mailto:developer@mobilepay.dk"},"developer@mobilepay.dk")," with data for each point or use this ",(0,i.kt)("a",{parentName:"p",href:"mailto:developer@mobilepay.dk?subject=Sandbox%20verification%20-%20Online&body=Hi%20MobilePay%2C%0D%0A%0D%0AMerchant%0D%0A1.%20Create%20merchant%20-%20externalId%3A%0D%0A2.%20Delete%20merchant%20-%20merchantId%3A%0D%0A%0D%0APayment%0D%0A3.%20Initiate%20payment%20-%20pspReferenceId%3A%0D%0A4.%20Update%20authorization%20attempt%20with%20succeeded%3Atrue%20-%20paymentId%3A%0D%0A5.%20Update%20authorization%20attempt%20with%20succeeded%22%3Afalse%20-%20paymentId%3A%0D%0A6.%20Create%20capture%20-%20paymentId%3A%0D%0A7.%20Create%20cancel%20-%20paymentId%3A%0D%0A8.%20Create%20refund%20-%20paymentId%3A%0D%0A%0D%0AApp%20switch%0D%0A9.%20We%20_have_%2F_have%20not_%20tested%20a%20switch%20between%20MobilePay%20and%20merchant%20app.%20Reason%3A%0D%0A%0D%0ACallbacks%0D%0A10.%20Received%20card%20data%20callback%20-%20paymentId%3A%0D%0A11.%20Received%20failed%20payment%20callback%20(not%20required)%20-%20paymentId%3A%0D%0A%0D%0ASCA%20implementation%0D%0A12.%20Accept%20payment%20with%20Tokenized%20Visa%20or%20Mastercard%20test%20card%20-%20paymentId%3A%0D%0A13.%20We%20_have_%2F_have%20not_%20implemented%20DA%20for%20Dankort.%20Reason%3A%0D%0A14.%203DS%20flow%20-%20paymentId%3A%0D%0A"},"template"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Merchant")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Create merchant: ",(0,i.kt)("inlineCode",{parentName:"li"},"POST /api/v1/merchants")," - externalId"),(0,i.kt)("li",{parentName:"ol"},"Delete merchant: ",(0,i.kt)("inlineCode",{parentName:"li"},"DELETE /api/v1/merchants/{merchantId}")," - merchantId")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Payment")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Initiate payment: ",(0,i.kt)("inlineCode",{parentName:"li"},"POST /api/v1/payments")," - pspReferenceId"),(0,i.kt)("li",{parentName:"ol"},"Update authorization attempt with ",(0,i.kt)("inlineCode",{parentName:"li"},"succeeded:true"),":  ",(0,i.kt)("inlineCode",{parentName:"li"},"PATCH /payments/{paymentId}/authorizationattempts/{authorizationAttemptId}")," - paymentId"),(0,i.kt)("li",{parentName:"ol"},"Update authorization attempt with ",(0,i.kt)("inlineCode",{parentName:"li"},'succeeded":false'),": ",(0,i.kt)("inlineCode",{parentName:"li"},"PATCH /payments/{paymentId}/authorizationattempts/{authorizationAttemptId}")," - paymentId"),(0,i.kt)("li",{parentName:"ol"},"Create capture: ",(0,i.kt)("inlineCode",{parentName:"li"},"POST /api/v1/payments/{paymentId}/captures")," - paymentId"),(0,i.kt)("li",{parentName:"ol"},"Create cancel: ",(0,i.kt)("inlineCode",{parentName:"li"},"POST /api/v1/payments/{paymentId}/cancels")," - paymentId"),(0,i.kt)("li",{parentName:"ol"},"Create refund: ",(0,i.kt)("inlineCode",{parentName:"li"},"POST /api/v1/payments/{paymentId}/refunds")," - paymentId")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"App switch")),(0,i.kt)("ol",{start:9},(0,i.kt)("li",{parentName:"ol"},"If you offer your merchants to use apps you must test a switch between MobilePay app and a merchant app.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Callbacks")),(0,i.kt)("ol",{start:10},(0,i.kt)("li",{parentName:"ol"},"Received card data callback - paymentId"),(0,i.kt)("li",{parentName:"ol"},"Received failed payment callback (not required) - paymentId")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"SCA implementation")),(0,i.kt)("ol",{start:12},(0,i.kt)("li",{parentName:"ol"},"Accept payment with Tokenized Visa or Mastercard test card in the test app - paymentId"),(0,i.kt)("li",{parentName:"ol"},"Implemented delegated authentication for Dankort. If you have not implemented this please explain why."),(0,i.kt)("li",{parentName:"ol"},'Test 3DS flow with "succeeded":false "reasonCode":1008: ',(0,i.kt)("inlineCode",{parentName:"li"},"PATCH /payments/{paymentId}/authorizationattempts/{authorizationAttemptId}")," - paymentId")),(0,i.kt)("p",null,"We will verify the above requests and move you to production. If you have not yet supplied us with a publickKey for production, please request a secure link for uploading it."),(0,i.kt)("admonition",{title:"PLEASE NOTE",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Registration of publicKey in production takes longer than in sandbox. So please provide us with the production key well in advance.")),(0,i.kt)("h2",{id:"from-hidden-production-to-live"},"From hidden production to live"),(0,i.kt)("h3",{id:"slim-certification"},"Slim certification"),(0,i.kt)("p",null,"Before you can offer your MobilePay Online solution for your clients we will perform a 'slim certifcation' and supply merchant documenation. The 'slim certification' is performed in production and is required before you can go live."),(0,i.kt)("h4",{id:"slim-certification---test-webshop"},"Slim certification - test webshop"),(0,i.kt)("p",null,"In order to complete the slim certification you must supply a test web shop in production. The test web shop should contain items for around 1 DKK for which we can test various flows. We will test the following:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Dual device and single device:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Happy day"),(0,i.kt)("li",{parentName:"ul"},"Payment expire"),(0,i.kt)("li",{parentName:"ul"},"User reject"))),(0,i.kt)("li",{parentName:"ol"},"Let request expire and see succesfull failedPaymentCallback (only if failedPaymenCallback is utilized)"),(0,i.kt)("li",{parentName:"ol"},"Accept payment with a not working card (e.g. no funds) and check that a PATCH on authorisationAttempt is made with succeed: false with a meaningfull responseCode"),(0,i.kt)("li",{parentName:"ol"},"We will ask you to capture and afterwards refund one of the test payments (the rest of the payments should be cancelled or expire)"),(0,i.kt)("li",{parentName:"ol"},"Confirm implementation of 3DS, VTS and Dankort SCA implementation"),(0,i.kt)("li",{parentName:"ol"},"Go through merchant documentation. Please see below for details.")),(0,i.kt)("h3",{id:"merchant-documentation"},"Merchant documentation"),(0,i.kt)("p",null,"The documentation towards your customers, the merchants, must - at least - tell about"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Merchant registration*: How to setup MobilePay Online including as minimum information about:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Name displayed in the app to the end user"),(0,i.kt)("li",{parentName:"ul"},"LogoUrl linking to an image file displaying the merchant logo in the app to the end user",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"250x250 pixels"),(0,i.kt)("li",{parentName:"ul"},"Hosted using a secure HTTPS connection"),(0,i.kt)("li",{parentName:"ul"},"PNG or JPG"),(0,i.kt)("li",{parentName:"ul"},"Set content-type in the HTTP header using ",(0,i.kt)("em",{parentName:"li"},"MIME")," types e.g. ",(0,i.kt)("em",{parentName:"li"},"image/png")," or ",(0,i.kt)("em",{parentName:"li"},"image/jpeg")))))),(0,i.kt)("li",{parentName:"ul"},"Appswitch feature: How the solution is used from a native app (API enabled)"),(0,i.kt)("li",{parentName:"ul"},"Checkout feature: How to setup and use Checkout"),(0,i.kt)("li",{parentName:"ul"},"Common pitfalls of 'context switch' on client side",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Scenario A: ",(0,i.kt)("em",{parentName:"li"},"\u2018browser A\u2019 -> MP App -> \u2018browser B\u2019"),".\nThe Merchant return page should not rely on any sort of session object (e.g. a cookie), to recognise the returning customer. It should solely rely on data given in the redirect (redirectFromMobilePayUrl)."),(0,i.kt)("li",{parentName:"ul"},"Scenario B.: ",(0,i.kt)("em",{parentName:"li"},"\u2018browser' -> MP App\u2019"),".\nThe Merchant should not rely on the customer returning client side. Rather they should process the purchase when the PSP\xb4s server-to-server callback is received, or after getting confirmation on a status endpoint.")))),(0,i.kt)("h2",{id:"production"},"Production"),(0,i.kt)("p",null,"We will inform you once the certification is completed, and you will be able to go live with your implementation."),(0,i.kt)("p",null,"Ensure to check step 4. Production for guidance and recommendation on production setup as well as mandatory implementation."))}s.isMDXComponent=!0}}]);