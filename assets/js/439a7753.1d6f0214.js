"use strict";(self.webpackChunkmobile_pay_merchant_payments_documentation=self.webpackChunkmobile_pay_merchant_payments_documentation||[]).push([[3832],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>b});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),u=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(a),c=r,b=d["".concat(s,".").concat(c)]||d[c]||m[c]||l;return a?n.createElement(b,o(o({ref:t},p),{},{components:a})):n.createElement(b,o({ref:t},p))}));function b(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:r,o[1]=i;for(var u=2;u<l;u++)o[u]=a[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},85162:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(67294),r=a(86010);const l={tabItem:"tabItem_Ymn6"};function o(e){let{children:t,hidden:a,className:o}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(l.tabItem,o),hidden:a},t)}},74866:(e,t,a)=>{a.d(t,{Z:()=>N});var n=a(87462),r=a(67294),l=a(86010),o=a(12466),i=a(16550),s=a(91980),u=a(67392),p=a(50012);function d(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:r}}=e;return{value:t,label:a,attributes:n,default:r}}))}function m(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=t??d(a);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function c(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function b(e){let{queryString:t=!1,groupId:a}=e;const n=(0,i.k6)(),l=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,s._X)(l),(0,r.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(n.location.search);t.set(l,e),n.replace({...n.location,search:t.toString()})}),[l,n])]}function k(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,l=m(e),[o,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!c({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:l}))),[s,u]=b({queryString:a,groupId:n}),[d,k]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,l]=(0,p.Nk)(a);return[n,(0,r.useCallback)((e=>{a&&l.set(e)}),[a,l])]}({groupId:n}),h=(()=>{const e=s??d;return c({value:e,tabValues:l})?e:null})();(0,r.useLayoutEffect)((()=>{h&&i(h)}),[h]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!c({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),k(e)}),[u,k,l]),tabValues:l}}var h=a(72389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:t,block:a,selectedValue:i,selectValue:s,tabValues:u}=e;const p=[],{blockElementScrollPositionUntilNextRender:d}=(0,o.o5)(),m=e=>{const t=e.currentTarget,a=p.indexOf(t),n=u[a].value;n!==i&&(d(t),s(n))},c=e=>{let t=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":{const a=p.indexOf(e.currentTarget)+1;t=p[a]??p[0];break}case"ArrowLeft":{const a=p.indexOf(e.currentTarget)-1;t=p[a]??p[p.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":a},t)},u.map((e=>{let{value:t,label:a,attributes:o}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>p.push(e),onKeyDown:c,onClick:m},o,{className:(0,l.Z)("tabs__item",f.tabItem,o?.className,{"tabs__item--active":i===t})}),a??t)})))}function g(e){let{lazy:t,children:a,selectedValue:n}=e;const l=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},l.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function v(e){const t=k(e);return r.createElement("div",{className:(0,l.Z)("tabs-container",f.tabList)},r.createElement(y,(0,n.Z)({},e,t)),r.createElement(g,(0,n.Z)({},e,t)))}function N(e){const t=(0,h.Z)();return r.createElement(v,(0,n.Z)({key:String(t)},e))}},3733:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>k,frontMatter:()=>s,metadata:()=>p,toc:()=>m});var n=a(87462),r=(a(67294),a(3905)),l=a(74866),o=a(85162),i=a(27133);const s={sidebar_position:2},u="Test",p={unversionedId:"pos/development-guide/test",id:"pos/development-guide/test",title:"Test",description:"In this section, you can find information on testing, and our test ressources. To ensure a good user experience, we recommend you to test your solution thoroughly before certification and launch.",source:"@site/docs/pos/development-guide/test.mdx",sourceDirName:"pos/development-guide",slug:"/pos/development-guide/test",permalink:"/docs/pos/development-guide/test",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Getting started",permalink:"/docs/pos/development-guide/getting-started"},next:{title:"Self-certification",permalink:"/docs/pos/development-guide/verification"}},d={},m=[{value:"MobilePay PoS Sandbox Environment",id:"mobilepay-pos-sandbox-environment",level:2},{value:"Test app",id:"test-app",level:2},{value:"User simulation API",id:"user-simulation-api",level:2},{value:"How to use the User simulation API",id:"how-to-use-the-user-simulation-api",level:3},{value:"Test user",id:"test-user",level:2}],c={toc:m},b="wrapper";function k(e){let{components:t,...a}=e;return(0,r.kt)(b,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"test"},"Test"),(0,r.kt)("p",null,"In this section, you can find information on testing, and our test ressources. To ensure a good user experience, we recommend you to test your solution thoroughly before certification and launch."),(0,r.kt)("h2",{id:"mobilepay-pos-sandbox-environment"},"MobilePay PoS Sandbox Environment"),(0,r.kt)("p",null,"We have provisioned a sandbox environment for integration purposes The environment is the same bits and bytes as the production environment, with a few exceptions:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"No actual payments and reservations are made. The payment backend have been mocked, and the transactions are kept in sandbox storage. This means that transactions won\u2019t be visible in the test app activity list, and no app notifications are sent."),(0,r.kt)("li",{parentName:"ul"},"Loyalty card system is also mocked, and static loyalty card information is returned when applicable")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Audience"),": The test environment is meant for PoS integrators to be able to test integrations against the MobilePay PoS platform. It is an isolated environment that behaves as in live production, thus enabling PoS integrators to fully test the PoS API and business logic."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Background"),": The environment is strictly meant for carrying out tests and development tasks towards certification."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"The API"),": The Merchant API in the sandprod environment is identical to the live production API."),(0,r.kt)("p",null,"To complete a payment flow in the sandprod environment you will need to make user actions. To do so you have to options:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"User simulation API: The API mimick the actions of a user and allows you to check in on a beaconId, accept and cancel a payment."),(0,r.kt)("li",{parentName:"ul"},"Test app: This version of the MobilePay app is similar to the live version, but only supports payments in the sandprod environment.")),(0,r.kt)("h2",{id:"test-app"},"Test app"),(0,r.kt)(i.ZP,{mdxType:"TestApp"}),(0,r.kt)("h2",{id:"user-simulation-api"},"User simulation API"),(0,r.kt)("p",null,"To complete a payment flow in the sandprod environment you will need to make user actions. We have made an API that can mimick the actions of a user. You find it in the ",(0,r.kt)("a",{parentName:"p",href:"/api/pos#tag/User-Simulation"},"API documentation"),"."),(0,r.kt)("p",null,"With the API you can do the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Perform a check in on a beaconId"),(0,r.kt)("li",{parentName:"ul"},"Accept a payment"),(0,r.kt)("li",{parentName:"ul"},"Cancel a payment")),(0,r.kt)("p",null,"You must subscribe to the User simulation API, before you can use it. When calling the API, you must supply:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Input"),(0,r.kt)("th",{parentName:"tr",align:null},"Source"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"BeaconId")),(0,r.kt)("td",{parentName:"tr",align:null},"Created through the PoS API")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Phonenumber")),(0,r.kt)("td",{parentName:"tr",align:null},"See below list of test users")))),(0,r.kt)("h3",{id:"how-to-use-the-user-simulation-api"},"How to use the User simulation API"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Perform a check in on a beaconId: ",(0,r.kt)("inlineCode",{parentName:"li"},"POST /app/usersimulation/checkin")),(0,r.kt)("li",{parentName:"ol"},"Initiate a payment through the PoS API: ",(0,r.kt)("inlineCode",{parentName:"li"},"POST /api/v10/payments"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Accept the payment: ",(0,r.kt)("inlineCode",{parentName:"li"},"POST /app/usersimulation/acceptpayment")),(0,r.kt)("li",{parentName:"ul"},"Cancel payment: ",(0,r.kt)("inlineCode",{parentName:"li"},"POST /app/usersimulation/cancelpaymentbyuser"))))),(0,r.kt)("p",null,"To perform a check in and payment accept, you must supply a phone number for a test user. Below you find a list of test users with different features."),(0,r.kt)("h2",{id:"test-user"},"Test user"),(0,r.kt)("p",null,"When using the test app or user simulation API, you must use a test user. Below you can find a list of user ids for Denmark and Finland. If there is an issue with a test user please contact us. These test users are only to be used for for MobilePay PoS test. If you need a test user for a different product please visit the relevant product pages for more information or contact us at ",(0,r.kt)("a",{parentName:"p",href:"mailto:developer@mobilepay.dk"},"developer@mobilepay.dk")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Below users are shared amongst all PoS integrators and receipts for all test transactions are visible in the activity list. Please note that the PoS name (defined in CreatePosRequest) is visible on the receipt. Therefore do not include any sensitive or confidential data in the PoS name.")),(0,r.kt)(l.Z,{defaultValue:"dk",values:[{label:"DK test user",value:"dk"},{label:"FI test users",value:"fi"}],mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"dk",mdxType:"TabItem"},(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Phone number"),(0,r.kt)("th",{parentName:"tr",align:null},"PaymentSource"),(0,r.kt)("th",{parentName:"tr",align:null},"Feature"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"+45 20031801"),(0,r.kt)("td",{parentName:"tr",align:null},"Credit"),(0,r.kt)("td",{parentName:"tr",align:null},"Credit card")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"+45 20031802"),(0,r.kt)("td",{parentName:"tr",align:null},"Debit"),(0,r.kt)("td",{parentName:"tr",align:null},"Debit card")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"+45 20031803"),(0,r.kt)("td",{parentName:"tr",align:null},"Credit"),(0,r.kt)("td",{parentName:"tr",align:null},"Storebox")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"+45 20031804"),(0,r.kt)("td",{parentName:"tr",align:null},"Credit"),(0,r.kt)("td",{parentName:"tr",align:null},"Loyalty")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"+45 20031805"),(0,r.kt)("td",{parentName:"tr",align:null},"Credit"),(0,r.kt)("td",{parentName:"tr",align:null},"Partial capture"))))),(0,r.kt)(o.Z,{value:"fi",mdxType:"TabItem"},(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Phone number"),(0,r.kt)("th",{parentName:"tr",align:null},"PaymentSource"),(0,r.kt)("th",{parentName:"tr",align:null},"Feature"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"+358 200318001"),(0,r.kt)("td",{parentName:"tr",align:null},"Credit"),(0,r.kt)("td",{parentName:"tr",align:null},"Credit card")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"+358 200318002"),(0,r.kt)("td",{parentName:"tr",align:null},"Debit"),(0,r.kt)("td",{parentName:"tr",align:null},"Debit card")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"+358 200318003"),(0,r.kt)("td",{parentName:"tr",align:null},"Credit"),(0,r.kt)("td",{parentName:"tr",align:null},"Storebox")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"+358 200318004"),(0,r.kt)("td",{parentName:"tr",align:null},"Credit"),(0,r.kt)("td",{parentName:"tr",align:null},"Loyalty")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"+358 200318005"),(0,r.kt)("td",{parentName:"tr",align:null},"Credit"),(0,r.kt)("td",{parentName:"tr",align:null},"Partial capture")))))))}k.isMDXComponent=!0},27133:(e,t,a)=>{a.d(t,{ZP:()=>u});var n=a(87462),r=(a(67294),a(3905)),l=a(74866),o=a(85162);const i={toc:[{value:"Log on to test app",id:"log-on-to-test-app",level:3}]},s="wrapper";function u(e){let{components:t,...a}=e;return(0,r.kt)(s,(0,n.Z)({},i,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(l.Z,{defaultValue:"android",values:[{label:"Android",value:"android"},{label:"iOS",value:"ios"}],mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"android",mdxType:"TabItem"},(0,r.kt)("p",null,"To install, you will have to allow installation from \u201cunknown sources\u201d."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://install.appcenter.ms/orgs/mobilepay-apps/apps/mobilepay-dk-android-sandbox/distribution_groups/external"},"MobilePay DK Sandbox app")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://install.appcenter.ms/orgs/mobilepay-apps/apps/mobilepay-fi-android-sandbox/distribution_groups/external"},"MobilePay FI Sandbox app"))),(0,r.kt)(o.Z,{value:"ios",mdxType:"TabItem"},(0,r.kt)("p",null,"iOS MobilePay Sandbox app is available through Apple TestFlight. Therefore Apple TestFlight must be installed to the device.  Using below link on a mobile device will initiate download of and registration to TestFlight. No prior registration or invitation needed.\nPlease open below link on your mobile device:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://testflight.apple.com/join/xarydQZ4"},"MobilePay DK Sandbox app")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://testflight.apple.com/join/hP92EaBR"},"MobilePay FI Sandbox app")))),(0,r.kt)("h3",{id:"log-on-to-test-app"},"Log on to test app"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Install and open the MobilePay DK/FI Vendor app"),(0,r.kt)("li",{parentName:"ol"},'Select "Log p\xe5 (Eksisterende bruger)" / "Kirjaudu sovellukseen / "Log on (existing user)"'),(0,r.kt)("li",{parentName:"ol"},"Enter a valid Sandbox phone number (see below section about test users)"),(0,r.kt)("li",{parentName:"ol"},"Enter SSN (Only relevant on fresh install)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Denmark CPR no.: 000000-0000"),(0,r.kt)("li",{parentName:"ul"},"Finland henkil\xf6tunnus: 00000000000"))),(0,r.kt)("li",{parentName:"ol"},"Enter PIN: \u201c1234\u201d"),(0,r.kt)("li",{parentName:"ol"},'Enter activation code: \u201c123456\u201d and press "OK" / "Jatka"')))}u.isMDXComponent=!0}}]);