"use strict";(self.webpackChunkmobile_pay_merchant_payments_documentation=self.webpackChunkmobile_pay_merchant_payments_documentation||[]).push([[7890],{15680:(e,t,n)=>{n.d(t,{xA:()=>d,yg:()=>y});var a=n(96540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},g="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),g=p(n),m=r,y=g["".concat(s,".").concat(m)]||g[m]||u[m]||i;return n?a.createElement(y,l(l({ref:t},d),{},{components:n})):a.createElement(y,l({ref:t},d))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[g]="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},78743:(e,t,n)=>{n.d(t,{Ay:()=>o});var a=n(58168),r=(n(96540),n(15680));const i={toc:[]},l="wrapper";function o(e){let{components:t,...n}=e;return(0,r.yg)(l,(0,a.A)({},i,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"The new platform is already launched in Finland and we are excitied to launch it in Denmark on ",(0,r.yg)("strong",{parentName:"p"},"March 12th"),". We have gained great experience through the Finnish launch and want to highlight three main topics we suggest you to be aware of:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Ensure that  you have ",(0,r.yg)("em",{parentName:"li"},"whitelisted our ",(0,r.yg)("a",{parentName:"em",href:"https://developer.vippsmobilepay.com/docs/developer-resources/servers/"},"new servers"))," to ensure that requests and callbacks are successful.   "),(0,r.yg)("li",{parentName:"ul"},"Once the new platform is launched ",(0,r.yg)("em",{parentName:"li"},"all users must upgrade their app"),". This is a force upgrade of the app and must be completed in order to access MobilePay. This means that a lot of users will update the app on the 12th and the following days causing their user journy to be prolounged. This may result in expired payments while the user updates the app. "),(0,r.yg)("li",{parentName:"ul"},"Operational issues will not be sent to the old operational mail lists but instead supplied through our ",(0,r.yg)("em",{parentName:"li"},"new ",(0,r.yg)("a",{parentName:"em",href:"https://developer.vippsmobilepay.com/docs/developer-resources/status-pages/"},"operational status pages")),". Ensure to sign up for the updates through the new pages.")))}o.isMDXComponent=!0},72193:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>s,toc:()=>d});var a=n(58168),r=(n(96540),n(15680)),i=n(78743);const l={sidebar_position:13},o="\ud83d\udc99\ud83e\udde1 Preparation for the facade period",s={unversionedId:"subscriptions/transition-to-one-platform",id:"subscriptions/transition-to-one-platform",title:"\ud83d\udc99\ud83e\udde1 Preparation for the facade period",description:"Your existing Subscriptions APIs will continue to work until the end of 2024 through facade we build.",source:"@site/docs/subscriptions/transition-to-one-platform.md",sourceDirName:"subscriptions",slug:"/subscriptions/transition-to-one-platform",permalink:"/docs/subscriptions/transition-to-one-platform",draft:!1,tags:[],version:"current",sidebarPosition:13,frontMatter:{sidebar_position:13},sidebar:"docsSidebar",previous:{title:"API principles",permalink:"/docs/subscriptions/api-principles"},next:{title:"Migration info \ud83d\udd17",permalink:"/docs/subscriptions/resources"}},p={},d=[{value:"<strong>1. Agreements</strong>",id:"1-agreements",level:2},{value:"1.1 Agreement request expiration period",id:"11-agreement-request-expiration-period",level:3},{value:"1.2 Agreement deletion validations",id:"12-agreement-deletion-validations",level:3},{value:"1.3 Agreements without amount",id:"13-agreements-without-amount",level:3},{value:"1.4 Agreement cancellation by merchant",id:"14-agreement-cancellation-by-merchant",level:3},{value:"<strong>2. Recurring payments</strong>",id:"2-recurring-payments",level:2},{value:"2.1 Payments visible 8 days in advance",id:"21-payments-visible-8-days-in-advance",level:3},{value:"2.2 Update existing payment",id:"22-update-existing-payment",level:3},{value:"2.3 Push message for the user",id:"23-push-message-for-the-user",level:3},{value:"2.4 Invalid recurring payments",id:"24-invalid-recurring-payments",level:3},{value:"<strong>3. One-off payments</strong>",id:"3-one-off-payments",level:2},{value:"3.1 One-off payments types",id:"31-one-off-payments-types",level:3},{value:"3.2 One-off expiration period",id:"32-one-off-expiration-period",level:3},{value:"3.3 Description of a one-off with a new agreement",id:"33-description-of-a-one-off-with-a-new-agreement",level:3},{value:"<strong>4. Refunds</strong>",id:"4-refunds",level:2},{value:"4.1 Refund up to 365 days",id:"41-refund-up-to-365-days",level:3},{value:"4.2 Refunds description",id:"42-refunds-description",level:3},{value:"4.3 Refund responses",id:"43-refund-responses",level:3},{value:"<strong>5. App \ud83d\udcf1</strong>",id:"5-app-",level:2},{value:"5.1 Merchant visibility",id:"51-merchant-visibility",level:3},{value:"5.2 Merchant information on agreements",id:"52-merchant-information-on-agreements",level:3},{value:"<strong>6. Payment attachments</strong>",id:"6-payment-attachments",level:2},{value:"6.1 PDF generation",id:"61-pdf-generation",level:3},{value:"6.2 External URL",id:"62-external-url",level:3},{value:"6.3 Attachement details",id:"63-attachement-details",level:3},{value:"<strong>7. Onboarding</strong>",id:"7-onboarding",level:2},{value:"7.1 Authorisation",id:"71-authorisation",level:3},{value:"<strong>8. Settlements</strong>",id:"8-settlements",level:2},{value:"8.1 From the Nordic Wallet Launch all sales units (payment points) will be switched to daily settlements",id:"81-from-the-nordic-wallet-launch-all-sales-units-payment-points-will-be-switched-to-daily-settlements",level:3},{value:"<s>8.2 Settlement time changes</s>",id:"82-settlement-time-changes",level:3},{value:"<s>8.3 Gross Settlements</s>",id:"83-gross-settlements",level:3},{value:"<strong>9. Other</strong>",id:"9-other",level:2},{value:"9.1 From the Nordic Wallet Launch callbacks will be sent from new DNS address",id:"91-from-the-nordic-wallet-launch-callbacks-will-be-sent-from-new-dns-address",level:3},{value:"9.2 Callback changes for recurring and one-off payments",id:"92-callback-changes-for-recurring-and-one-off-payments",level:3},{value:"9.3 Callbacks for non reintegrated merchants after NWL",id:"93-callbacks-for-non-reintegrated-merchants-after-nwl",level:3},{value:"9.4 Callbacks for reintegrated merchants",id:"94-callbacks-for-reintegrated-merchants",level:3},{value:"9.5 Error messages",id:"95-error-messages",level:3},{value:"9.6 From the Nordic Wallet Launch Merchant&#39;s server must be TLS 1.2",id:"96-from-the-nordic-wallet-launch-merchants-server-must-be-tls-12",level:3},{value:"<strong>10. Test</strong>",id:"10-test",level:2},{value:"10.1 Test credentials",id:"101-test-credentials",level:3},{value:"10.2 Authentication",id:"102-authentication",level:3},{value:"10.3 Headers and endpoints",id:"103-headers-and-endpoints",level:3},{value:"10.4 Initiate test",id:"104-initiate-test",level:3},{value:"<strong>FAQ</strong>",id:"faq",level:2},{value:"<strong>1. Do I need to reintegrate now to the new solution, APIs?</strong>",id:"1-do-i-need-to-reintegrate-now-to-the-new-solution-apis",level:3},{value:"<strong>2. How will the migration of data work?</strong>",id:"2-how-will-the-migration-of-data-work",level:3},{value:"<strong>3. When can I integrate to the Recurring API?</strong>",id:"3-when-can-i-integrate-to-the-recurring-api",level:3},{value:"<strong>4. Does the Recurring API have callbacks?</strong>",id:"4-does-the-recurring-api-have-callbacks",level:3},{value:"<strong>5. Will I be able to test the new Recurring API?</strong>",id:"5-will-i-be-able-to-test-the-new-recurring-api",level:3},{value:"<strong>6. How will I find data about my payments?</strong>",id:"6-how-will-i-find-data-about-my-payments",level:3},{value:"<strong>7. I am using Transaction Reporting API, what should I do?</strong>",id:"7-i-am-using-transaction-reporting-api-what-should-i-do",level:3},{value:"<strong>8. Will users get a new app?</strong>",id:"8-will-users-get-a-new-app",level:3},{value:"<strong>9. What cool features are there ahead?</strong>",id:"9-what-cool-features-are-there-ahead",level:3},{value:"<strong>Developer Support</strong>",id:"developer-support",level:2},{value:"<strong>Changelog</strong>",id:"changelog",level:2}],g={toc:d},u="wrapper";function m(e){let{components:t,...l}=e;return(0,r.yg)(u,(0,a.A)({},g,l,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"-preparation-for-the-facade-period"},"\ud83d\udc99\ud83e\udde1 Preparation for the facade period"),(0,r.yg)("p",null," Your existing Subscriptions APIs will continue to work until the end of 2024 through facade we build.\nWhile our primary goal is to provide an effortless transition, we want to inform you that some functionality will be changing or closed starting from the Nordic Wallet Launch \ud83d\ude80. To ensure a smooth experience, we ask you to review the upcoming changes outlined below and update your integration accordingly. We strive to keep you informed every step of the way and support you throughout this process. Thank you for being a part of our journey toward creating the best and most user-friendly payment wallet in the Nordics. \ud83e\udde1 \ud83d\udc99"),(0,r.yg)("admonition",{title:"Important info",type:"danger"},(0,r.yg)("p",{parentName:"admonition"}," To make the transition as smooth as possible, we will migrate all merchants and automatically switch you to the new facade once it is live. All you need to do is ensure that you have adjusted your integration to the changes mentioned below before 12th of martch, and we'll take care of everything else. If you have any questions, feel free to reach out to us at ",(0,r.yg)("a",{parentName:"p",href:"mailto:developer@vippsmobilepay.com"},"developer@vippsmobilepay.com"))),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Timeline for existing subscriptions merchants and partners")),(0,r.yg)("p",null,(0,r.yg)("a",{target:"_blank",href:n(97696).A},(0,r.yg)("img",{alt:"timeline",src:n(81074).A,width:"2510",height:"696"}))),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"NOW")," Take a look at the change list here and implement changes if needed for the Facade period "),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"2024Q1")," Be ready with adjustments needed for your integration for the Facade period."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"2024Q1 March 12th")," We finally launch Nordic Wallet Launch in Denmark \ud83c\udde9\ud83c\uddf0 and migrate all Danish merchants"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"2024")," Plan and integrate new ",(0,r.yg)("a",{parentName:"li",href:"https://developer.vippsmobilepay.com/docs/APIs/recurring-api/"},"Recurring API")," "),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"2025Q1")," Be ready with your API integration to the Recurring API. \ud83e\udde1 \ud83d\udc99 The facade will be switched off. ")),(0,r.yg)("admonition",{title:"Prepare for launch",type:"info"},(0,r.yg)(i.Ay,{mdxType:"Launch"})),(0,r.yg)("h2",{id:"1-agreements"},(0,r.yg)("strong",{parentName:"h2"},"1. Agreements")),(0,r.yg)("h3",{id:"11-agreement-request-expiration-period"},"1.1 Agreement request expiration period"),(0,r.yg)("p",null,"We know that you have various ways to send agreement requests to your customer, such as from your website, through customer self-service portals, by email, printed as a QR on paper invoices, and while chatting on the phone. Some of these scenarios require that the agreement request is valid for a very long time, like when it's sent by email or printed as a QR on a paper invoice. After Nordic Wallet Launch, we will reduce the agreement signing period to 10 minutes. Please note, All agreements with longer expiration time will be expired on Nordic Wallet Launch day. To ensure the security and privacy of our users' data, all user redirects within our system must utilize HTTPS."),(0,r.yg)("p",null,"\u2b50 ",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," If you want to give more than 10 minutes for your customer to sign the agreement, we recommend that you create a middle layer of communication on your private infrastructure. This means that when the user initiates agreement signing from your email or scans the QR on a paper invoice, they should be redirected to your environment. At that moment, you can create the agreement request in Vipps MobilePay and redirect the customer to us. You will be in control of a bigger part of the agreement signing flow, providing more flexibility for you to manage the process.  In addition, you will have no need to send us all potential agreement requests, even if they will never be initiated by the customer. This means less data send to us, and less GDPR related questions \ud83d\ude09"),(0,r.yg)("p",null,"\u2699\ufe0f Tech: API endpoint: ",(0,r.yg)("inlineCode",{parentName:"p"},"POST:/api/providers/{providerId}/agreements")),(0,r.yg)("p",null,"Parameter: ",(0,r.yg)("inlineCode",{parentName:"p"},"expiration_timeout_minutes"),". The current range is from 1 to 181440 minutes, the default was 5 minutes. After Nordic Wallet Launch, the expiration time will always be 10 minutes."),(0,r.yg)("h3",{id:"12-agreement-deletion-validations"},"1.2 Agreement deletion validations"),(0,r.yg)("p",null,"No one likes when an agreement gets canceled, right? We do not like it either. The Subscriptions API offers you the option to prevent the customer from canceling an agreement for up to 24 hours from the time it's signed. From the Nordic Wallet Launch, this feature will be unavailable.  "),(0,r.yg)("p",null,"\u2b50 ",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," We will help you to provide the best payment experience and keep the customer happy so that canceling an agreement will not come into his mind. "),(0,r.yg)("p",null,"\u2699\ufe0f Tech: API endpoint: ",(0,r.yg)("inlineCode",{parentName:"p"},"POST:/api/providers/{providerId}/agreements")),(0,r.yg)("p",null,"Parameter: ",(0,r.yg)("inlineCode",{parentName:"p"},"retention_period_hours")," will be ignored from the Nordic Wallet Launch."),(0,r.yg)("h3",{id:"13-agreements-without-amount"},"1.3 Agreements without amount"),(0,r.yg)("p",null,"Current agreements where amount is not stated will be depicted as agreements with variable amount."),(0,r.yg)("p",null,"\u2b50 ",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," We recommend you to update/create agreements with amount if its known in practice."),(0,r.yg)("p",null,"\u2699\ufe0f Tech: API endpoint: ",(0,r.yg)("inlineCode",{parentName:"p"},"POST /api/providers/{providerId}/agreements")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"PATCH /api/providers/{providerId}/agreements/{agreementId}")," Parameter ",(0,r.yg)("inlineCode",{parentName:"p"},"amount")),(0,r.yg)("p",null,(0,r.yg)("a",{target:"_blank",href:n(2844).A},(0,r.yg)("img",{src:n(48811).A,alt:"WMP Amount",width:"250"}))),(0,r.yg)("p",null,(0,r.yg)("em",{parentName:"p"},"Draft version of agreement screen, not final version.")),(0,r.yg)("h3",{id:"14-agreement-cancellation-by-merchant"},"1.4 Agreement cancellation by merchant"),(0,r.yg)("p",null,"When merchant tries to cancel agreement, which has payments in reserved state - agreement gets cancelled, payments stay in reserved state. This is changing from Nordic Wallet Launch. When merchant cancels agreement all reserved payments will be canceled too. "),(0,r.yg)("p",null,"\u2b50 ",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," Capture reserved payments if needed before calceling the agreement. This applies just if you have agreement cancelation implimented from your environment and you are using payments with reservation. "),(0,r.yg)("h2",{id:"2-recurring-payments"},(0,r.yg)("strong",{parentName:"h2"},"2. Recurring payments")),(0,r.yg)("h3",{id:"21-payments-visible-8-days-in-advance"},"2.1 Payments visible 8 days in advance"),(0,r.yg)("p",null,"We want to empower you with transparency and flexibility when it comes to your recurring payments. Currently, your customer can view upcoming payments in the app up to 8 days in advance, regardless of whether the payment was sent 30 or 60 days earlier. However, from Nordic Wallet Launch, we're excited to announce that customers will be able to see your upcoming payment 35 days in advance if you send it that early."),(0,r.yg)("p",null,"\u2b50 ",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," If 35 days of payment visibility in the app is too long for you, we recommend sending a payment closer to the due date. "),(0,r.yg)("h3",{id:"22-update-existing-payment"},"2.2 Update existing payment"),(0,r.yg)("p",null,"Error in the payment you sent to your customer?  From Nordic Wallet Launch, we ask you to update existing payments in a slightly different way. "),(0,r.yg)("p",null,"\u2b50 ",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," We recommend that you cancel existing payments and create brand-new ones in cases when payment information needs to be updated."),(0,r.yg)("p",null,"\u2699\ufe0f Tech: API endpoint: ",(0,r.yg)("inlineCode",{parentName:"p"},"PATCH:/api/providers/{providerId}/agreements/{agreementId}/paymentrequests/{paymentId}")," will be unavailable from Nordic Wallet Launch."),(0,r.yg)("h3",{id:"23-push-message-for-the-user"},"2.3 Push message for the user"),(0,r.yg)("p",null,"Currently, your customers are receiving push messages 1 day in advance about upcoming recurring payments. You have the option to manage this notification through Subscription APIs. From Nordic Wallet Launch, we are removing this push notification for your customers, and push management will stop being relevant, too. But do not worry, customers choosing to get those push messages will be informed about executed payments instead; in addition to notifications about all failed payments where they need to change a card, increase funds, etc. "),(0,r.yg)("p",null,"\u2b50 ",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," Sit back and relax, we will make sure that all payments are executed successfully. "),(0,r.yg)("p",null,"\u2699\ufe0f Tech: API endpoint: ",(0,r.yg)("inlineCode",{parentName:"p"},"POST:/api/providers/{providerId}/agreements")),(0,r.yg)("p",null,"Parameter: ",(0,r.yg)("inlineCode",{parentName:"p"},"disable_notification_management"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"notifications_on")," will be ignored from Nordic Wallet Launch."),(0,r.yg)("h3",{id:"24-invalid-recurring-payments"},"2.4 Invalid recurring payments"),(0,r.yg)("p",null,"This one is a bit more technical. \u2699\ufe0f Currently, we are saving every payment request you send to us, even Invalid ones. You can check the whole status diagram ",(0,r.yg)("a",{parentName:"p",href:"https://developer.mobilepay.dk/docs/subscriptions/subscriptions-payments#payment-state-diagram"},"here"),". From Nordic Wallet Launch, we will stop storing these requests. This will not impact payment validation or payment execution logic. You will still get callbacks about payment status changes."),(0,r.yg)("h2",{id:"3-one-off-payments"},(0,r.yg)("strong",{parentName:"h2"},"3. One-off payments")),(0,r.yg)("h3",{id:"31-one-off-payments-types"},"3.1 One-off payments types"),(0,r.yg)("p",null,"One-off payments in Subscriptions are used in 3 different ways:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://developer.mobilepay.dk/docs/subscriptions/one-off-payments#flow-1--one-off-payment-with-a-new-agreement"},"Flow 1"),": Create a new Agreement with an initial One-Off Payment. \u2705 Will continue. "),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://developer.mobilepay.dk/docs/subscriptions/one-off-payments#flow-2---one-off-payment-on-an-existing-agreement"},"Flow 2"),": Customer can initiate and request arbitrary One-Off Payment payments on their existing Agreement. \u274c Will be terminated. "),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://developer.mobilepay.dk/docs/subscriptions/one-off-payments#flow-3---one-off-with-auto-reserve"},"Flow 3"),": Merchants can send One-Off payment, which MobilePay will attempt to automatically reserve, without user\u2019s confirmation. \u2705 Will continue. ")),(0,r.yg)("p",null,"We reevaluated all our product packages, and usage of this feature and we decided, that from Nordic Wallet Launch, flow 2 will be moved from Subscriptions (Recurring) product to another Vipps MobilePay product - ePayment! \ud83c\udf40 We are planning to keep flows 1 and 3 in the Subscriptions product and also in the Recurring product. Basically, all payments which are merchant initiated (MIT) and do not require Strong Customer Authentication (SCA) stay in Subscriptions and also Recurring. All payments where SCA is needed will be in ePayment product. "),(0,r.yg)("p",null,"\u2b50 ",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," If you want to continue charging your customers with payments where SCA is needed, please reintegrate these types of payments to Vipps MobilePay ePayment."),(0,r.yg)("h3",{id:"32-one-off-expiration-period"},"3.2 One-off expiration period"),(0,r.yg)("p",null,"Similarly, as with agreements, we are aligning the expiration period for one-off payments.\nFrom Nordic Wallet Launch, the expiration timeout for:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"one-off with a new agreements will always be 10 minutes. "),(0,r.yg)("li",{parentName:"ul"},"one-off for an existing agreement will always be 1 minutes.\nAll one-offs with longer expiration time will be expired on Nordic Wallet Launch day.")),(0,r.yg)("p",null,"\u2b50 ",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Flow 1: Create a new Agreement with an initial One-Off Payment. Just set the same expiration period subtracting for the one-offs as you set for agreements. You can read about changes in agreements ",(0,r.yg)("a",{parentName:"li",href:"https://developer.mobilepay.dk/docs/subscriptions/transition-to-one-platform#11-agreement-request-expiration-period"},"here"),"."),(0,r.yg)("li",{parentName:"ul"},"Flow 2: Customer can initiate and request arbitrary One-Off Payment payments on their existing Agreement. This type of flow will be moved to Vipps MobilePay  ePayments. You can find more information about the switch in ",(0,r.yg)("a",{parentName:"li",href:"https://developer.mobilepay.dk/docs/subscriptions/transition-to-one-platform#31-one-off-payments-types"},'"One-off payments"'),"."),(0,r.yg)("li",{parentName:"ul"},"Flow 3: Merchants can send a One-Off payment, which MobilePay will attempt to automatically reserve, without the user\u2019s confirmation. The long expiration time is not relevant for one-off auto reservation payments. So all is good here \ud83d\ude09.")),(0,r.yg)("p",null,"\u2699\ufe0f Tech: API endpoint: ",(0,r.yg)("inlineCode",{parentName:"p"},"POST:/api/providers/{providerId}/agreements"),"  ",(0,r.yg)("inlineCode",{parentName:"p"},"POST:/api/providers/{providerId}/agreements/{agreementId}/oneoffpayments")),(0,r.yg)("p",null,"Parameter: ",(0,r.yg)("inlineCode",{parentName:"p"},"expiration_timeout_minutes"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"one_off_payment.expiration_timeout_minutes")," Current range from 1 to 181440 min, the default was 10 minutes. After Nordic Wallet Launch, the expiration time will always be:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"10 minutes for one-off when it's with new agreement"),(0,r.yg)("li",{parentName:"ul"},"1 minutes for one-off created when it's for an existing agreement")),(0,r.yg)("h3",{id:"33-description-of-a-one-off-with-a-new-agreement"},"3.3 Description of a one-off with a new agreement"),(0,r.yg)("p",null,"Currently, in Subscriptions, the Description field for one-off which is created together with the new agreement is not mandatory. We are changing that and making it a required field."),(0,r.yg)("p",null,"\u2b50 ",(0,r.yg)("strong",{parentName:"p"},"Recommendation:"),' When creating a one-off payment with a new agreement provide a Description, but if you will forget, do not worry, we will prefill it with "Initial charge".'),(0,r.yg)("p",null,"\u2699\ufe0f Tech: API endpoint: ",(0,r.yg)("inlineCode",{parentName:"p"},"POST /api/providers/{providerId}/agreements")),(0,r.yg)("p",null,"Parameter: ",(0,r.yg)("inlineCode",{parentName:"p"},"one_off_payment.description")),(0,r.yg)("h2",{id:"4-refunds"},(0,r.yg)("strong",{parentName:"h2"},"4. Refunds")),(0,r.yg)("p",null,"In general: it is possible to do GET requests for pre-launch refunds. Furthermore, it is also possible to make refunds for pre-launch payments. Please note: We can only handle 30 days backward for pre-launch payments, whereas we can handle 365 days backward on the new platform, if the payment is completed on the new platform)  GET requests and refunds (up to 30 days) can be made for payments executed on the existing MobilePay platform  "),(0,r.yg)("h3",{id:"41-refund-up-to-365-days"},"4.1 Refund up to 365 days"),(0,r.yg)("p",null,"Currently, you can refund payments that were executed up to 90 days in the past. Good news! We will give you an amazingly long period to refund your payments on One Platform - ",(0,r.yg)("strong",{parentName:"p"},"365 days!"),"  \u26a1\ufe0f\nThe new period will be applied only to payments that will be executed on the new platform after Nordic Wallet Launch. "),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Payments made on the old platform starting from March 12th 2024 have a refund window of 30 days."),(0,r.yg)("li",{parentName:"ul"},"Payments made on the new platform have a refund window of 365 days.")),(0,r.yg)("h3",{id:"42-refunds-description"},"4.2 Refunds description"),(0,r.yg)("p",null,'In Subscriptions, Refunds had no Description, but in the new Recurring setup, this field is present and mandatory. We will prefill it with a simple "Refund" for you.'),(0,r.yg)("h3",{id:"43-refund-responses"},"4.3 Refund responses"),(0,r.yg)("p",null,"There will be no callbacks anymore for refunds after Nordic Wallet Launch. All needed information will be handled through API response.  "),(0,r.yg)("p",null,"Note: For payments made before Nordic Wallet Launch, status_callback_url will still be required and callbacks will still be sent. For payments made after Nordic Wallet Launch, the Facade will return the status_callback_url, although it will not be utilized in the backend logic since callbacks for refunds will no longer be present. "),(0,r.yg)("p",null,"\u2b50 ",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," If you use refunds review planned API responses and adjust your integration to handle it. "),(0,r.yg)("p",null,"\u2699\ufe0f Tech:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",200:!0,className:"language-json",metastring:'title="HTTP 200 - Charge was refunded"',title:'"HTTP',"-":!0,Charge:!0,was:!0,'refunded"':!0},'{\n  "id": "d5f51369-5c3b-4246-958e-9aefeb2ac5fe",\n  "amount": 500,\n  "external_id": "AA3F5Y6G4",\n  "status_callback_url": "https://merchantProviderUrl.com/refund"\n}\n')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",500:!0,className:"language-json",metastring:'title="HTTP 500 - Something went wrong while trying to refund charge/payment"',title:'"HTTP',"-":!0,Something:!0,went:!0,wrong:!0,while:!0,trying:!0,to:!0,refund:!0,'charge/payment"':!0},'{\n  "StatusCode": 100,\n  "StatusText": "Something went wrong while refunding charge"\n}\n')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",365:!0,400:!0,className:"language-json",metastring:'title="HTTP 400 - Charge is too old to refund (older than 365 days)"',title:'"HTTP',"-":!0,Charge:!0,is:!0,too:!0,old:!0,to:!0,refund:!0,"(older":!0,than:!0,'days)"':!0},'{\n  "StatusCode": 101,\n  "StatusText": "Cannot refund a charge older than 365 days"\n}\n')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",400:!0,className:"language-json",metastring:'title="HTTP 400 - Agreement for charge is in wrong status to refund (if accepting and pending)"',title:'"HTTP',"-":!0,Agreement:!0,for:!0,charge:!0,is:!0,in:!0,wrong:!0,status:!0,to:!0,refund:!0,"(if":!0,accepting:!0,and:!0,'pending)"':!0},'{\n  "StatusCode": 102,\n  "StatusText": "Cannot modify an agreement which is not active"\n}\n')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",400:!0,className:"language-json",metastring:'title="HTTP 400 - Charge is in wrong status to refund (not charged/captured, partially captured or fully refunded)"',title:'"HTTP',"-":!0,Charge:!0,is:!0,in:!0,wrong:!0,status:!0,to:!0,refund:!0,"(not":!0,"charged/captured,":!0,partially:!0,captured:!0,or:!0,fully:!0,'refunded)"':!0},'{\n  "StatusCode": 103,\n  "StatusText": "Invalid status"\n}\n')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",400:!0,className:"language-json",metastring:'title="HTTP 400 - Trying to refund higher amount than what is charged/captured"',title:'"HTTP',"-":!0,Trying:!0,to:!0,refund:!0,higher:!0,amount:!0,than:!0,what:!0,is:!0,'charged/captured"':!0},'{\n  "StatusCode": 104,\n  "StatusText": "Invalid amount, you cannot refund more than the remaining value on this charge/payment"\n}\n')),(0,r.yg)("h2",{id:"5-app-"},(0,r.yg)("strong",{parentName:"h2"},"5. App \ud83d\udcf1")),(0,r.yg)("h3",{id:"51-merchant-visibility"},"5.1 Merchant visibility"),(0,r.yg)("p",null,"We will be streamlining the user interface of the app to provide a more focused and efficient experience for you and your customers. As a result, the list of potential merchants will no longer be displayed in the app. However, please be assured that all active and stopped agreements will still be readily visible to the app users."),(0,r.yg)("p",null,"\u2b50",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," We understand that being present in the potential agreement list can be important to you. Although this feature will be going away, please know that we still value your feedback and aim to provide the best experience for our common customers. "),(0,r.yg)("h3",{id:"52-merchant-information-on-agreements"},"5.2 Merchant information on agreements"),(0,r.yg)("p",null,"Currently, you are able to show your contact information in every agreement for your customer in the agreement Info tab: Website, Customer Support, Self Service, FAQ. From Nordic Wallet Launch, this contact information will no longer be displayed for the user. "),(0,r.yg)("p",null,"\u2b50",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," We understand that contact information on the agreement can be important to you and your customers. You can always provide an agreement management URL to the user (we call it cancel-redirect in our documentation) which enables them to reach your environment from the app. Or you could add contact information in the agreement description if this is necessary. "),(0,r.yg)("h2",{id:"6-payment-attachments"},(0,r.yg)("strong",{parentName:"h2"},"6. Payment attachments")),(0,r.yg)("p",null,"Read more ",(0,r.yg)("a",{parentName:"p",href:"https://developer.mobilepay.dk/docs/subscriptions/invoice#payment-attachments-v2"},"here"),"."),(0,r.yg)("h3",{id:"61-pdf-generation"},"6.1 PDF generation"),(0,r.yg)("p",null,"Currently, you can attach extra information about payments, such as a link to an external PDF file or other environment, payment details, or PDF file generation from payment details. After reviewing this feature and its usage, we have decided to focus more on payment execution and agreement signing success rather than PDF generation capabilities. So, the PDF generation option will no longer be available from Nordic Wallet Launch."),(0,r.yg)("p",null,"\u2b50",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," We are sorry if this feature was important to you, we hope you will find other ways to send PDF documents to your customers. Your satisfaction is our top priority, and we are here to support you throughout this process."),(0,r.yg)("p",null,"\u2699\ufe0f Tech: API endpoint:  ",(0,r.yg)("inlineCode",{parentName:"p"},"PUT:/api/providers/{providerId}/payments/{paymentId}/attachment")),(0,r.yg)("p",null,"Parameter: ",(0,r.yg)("inlineCode",{parentName:"p"},"generate_pdf")," : true will be ignored from Nordic Wallet Launch."),(0,r.yg)("h3",{id:"62-external-url"},"6.2 External URL"),(0,r.yg)("p",null,"Currently, we are providing the possibility for you to upgrade your Subscription payment with extra attachments like External URL. Sadly we most likely will not make it to re-introduce this feature from the moment of Nordic Wallet Launch \ud83d\ude22. We are really sorry if this will cause any inconvenience for you, but we promise to work on it as soon as possible and introduce the feature right after Launch. "),(0,r.yg)("p",null,"\u2699\ufe0f Tech: API endpoint:  ",(0,r.yg)("inlineCode",{parentName:"p"},"PUT:/api/providers/{providerId}/payments/{paymentId}/attachment")),(0,r.yg)("p",null,"Parameter: ",(0,r.yg)("inlineCode",{parentName:"p"},"external_attachment_url")),(0,r.yg)("h3",{id:"63-attachement-details"},"6.3 Attachement details"),(0,r.yg)("p",null,"Similarly, as with External URL, we most likely will not make it to re-introduce this feature from the moment of Nordic Wallet Launch. We are really sorry if this will cause any inconvenience for you, but we promise to work on it as soon as possible and introduce the feature right after Launch. "),(0,r.yg)("p",null,"\u2699\ufe0f Tech: API endpoint:  ",(0,r.yg)("inlineCode",{parentName:"p"},"PUT:/api/providers/{providerId}/payments/{paymentId}/attachment")),(0,r.yg)("p",null,"Parameter: ",(0,r.yg)("inlineCode",{parentName:"p"},"attachment_details")),(0,r.yg)("h2",{id:"7-onboarding"},(0,r.yg)("strong",{parentName:"h2"},"7. Onboarding")),(0,r.yg)("h3",{id:"71-authorisation"},"7.1 Authorisation"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"For merchants")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"If you are using or are planning to start using Subscriptions on the MobilePay platform before transitioning to One Platform. All good, nothing to do for you, just make sure you complete the authorization setup before Nordic Wallet Launch."),(0,r.yg)("li",{parentName:"ul"},"If by any chance you will need to restart the consent flow, e.g. get a new refresh token after Nordic Wallet Launch, you will have to do that already though new Vipps MobilePay platform."),(0,r.yg)("li",{parentName:"ul"},"If you are planning to start using Recurring on the New Vipps MobilePay platform, just integrate into the new setup from the beginning. ")),(0,r.yg)("p",null,"Read more about ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/APIs/access-token-api/"},"Access token API guide"),"."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"For integrators/partners")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"If you are planning to start using Recurring on New Vipps MobilePay platform, just integrate to the new setup from the beginning."),(0,r.yg)("li",{parentName:"ul"},"If you are an existing partner in Subscriptions on the MobilePay platform and you want to onboard new merchants, we will ask you to change your authorization setup. We are sorry, but from the Nordic Wallet Launch, we will not be able to support the existing flow where the merchant grants consent to you. Access and refresh tokens that were issued before the transition will remain valid and continue to work. To get providerId for new onboarded merchants, you can call ",(0,r.yg)("inlineCode",{parentName:"li"},"GET:/api/merchants/me")," with the new authorization token and ",(0,r.yg)("inlineCode",{parentName:"li"},"Merchant-Serial-Number")," header. ")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Read more about ",(0,r.yg)("a",{parentName:"li",href:"https://developer.vippsmobilepay.com/docs/APIs/access-token-api/"},"Access token API guide")," and ",(0,r.yg)("a",{parentName:"li",href:"https://developer.vippsmobilepay.com/docs/vipps-partner/#technical-information-for-partners"},"Technical information for partners"),".")),(0,r.yg)("h2",{id:"8-settlements"},(0,r.yg)("strong",{parentName:"h2"},"8. Settlements")),(0,r.yg)("h3",{id:"81-from-the-nordic-wallet-launch-all-sales-units-payment-points-will-be-switched-to-daily-settlements"},"8.1 From the Nordic Wallet Launch all sales units (payment points) will be switched to daily settlements"),(0,r.yg)("p",null,"Currently you were able to select how to receive settlements: daily or instant. After NWL all sales units will be switched to receive daily settlements. Instant transfers will stay as a functionality, but it will be renamed to Single payment settlements, which represents the functionality in better way. Furthermore, functionality will be for an extra fee.  With Single payment settlements every payment will be settleded separately (not bundled up) and you will receive it in 1 days after payment was executed. "),(0,r.yg)("p",null,"\u2b50",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," If you need to have your payments settled separately, log in to new Merchant Portal after NWL and select Single payment settlement functionality. "),(0,r.yg)("h3",{id:"82-settlement-time-changes"},(0,r.yg)("s",null,"8.2 Settlement time changes")),(0,r.yg)("s",null,"Currently your money is settled 1 day after payments were executed, after NWL we will settle you money bit later - 2 days after payments were executed. "),(0,r.yg)("s",null,":star:**Recommendation:**  your feedback is very important for us, let us know if you have a need to get settlements faster."),(0,r.yg)("h3",{id:"83-gross-settlements"},(0,r.yg)("s",null,"8.3 Gross Settlements")),(0,r.yg)("s",null,"Currently we are sending you gross settlements (full amount of the payments) and later we were issueing you with an invoice for service fees. After NWL we will change how we are doing settlements and you will receive net value settlement where all necessary fees are already deducted. "),(0,r.yg)("h2",{id:"9-other"},(0,r.yg)("strong",{parentName:"h2"},"9. Other")),(0,r.yg)("h3",{id:"91-from-the-nordic-wallet-launch-callbacks-will-be-sent-from-new-dns-address"},"9.1 From the Nordic Wallet Launch callbacks will be sent from new DNS address"),(0,r.yg)("p",null,"Please make sure that these DNS addresses are allowed through your firewall ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/developer-resources/servers/#vipps-request-servers"},"https://developer.vippsmobilepay.com/docs/developer-resources/servers/#vipps-request-servers"),"\nAbove DNS addresses will also be used to call token retrieval endpoint for merchants who are using OAuth2 authentication."),(0,r.yg)("h3",{id:"92-callback-changes-for-recurring-and-one-off-payments"},"9.2 Callback changes for recurring and one-off payments"),(0,r.yg)("p",null,"We will stop sending our old callbacks for one-off payment expiration and rejection by users from Nordic Wallet Launch. "),(0,r.yg)("p",null,"Instead we will start sending new callback for both recurring and one-off payment:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'[\n{\n  "agreement_id": "d230e533-dceb-483b-a9ce-cf99e7851d0e",\n  "payment_id": "86957d1c-00f5-4b9c-bd29-dd2e8de082d8",\n  "amount": "54.00",\n  "currency": "DKK",\n  "payment_date": "2023-08-24",\n  "payment_type": "OneOff",\n  "status": "Cancelled",\n  "status_text": "Payment cancelled.",\n  "status_code": 70003,\n  "external_id": "ed40a2e7-a14b-44c8-a35d-ec015e6d31f0"\n}\n]\n')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'[\n{\n  "agreement_id": "d230e533-dceb-483b-a9ce-cf99e7851d0e",\n  "payment_id": "86957d1c-00f5-4b9c-bd29-dd2e8de082d8",\n  "amount": "54.00",\n  "currency": "DKK",\n  "payment_date": "2023-08-24",\n  "payment_type": "Regular",\n  "status": "Cancelled",\n  "status_text": "Payment cancelled.",\n  "status_code": 70003,\n  "external_id": "ed40a2e7-a14b-44c8-a35d-ec015e6d31f0"\n}\n]\n')),(0,r.yg)("p",null,"Above callbacks will be sent in following cases:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"For each pending recurring payment which is cancelled due to users' initiated cancellation of agreement"),(0,r.yg)("li",{parentName:"ul"},"For each pending recurring payment which is cancelled due to merchants' initiated cancellation of agreement"),(0,r.yg)("li",{parentName:"ul"},"For merchants' initiated cancellation of pending recurring payment"),(0,r.yg)("li",{parentName:"ul"},"For each one-off payment expiration"),(0,r.yg)("li",{parentName:"ul"},"For each one-off payment rejection by user"),(0,r.yg)("li",{parentName:"ul"},"For each cancellation of pending one-off payment, due to merchants' initiated cancellation of pending agreement")),(0,r.yg)("h3",{id:"93-callbacks-for-non-reintegrated-merchants-after-nwl"},"9.3 Callbacks for non reintegrated merchants after NWL"),(0,r.yg)("p",null,"These are the callbacks we will be sending for non reintegrated merchants."),(0,r.yg)("p",null,"Agreement callbacks (no changes):"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Status"),(0,r.yg)("th",{parentName:"tr",align:null},"Status code"),(0,r.yg)("th",{parentName:"tr",align:null},"Status text"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Accepted"),(0,r.yg)("td",{parentName:"tr",align:null},"0"),(0,r.yg)("td",{parentName:"tr",align:null},"The agreement has been accepted.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Expired"),(0,r.yg)("td",{parentName:"tr",align:null},"40001"),(0,r.yg)("td",{parentName:"tr",align:null},"Pending agreement expired.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Rejected"),(0,r.yg)("td",{parentName:"tr",align:null},"40000"),(0,r.yg)("td",{parentName:"tr",align:null},"Rejected by user.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Canceled"),(0,r.yg)("td",{parentName:"tr",align:null},"40002"),(0,r.yg)("td",{parentName:"tr",align:null},"The agreement was canceled by the user.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Canceled"),(0,r.yg)("td",{parentName:"tr",align:null},"40003"),(0,r.yg)("td",{parentName:"tr",align:null},"The agreement was canceled by the merchant.")))),(0,r.yg)("p",null,"Recurring payment callbacks:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Status"),(0,r.yg)("th",{parentName:"tr",align:null},"Status code"),(0,r.yg)("th",{parentName:"tr",align:null},"Status text"),(0,r.yg)("th",{parentName:"tr",align:null},"Callback sending condition"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Cancelled"),(0,r.yg)("td",{parentName:"tr",align:null},"70003"),(0,r.yg)("td",{parentName:"tr",align:null},"Payment cancelled."),(0,r.yg)("td",{parentName:"tr",align:null},"Pending payment cancelled due to user cancelling an agreement")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},"Pending payment cancelled due to merchant cancelling an agreement")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},"Merchants' initiated cancellation of pending recurring payment")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null})),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Executed"),(0,r.yg)("td",{parentName:"tr",align:null},"0"),(0,r.yg)("td",{parentName:"tr",align:null},"null"),(0,r.yg)("td",{parentName:"tr",align:null},"Payment succesfully executed on due date")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Failed"),(0,r.yg)("td",{parentName:"tr",align:null},"50000"),(0,r.yg)("td",{parentName:"tr",align:null},"Payment failed to execute during the due date"),(0,r.yg)("td",{parentName:"tr",align:null},"Payment failed to execute during the due date")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Declined"),(0,r.yg)("td",{parentName:"tr",align:null},"70001"),(0,r.yg)("td",{parentName:"tr",align:null},"Payment amount is 5 times higher than agreement amount."),(0,r.yg)("td",{parentName:"tr",align:null},"Payment batch request contains a payment which amount is 5 times higher than")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},"agreement's amount. Applicable when agreement has an amount more than 0")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Declined"),(0,r.yg)("td",{parentName:"tr",align:null},"50003"),(0,r.yg)("td",{parentName:"tr",align:null},'Declined by system: Agreement is not in \\"Active\\" state.'),(0,r.yg)("td",{parentName:"tr",align:null},"Payment batch request contains a payment for non-active agreement")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Declined"),(0,r.yg)("td",{parentName:"tr",align:null},"50004"),(0,r.yg)("td",{parentName:"tr",align:null},"Declined by system: Found duplicates for the same DueDate and AgreementId/ExternalId."),(0,r.yg)("td",{parentName:"tr",align:null},"Payment batch request contains a duplicate payment with the same DueDate and AgreementId/ExternalId")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Declined"),(0,r.yg)("td",{parentName:"tr",align:null},"50006"),(0,r.yg)("td",{parentName:"tr",align:null},"Declined by system."),(0,r.yg)("td",{parentName:"tr",align:null},"Unspecified error when processing payment from payment batch request")))),(0,r.yg)("p",null,"One-off payment sent with an agreement:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Status"),(0,r.yg)("th",{parentName:"tr",align:null},"Status code"),(0,r.yg)("th",{parentName:"tr",align:null},"Status text"),(0,r.yg)("th",{parentName:"tr",align:null},"Callback sending condition"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Cancelled"),(0,r.yg)("td",{parentName:"tr",align:null},"70003"),(0,r.yg)("td",{parentName:"tr",align:null},"Payment cancelled."),(0,r.yg)("td",{parentName:"tr",align:null},"Pending agreement with one-off payment has expired")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},"Pending agreement with one-off payment was rejected by user")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},"Merchant cancels pending agreement with one-off payment")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},"Merchant cancels active agreement and one-off payment is Reserved")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},"Merchant cancells Reserved one-off payment")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null})),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Reserved"),(0,r.yg)("td",{parentName:"tr",align:null},"0"),(0,r.yg)("td",{parentName:"tr",align:null},"Payment successfully reserved."),(0,r.yg)("td",{parentName:"tr",align:null},"Agreement with one-off payment was accepted and payment was reserved")))),(0,r.yg)("p",null,"Autoreserve one-off payment:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Status"),(0,r.yg)("th",{parentName:"tr",align:null},"Status code"),(0,r.yg)("th",{parentName:"tr",align:null},"Status text"),(0,r.yg)("th",{parentName:"tr",align:null},"Callback sending condition"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Cancelled"),(0,r.yg)("td",{parentName:"tr",align:null},"70003"),(0,r.yg)("td",{parentName:"tr",align:null},"Payment cancelled."),(0,r.yg)("td",{parentName:"tr",align:null},"Merchant cancells autoreserve one-off payment in Requested or Reserved status")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},"Merchant cancels active agreement and one-off payment is Reserved or Requested")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},"Payment expires")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null})),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Reserved"),(0,r.yg)("td",{parentName:"tr",align:null},"0"),(0,r.yg)("td",{parentName:"tr",align:null},"Payment successfully reserved."),(0,r.yg)("td",{parentName:"tr",align:null},"Payment reserved")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Requested"),(0,r.yg)("td",{parentName:"tr",align:null},"50013"),(0,r.yg)("td",{parentName:"tr",align:null},"Automatic reservation failed. User action is needed."),(0,r.yg)("td",{parentName:"tr",align:null},"Reservation failed")))),(0,r.yg)("p",null,"In the new platform reservation failure and expiration callbacks are sent only after payment expiration with few seconds delay between each other."),(0,r.yg)("h3",{id:"94-callbacks-for-reintegrated-merchants"},"9.4 Callbacks for reintegrated merchants"),(0,r.yg)("p",null,"If you are planning to reintegrate, you will have to start using new Webhook solution ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/APIs/webhooks-api/"},"https://developer.vippsmobilepay.com/docs/APIs/webhooks-api/"),"\nBy default after integrating with new Webhook solution, you will still receive old ",(0,r.yg)("strong",{parentName:"p"},"payment")," callbacks to your old payment callback URL and there is no possibility to change callback url or authentication method for old integration. This means that you will receive both old callbacks and new webhooks. Once you have integrated towards Webooks and no longer rely on old callbacks, please notify us and we will turn them off."),(0,r.yg)("p",null,"Here you can find a payload and other useful information about new Webhooks ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#webhooks-integration"},"https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#webhooks-integration")),(0,r.yg)("h3",{id:"95-error-messages"},"9.5 Error messages"),(0,r.yg)("p",null,"We are making adjustments to error responses, specifically related to ",(0,r.yg)("inlineCode",{parentName:"p"},"error_description.message")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"error_description.error_type"),". Some values will remain unchanged, some will be modified, and new validations will be introduced. Some messages may be less explicit than before, as they are generated directly from the backend and not specifically tailored for exact app branding (MobilePay or Vipps) responses."),(0,r.yg)("p",null,"Example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'{\n   "error": "BadRequest",\n   "error_description": {\n      "message": "The field \'phoneNumber\' has an invalid format for a phone number, provided value: \'44444444444444\'",\n      "error_type": "InputError",\n      "correlation_id": "ef928510-ae19-4fe7-ae1e-76b43de202f5",\n      "error_code": null,\n      "localized_message": "A technical error occurred."\n   }\n}\n')),(0,r.yg)("p",null,"Some field names, like ",(0,r.yg)("inlineCode",{parentName:"p"},"mobile_phone_number"),", will undergo changes; for instance, it will be referred to as ",(0,r.yg)("inlineCode",{parentName:"p"},"phoneNumber"),". If clarity is needed, refer to ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/APIs/recurring-api/"},"Recurring documentation")," for field specifications."),(0,r.yg)("p",null,"\u2b50 ",(0,r.yg)("strong",{parentName:"p"},"Recommendation:")," Avoid relying on specific values in ",(0,r.yg)("inlineCode",{parentName:"p"},"error_description.message")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"error_description.error_type"),". Update your error handling processes to ensure flexibility in these two fields."),(0,r.yg)("h3",{id:"96-from-the-nordic-wallet-launch-merchants-server-must-be-tls-12"},"9.6 From the Nordic Wallet Launch Merchant's server must be TLS 1.2"),(0,r.yg)("p",null,"Please make sure that your servers hosting the token endpoint for callbacks supports TLS 1.2. If not, we will not be able to send callbacks back to you."),(0,r.yg)("h2",{id:"10-test"},(0,r.yg)("strong",{parentName:"h2"},"10. Test")),(0,r.yg)("p",null,"The first version of the new test environment is ready for the Subscriptions facade. All features except Refund is available."),(0,r.yg)("h3",{id:"101-test-credentials"},"10.1 Test credentials"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Test merchant"),": Find a guide to create test merchant ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/developer-resources/portal/#how-to-create-a-test-sales-unit"},"here"),". The test credentials consist of a client id, client secret and subscriptions key. "),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Test user"),": Find a guide to create test users ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/test-environment/#test-users"},"here")," "),(0,r.yg)("p",null,(0,r.yg)("em",{parentName:"p"},"For partners"),": Please contact ",(0,r.yg)("a",{parentName:"p",href:"mailto:partner@vippsmobilepay.com"},"partner@vippsmobilepay.com")," to request a DK or FI test merchant and user."),(0,r.yg)("p",null,"Please note: If you want to reuse your Subscriptions test data you will need to recreate your test data. Please note that all test data, including payments, refunds, and so on, created on the old platform will not be migrated from the sandbox to the merchant test environment."),(0,r.yg)("h3",{id:"102-authentication"},"10.2 Authentication"),(0,r.yg)("p",null,"You will  have to integrate with the new and simplified Access Token API designed for the merchant test environment. The old MobilePay OpenId consent flow for the sandbox will cease to function. ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/APIs/access-token-api/"},"Access token API guide"),"."),(0,r.yg)("h3",{id:"103-headers-and-endpoints"},"10.3 Headers and endpoints"),(0,r.yg)("p",null,"You must include these headers for all requests to the API"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"-H 'Authorization: Bearer {JWT}' \\\n-H 'Content-Type: application/json' \\\n-H 'Ocp-Apim-Subscription-Key: {subscriptions key}' \\\n-H 'Merchant-Serial-Number: {MSN}'\n")),(0,r.yg)("p",null,"The endpoints have not changed. Please find them in the ",(0,r.yg)("a",{parentName:"p",href:"https://developer.mobilepay.dk/api/subscriptions"},"API specification"),"."),(0,r.yg)("h3",{id:"104-initiate-test"},"10.4 Initiate test"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Fetch test merchant and test use"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("a",{parentName:"li",href:"https://developer.vippsmobilepay.com/api/access-token/#tag/Authorization-Service/operation/fetchAuthorizationTokenUsingPost"},"GET access token")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("a",{parentName:"li",href:"https://developer.mobilepay.dk/api/subscriptions#tag/Subscriptions-Merchant/paths/~1api~1merchants~1me/get"},"GET subscriptionsProviderId")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("a",{parentName:"li",href:"https://developer.mobilepay.dk/api/subscriptions#tag/Subscriptions/paths/~1api~1providers~1%7Bproviderid%7D~1agreements/post"},"Create new agreement"))),(0,r.yg)("h2",{id:"faq"},(0,r.yg)("strong",{parentName:"h2"},"FAQ")),(0,r.yg)("h3",{id:"1-do-i-need-to-reintegrate-now-to-the-new-solution-apis"},(0,r.yg)("strong",{parentName:"h3"},"1. Do I need to reintegrate now to the new solution, APIs?")),(0,r.yg)("p",null,"No, you don't need to reintegrate to the new solution right now. We are building Facade which will forward all your integration messages to the new solution and return needed responses. The only thing we ask you is to review the upcoming changes outlined above and update your integration accordingly. "),(0,r.yg)("h3",{id:"2-how-will-the-migration-of-data-work"},(0,r.yg)("strong",{parentName:"h3"},"2. How will the migration of data work?")),(0,r.yg)("p",null,"Vipps MobilePay will make sure that all needed data is migrated from Subscriptions to Recurring:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"All active merchants and their payment points will be migrated to the new system. The primary identifiers are ",(0,r.yg)("inlineCode",{parentName:"p"},"provider_id"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"agreement_id"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"payment_id"),", and ",(0,r.yg)("inlineCode",{parentName:"p"},"refund_id"),". These remain unchanged; there is no changes there.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"All partners/integrators will be created in the new system.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"We will make sure that proper connection of merchant and partner/integrator is maintained on the new setup.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"We will migrate all active agreements. There is no need to recreate agreements from NewWalletLaunch neither from reintegration.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"All payment requests with due dates will be migrated and executed on new system.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"We will migrate 3 years of historical production data (agreements, payment requests, refunds) to the new environment."))),(0,r.yg)("p",null,"Sandbox data will not be migrated due to different merchant and payment point setups. "),(0,r.yg)("p",null,"If you have a need to have a list of old and new ID's, we have an endpoint for obtaining agreements that offers both ",(0,r.yg)("inlineCode",{parentName:"p"},"ExternalId")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"AgreementUuid"),".\nPlease refer to the ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/api/recurring/"},"NEW Recurring API endpoint description")," - You can utilize ",(0,r.yg)("inlineCode",{parentName:"p"},"Agreement-v3-endpoints ListAgreementsV3"),"  endpoint for mapping.  "),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"To be clear:")),(0,r.yg)("p",null,"-Facade merchants: There will be not changes to the identifiers. The facade api will return the exact same identifiers."),(0,r.yg)("p",null,"Below you can find information for when merchants will re-integrate to the ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/api/recurring/"},"NEW Recurring API Reference")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},(0,r.yg)("inlineCode",{parentName:"strong"},"providerid"))),(0,r.yg)("p",null,"There is no provider_id in the calls to Recurring API endpoints."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},(0,r.yg)("inlineCode",{parentName:"strong"},"agreements"))),(0,r.yg)("p",null,"\u2699\ufe0f Docs on agreements ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#agreements"},"here"),":"),(0,r.yg)("p",null,"GET Agreements endpoint"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Path parameters pageNumber and pageSize are no longer needed. Instead, use query parameter createdAfter.")),(0,r.yg)("p",null,"GET Agreement endpoint"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Merchants can call GET agreement using either ",(0,r.yg)("inlineCode",{parentName:"li"},"agr_xxxxxx")," or the ",(0,r.yg)("inlineCode",{parentName:"li"},"uuid"),"."),(0,r.yg)("li",{parentName:"ul"},"We will return both ",(0,r.yg)("inlineCode",{parentName:"li"},"agreementId"),' ( "agr_xxxxxxx" format ) and a ',(0,r.yg)("inlineCode",{parentName:"li"},"uuid"),".")),(0,r.yg)("p",null,"POST Agreement endpoint"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Field country_code becomes countryCode, and is not required."),(0,r.yg)("li",{parentName:"ul"},"Field external_id becomes externalId, and is not nullable."),(0,r.yg)("li",{parentName:"ul"},"Field description becomes productDescription, and has a maximum of 100 characters."),(0,r.yg)("li",{parentName:"ul"},"Field frequency becomes interval. It is composed of 2 required fields :",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},'unit. Type : String. Value has to be among :  "YEAR", "MONTH", "WEEK", "DAY".'),(0,r.yg)("li",{parentName:"ul"},"count. Type : Int. Value has to be between 1 and 31."))),(0,r.yg)("li",{parentName:"ul"},"Field mobile_phone_number becomes phoneNumber, and has a maximum of 15 characters."),(0,r.yg)("li",{parentName:"ul"},"Field one_off_payment becomes initialCharge."),(0,r.yg)("li",{parentName:"ul"},"Field plan becomes productName, and has a maximum of 45 characters."),(0,r.yg)("li",{parentName:"ul"},"The following fields are not needed anymore :",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"expiration_timeout_minutes"),(0,r.yg)("li",{parentName:"ul"},"links"),(0,r.yg)("li",{parentName:"ul"},"next_payment_date"),(0,r.yg)("li",{parentName:"ul"},"retention_period_hours"),(0,r.yg)("li",{parentName:"ul"},"disable_notification_management"),(0,r.yg)("li",{parentName:"ul"},"notifications_on"))),(0,r.yg)("li",{parentName:"ul"},"The following fields are new :",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"campaign"),(0,r.yg)("li",{parentName:"ul"},"pricing. Required field. Fields currency and amount are moved into this field."),(0,r.yg)("li",{parentName:"ul"},"isApp"),(0,r.yg)("li",{parentName:"ul"},"merchantAgreementUrl. Required field."),(0,r.yg)("li",{parentName:"ul"},"merchantRedirectUrl. Required field."),(0,r.yg)("li",{parentName:"ul"},"scope"),(0,r.yg)("li",{parentName:"ul"},"skipLandingPage")))),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},(0,r.yg)("inlineCode",{parentName:"strong"},"charges"))),(0,r.yg)("p",null,"\u2699\ufe0f Docs on charges ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#charges"},"here"),":"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"id stays the same. charge.id = paymentId. chargeId = paymentid.")),(0,r.yg)("p",null,"GET Charges endpoint"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"New query parameter : status. It filters by status of the charge.")),(0,r.yg)("p",null,"New endpoint : POST Charge endpoint"),(0,r.yg)("p",null,"POST Charges endpoint :"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Amount has to be equal or superior to 100."),(0,r.yg)("li",{parentName:"ul"},"Description has between 1 and 45 characters."),(0,r.yg)("li",{parentName:"ul"},"Field due_date becomes due."),(0,r.yg)("li",{parentName:"ul"},"Field grace_period_days becomes retryDays. Required field. Value is between 0 and 14."),(0,r.yg)("li",{parentName:"ul"},"Field next_payment_date is no longer needed."),(0,r.yg)("li",{parentName:"ul"},"New fields :",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},'transactionType. Required field. Type : String. Value has to be "DIRECT_CAPTURE" or "RESERVE_CAPTURE".'),(0,r.yg)("li",{parentName:"ul"},"orderId. Type : String.")))),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},(0,r.yg)("inlineCode",{parentName:"strong"},"refunds"))),(0,r.yg)("p",null,"\u2699\ufe0f Docs on refunds ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#refund-a-charge"},"here"),":"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Merchant will need to call the GET charge endpoint using the id of the charge refunded."),(0,r.yg)("li",{parentName:"ul"},"Refunds won't have their own ids."),(0,r.yg)("li",{parentName:"ul"},'Fields "amount" and "description" are required.'),(0,r.yg)("li",{parentName:"ul"},"No externalId and no status_callback_url are needed."),(0,r.yg)("li",{parentName:"ul"},"Amount has to be equal or superior to 100.")),(0,r.yg)("h3",{id:"3-when-can-i-integrate-to-the-recurring-api"},(0,r.yg)("strong",{parentName:"h3"},"3. When can I integrate to the Recurring API?")),(0,r.yg)("p",null,"If you already want to reintegrate you can start now!"),(0,r.yg)("p",null,"It is still the same team as before that is here to assist you with technical questions. Just send an email to ",(0,r.yg)("a",{parentName:"p",href:"mailto:developer@vippsmobilepay.com"},"developer@vippsmobilepay.com"),", and we'll be happy to help! \ud83d\ude0a"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/api/recurring/"},"NEW Recurring API Reference"),": Explore the documentation for the New Recurring API.   ")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/APIs/recurring-api/"},"NEW Recurring API Documentation"),": Find detailed information on the New Recurring API.   ")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/APIs/recurring-api/CHANGELOG/"},"NEW Recurring Changelogs"),": All notable changes to the Recurring API."))),(0,r.yg)("h3",{id:"4-does-the-recurring-api-have-callbacks"},(0,r.yg)("strong",{parentName:"h3"},"4. Does the Recurring API have callbacks?")),(0,r.yg)("p",null,"Yes! ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#webhooks-integration"},"webhooks")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://developer.vippsmobilepay.com/docs/APIs/recurring-api/recurring-api-guide/#webhooks-integration"},"Webhooks technical documentation")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://developer.vippsmobilepay.com/api/webhooks/"},"Webhooks endpoint documentation"),"\nAnother method is ",(0,r.yg)("a",{parentName:"li",href:"https://developer.vippsmobilepay.com/docs/knowledge-base/polling-guidelines/"},"polling"),".    "),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://developer.vippsmobilepay.com/docs/knowledge-base/polling-guidelines/"},"Polling guidelines"),")")),(0,r.yg)("p",null,"Callbacks will work on the facade API.  "),(0,r.yg)("h3",{id:"5-will-i-be-able-to-test-the-new-recurring-api"},(0,r.yg)("strong",{parentName:"h3"},"5. Will I be able to test the new Recurring API?")),(0,r.yg)("p",null,"You will be able to test the new Recurring API through the merchant test environment on the new platform. If you want to test the Mobilepay Subscriptions facade instead please ",(0,r.yg)("a",{parentName:"p",href:"https://developer.mobilepay.dk/docs/subscriptions/transition-to-one-platform#10-test"},"read here"),". "),(0,r.yg)("p",null,"Please note:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"If you want to reuse your Subscriptions test data you will need to recreate your test data. Please note that all test data, including agreements, payments, refunds, and so on, created before will not be migrated from the Subscriptions sandbox to the Recurring merchant test environment."),(0,r.yg)("li",{parentName:"ol"},"You will also have to integrate with the new and simplified Access Token API designed for the merchant test environment. The old MobilePay-issued access and refresh tokens for the sandbox will cease to function after the launch of Nordic Wallet. ",(0,r.yg)("a",{parentName:"li",href:"https://developer.vippsmobilepay.com/docs/APIs/access-token-api/"},"Access token API guide"))),(0,r.yg)("p",null,"The test environment is called Merchant Test (MT) and is now open for test. MT currently only allows Norwegian phone numbers, currency and merchants, but you can test the API and payment flow. Please see the details of ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/test-environment/"},"limitations of the test environment")),(0,r.yg)("p",null,"In order to request access to the test environment, please use the following links:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://www.vippsmobilepay.com/partner/become-a-partner"},"Partners")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://vippsmobilepay.com/merchant-test-account-sign-up"},"Merchants"))),(0,r.yg)("p",null,"We will send you an e-mail with the information you need to get started. This is also needed even though you are an existing MobilePay integrator or merchant, since we need your information registered on our new joint platform."),(0,r.yg)("h3",{id:"6-how-will-i-find-data-about-my-payments"},(0,r.yg)("strong",{parentName:"h3"},"6. How will I find data about my payments?")),(0,r.yg)("p",null,"We will migrate 3 years of historical data (agreements, payment requests, refunds). You will be able to access that data though:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"API GET calls. For new and historical data."),(0,r.yg)("li",{parentName:"ol"},"Though ",(0,r.yg)("a",{parentName:"li",href:"https://portal.vipps.no/register"},"Merchant Portal"),". Just for new transactions done after Nordic Wallet Launch."),(0,r.yg)("li",{parentName:"ol"},"Integrate it into the ",(0,r.yg)("a",{parentName:"li",href:"https://developer.vippsmobilepay.com/docs/APIs/report-api/"},"Report API"),". Read more ",(0,r.yg)("a",{parentName:"li",href:"https://developer.vippsmobilepay.com/docs/mp-migration-guide/reporting/"},"here")," about transition period.")),(0,r.yg)("h3",{id:"7-i-am-using-transaction-reporting-api-what-should-i-do"},(0,r.yg)("strong",{parentName:"h3"},"7. I am using Transaction Reporting API, what should I do?")),(0,r.yg)("p",null,"Sadly, we are not builing any facade for Transaction reporting API. We are asking you to reintegrate to alternative solution ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/APIs/report-api/"},"Report API"),". Read more ",(0,r.yg)("a",{parentName:"p",href:"https://developer.vippsmobilepay.com/docs/mp-migration-guide/reporting/"},"here")," about transition period.  "),(0,r.yg)("h3",{id:"8-will-users-get-a-new-app"},(0,r.yg)("strong",{parentName:"h3"},"8. Will users get a new app?")),(0,r.yg)("p",null,"Yes, all app users will need to download the new app versions; this will be a mandatory upgrade on Nordic Wallet Launch day. We will ensure that users do not need to create new accounts; their profiles will be seamlessly migrated to the new platform. However, since users need to download the new app version, there is an increased risk of expired payments around 12th of march. "),(0,r.yg)("h3",{id:"9-what-cool-features-are-there-ahead"},(0,r.yg)("strong",{parentName:"h3"},"9. What cool features are there ahead?")),(0,r.yg)("p",null,"There are several exciting features on the horizon. For instance, there's profile sharing, allowing merchants to request users to share various information from the app, thereby streamlining the signup process. Additionally, we have upcoming campaigns, improved refund processes, enhanced capture capabilities, increased limits, expansion into three new markets, and various other flexibility improvements."),(0,r.yg)("h2",{id:"developer-support"},(0,r.yg)("strong",{parentName:"h2"},"Developer Support")),(0,r.yg)("p",null,"We're Here to Help!\nIf you have any questions, our  Developer support team (",(0,r.yg)("a",{parentName:"p",href:"mailto:developer@vippsmobilepay.com"},"developer@vippsmobilepay.com"),") is available to provide guidance and support. We're like your trusty sidekick, always by your side, committed to making your payment experience as smooth as a well-oiled machine.  "),(0,r.yg)("h2",{id:"changelog"},(0,r.yg)("strong",{parentName:"h2"},"Changelog")),(0,r.yg)("p",null,"2024-05-03 Information about test."),(0,r.yg)("p",null,"2024-03-01 Removed 8.3. Gross settlement type stays in use after NWL. "),(0,r.yg)("p",null,"2024-02-29 Removed 8.2. Settlement time does not change for Denmark and Finland."),(0,r.yg)("p",null,"2024-02-19 Updated 1.1 and 3.2. Default expiration time changed to 10 min. "),(0,r.yg)("p",null,"2024-01-08 Added new section 1.4 Agreement cancelation by merchant. Recommendations how to test the facade added. "),(0,r.yg)("p",null,"2023-11-28 FAQ #6 and #7 updated regarding Report API"),(0,r.yg)("p",null,"2023-11-22 FAQ #2 updated"),(0,r.yg)("p",null,"2023-09-05 Added section 8. Callbacks"),(0,r.yg)("p",null,"2023-09-07 Added callback sending DNS address list"),(0,r.yg)("p",null,'2023-09-20 FAQ "How will I find data about my payments?" updated; FAQ "I am using Transaction Reportin API, what should I do?" added'),(0,r.yg)("p",null,'2023-10-05 New section "Settlements" with 3 new items added '),(0,r.yg)("p",null,'2023-10-09 Changed callback status codes from "6000..." to "7000..."'),(0,r.yg)("p",null,"2023-10-11 Section 9 renamed to Other and new topic added 9.3 Error messages. "),(0,r.yg)("p",null,"2023-10-11 Clarification, that OAuth2 token retrieval requests will be sent from new DNS address"))}m.isMDXComponent=!0},97696:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/files/timeline-5777c4d2106b81e7b443afa7294209fb.png"},2844:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/files/vmpamount-ff9c33d05ab59b77e0103110c9a3f751.png"},48811:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/vmpamount-ff9c33d05ab59b77e0103110c9a3f751.png"},81074:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/timeline-5777c4d2106b81e7b443afa7294209fb.png"}}]);