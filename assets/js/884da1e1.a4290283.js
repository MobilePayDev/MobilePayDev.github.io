"use strict";(self.webpackChunkmobile_pay_merchant_payments_documentation=self.webpackChunkmobile_pay_merchant_payments_documentation||[]).push([[6597],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>b});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=s(n),m=i,b=c["".concat(p,".").concat(m)]||c[m]||u[m]||r;return n?a.createElement(b,o(o({ref:t},d),{},{components:n})):a.createElement(b,o({ref:t},d))}));function b(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:i,o[1]=l;for(var s=2;s<r;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},15654:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var a=n(87462),i=(n(67294),n(3905));const r={sidebar_position:3},o="Build on Web",l={unversionedId:"app-payments/guides/build-on-web",id:"app-payments/guides/build-on-web",title:"Build on Web",description:"This page details how MobilePay App Payments should be implemented in a browser or web app.",source:"@site/docs/app-payments/guides/build-on-web.md",sourceDirName:"app-payments/guides",slug:"/app-payments/guides/build-on-web",permalink:"/docs/app-payments/guides/build-on-web",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docsSidebar",previous:{title:"Build on Mobile",permalink:"/docs/app-payments/guides/build-on-mobile"},next:{title:"Payment Points",permalink:"/docs/app-payments/payment-points"}},p={},s=[{value:"Implementation",id:"implementation",level:2},{value:"Dual device and single device flow",id:"dual-device-and-single-device-flow",level:2},{value:"Single device flow",id:"single-device-flow",level:3},{value:"Dual device flow",id:"dual-device-flow",level:3},{value:"Prefill phone number",id:"prefill-phone-number",level:4},{value:"Classic vs. Web",id:"classic-vs-web",level:2},{value:"One integration",id:"one-integration",level:3},{value:"Design guidelines",id:"design-guidelines",level:2}],d={toc:s},c="wrapper";function u(e){let{components:t,...r}=e;return(0,i.kt)(c,(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"build-on-web"},"Build on Web"),(0,i.kt)("p",null,"This page details how MobilePay App Payments should be implemented in a browser or web app.\nPrerequisites: You already have backend services integrated with ",(0,i.kt)("a",{parentName:"p",href:"/docs/app-payments/guides/how-it-works"},"MobilePay APIs"),"."),(0,i.kt)("admonition",{title:"Pilot",type:"note"},(0,i.kt)("p",{parentName:"admonition"},"App Payments for web is still in pilot phase and therefore require approval. Please contact ",(0,i.kt)("a",{parentName:"p",href:"mailto:sales@mobilepay.dk"},"sales@mobilepay.dk")," if you wish to utilize the feature. ")),(0,i.kt)("h2",{id:"implementation"},"Implementation"),(0,i.kt)("p",null,"First, you'll need to create payment. To do this you should call your backend service that is implemented as described ",(0,i.kt)("a",{parentName:"p",href:"/docs/app-payments/payments-refunds/create-payments"},"here"),". This service call should return a response that contains a universal link needed to launch the MobilePay app: mobilePayAppRedirectUri. You must redirect the user to mobilePayAppRedirectUri."),(0,i.kt)("h2",{id:"dual-device-and-single-device-flow"},"Dual device and single device flow"),(0,i.kt)("p",null,"App Payments for web supports both dual device and single device flows. It depends on which device the user uses when you redirect to mobilePayAppRedirectUri. Our landing page will detect if the redirect happens on a mobile device or not. Only the user experience will be affected by type of flow. The payment flow and API requests are the same regardless of flow type."),(0,i.kt)("h3",{id:"single-device-flow"},"Single device flow"),(0,i.kt)("img",{src:n(81622).Z,alt:"App web single",width:"500"}),(0,i.kt)("p",null,"If the redirect happens on a mobile device the MobilePay app will automatically be launched. The user can then accept or reject the payment and we will redirect the user to redirectUri afterwards. This url will always open in the default browser (determined by the operating system) of the mobile device."),(0,i.kt)("p",null,"If the MobilePay app is not installed and therefore cannot be opened our landing page will open in the browser instead and the flow will continue as a dual device flow."),(0,i.kt)("h3",{id:"dual-device-flow"},"Dual device flow"),(0,i.kt)("img",{src:n(10231).Z,alt:"App web dual",width:"850"}),(0,i.kt)("p",null,"If the redirect happens on a desktop device our landing page will open in the browser. The user can then insert the phone number or it can be pre-filled for more convenience. We will then send a push notification to the user's mobile device and the user can then accept or reject the payment in the MobilePay app. Afterwards the landing page in the desktop browser will redirect to redirectFromMobilePayUrl."),(0,i.kt)("h4",{id:"prefill-phone-number"},"Prefill phone number"),(0,i.kt)("p",null,"In dual device flow you can prefill the phone number so the user does not have to input anything on the MobilePay site\nInitiate Payment: ",(0,i.kt)("br",null),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"POST /v1/payments"),(0,i.kt)("br",null),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"\u201ccustomerPhoneNumber\u201d: \u201c+4512345678\u201d")),(0,i.kt)("h2",{id:"classic-vs-web"},"Classic vs. Web"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"App Payments Classic")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Initiate Payment ",(0,i.kt)("inlineCode",{parentName:"li"},"POST /v1/payments")),(0,i.kt)("li",{parentName:"ol"},"Redirect to mobilePayAppRedirectUri from ",(0,i.kt)("strong",{parentName:"li"},"merchant app")),(0,i.kt)("li",{parentName:"ol"},"User accepts payment in MobilePay app"),(0,i.kt)("li",{parentName:"ol"},"Get payment status: ",(0,i.kt)("inlineCode",{parentName:"li"},"GET /v1/payments/{PAYMENT_ID}")," or use Webhook notification"),(0,i.kt)("li",{parentName:"ol"},"User is redirected back to ",(0,i.kt)("strong",{parentName:"li"},"merchant app")," using redirectUri"),(0,i.kt)("li",{parentName:"ol"},"Capture payment: ",(0,i.kt)("inlineCode",{parentName:"li"},"POST /v1/payments/{PAYMENT_ID}/capture"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"App Payments Web")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Initiate Payment ",(0,i.kt)("inlineCode",{parentName:"li"},"POST /v1/payments")),(0,i.kt)("li",{parentName:"ol"},"Redirect to mobilePayAppRedirectUri from ",(0,i.kt)("strong",{parentName:"li"},"merchant website")," (or web app)"),(0,i.kt)("li",{parentName:"ol"},"User accepts payment in MobilePay app"),(0,i.kt)("li",{parentName:"ol"},"Get payment status: ",(0,i.kt)("inlineCode",{parentName:"li"},"GET /v1/payments/{PAYMENT_ID}")," or use Webhook notification"),(0,i.kt)("li",{parentName:"ol"},"User is redirected back to ",(0,i.kt)("strong",{parentName:"li"},"merchant website")," using redirectUri"),(0,i.kt)("li",{parentName:"ol"},"Capture payment: ",(0,i.kt)("inlineCode",{parentName:"li"},"POST /v1/payments/{PAYMENT_ID}/capture"))),(0,i.kt)("h3",{id:"one-integration"},"One integration"),(0,i.kt)("p",null,"You can use the same integration for classic and web. Only difference is that the redirect happens from and to browser (or web app) instead of native app."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Same endpoints"),(0,i.kt)("li",{parentName:"ul"},"Same request"),(0,i.kt)("li",{parentName:"ul"},"Same payment flow")),(0,i.kt)("h2",{id:"design-guidelines"},"Design guidelines"),(0,i.kt)("p",null,"We want to make it easy for you to ensure that the right MobilePay buttons and logo's are used by the merchants. Proper use of our logo and buttons will ensure better user experience and conversion rate. Please visit our ",(0,i.kt)("a",{parentName:"p",href:"https://mobilepaygroup.com/design"},"Design page")," for more information and ressources."))}u.isMDXComponent=!0},10231:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/app-web-dual-622665f69e49323ac4918b4110feb35d.png"},81622:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/app-web-single-a2a19d531076f2f91b086ace5e2b530b.png"}}]);