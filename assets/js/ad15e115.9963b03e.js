"use strict";(self.webpackChunkmobile_pay_merchant_payments_documentation=self.webpackChunkmobile_pay_merchant_payments_documentation||[]).push([[7920],{95788:(e,t,a)=>{a.d(t,{Iu:()=>p,yg:()=>m});var n=a(11504);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=n.createContext({}),l=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},u="mdxType",y={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=l(a),d=r,m=u["".concat(c,".").concat(d)]||u[d]||y[d]||i;return a?n.createElement(m,s(s({ref:t},p),{},{components:a})):n.createElement(m,s({ref:t},p))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,s=new Array(i);s[0]=d;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o[u]="string"==typeof e?e:r,s[1]=o;for(var l=2;l<i;l++)s[l]=a[l];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},22256:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>y,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var n=a(45072),r=(a(11504),a(95788));const i={sidebar_position:2},s="Payments",o={unversionedId:"online/basics/payments",id:"online/basics/payments",title:"Payments",description:"When you have created a merchant you can start initiating payments.",source:"@site/docs/online/basics/payments.md",sourceDirName:"online/basics",slug:"/online/basics/payments",permalink:"/docs/online/basics/payments",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Merchants",permalink:"/docs/online/basics/merchants"},next:{title:"Dual device and single device flow",permalink:"/docs/online/basics/flow"}},c={},l=[{value:"Restrictions",id:"restrictions",level:2},{value:"Merchant logo",id:"merchant-logo",level:2},{value:"Diagrams",id:"diagrams",level:2},{value:"Payment - Happy day",id:"payment---happy-day",level:3},{value:"Native app switching, Payment - Happy day",id:"native-app-switching-payment---happy-day",level:3},{value:"When acquirer or issurer rejects a payment",id:"when-acquirer-or-issurer-rejects-a-payment",level:3},{value:"When the user rejects a payment",id:"when-the-user-rejects-a-payment",level:3}],p={toc:l},u="wrapper";function y(e){let{components:t,...i}=e;return(0,r.yg)(u,(0,n.c)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"payments"},"Payments"),(0,r.yg)("p",null,"When you have created a merchant you can start initiating payments."),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},'In order to create a payment you need to invoke the "create payment" endpoint (POST to /payments/).\nTo use this you need to provide information about the merchant, the payment, the public key used for encrypting the data, callback-, and redirection urls.\nThis will return an url the end-user should be redirected to.'),(0,r.yg)("li",{parentName:"ol"},"When the user has accepted the payment in the MobilePay app, you'll receive a callback on the url defined in 1. containing the card data and you can create the authorization."),(0,r.yg)("li",{parentName:"ol"},"When you have successfully authorized the payment (or it has failed), you must patch the authorisationAttempt and we'll show a receipt (or error message) to the user. Do not expect the user to return client side / in the UI.",(0,r.yg)("admonition",{parentName:"li",type:"info"},(0,r.yg)("p",{parentName:"admonition"},"If the authorization fail we will allow the user to accept the payment again (encouraging them to use another card). This will result in a new callback to your callback url with a new authorizationAttempt."))),(0,r.yg)("li",{parentName:"ol"},"When the merchant makes captures, refunds, or cancels the payment the status of the payment must be updated to reflect this. The updates are used for invoicing purposes. To update the payment use these:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"POST payments/{paymentId}/captures\nPOST payments/{paymentId}/cancels\nPOST payments/{paymentId}/refunds\n")),(0,r.yg)("h2",{id:"restrictions"},"Restrictions"),(0,r.yg)("p",null,"A payment will time out by default within 35 minutes, meaning that the whole process of user accepting, callbacks made and authorization must be completed within 35 minutes."),(0,r.yg)("p",null,'Furthermore after you get the callback containing the card data, you must update the status of the authorization to either "authorize-succesfull" or "authorize-failed" within 32 seconds to ensure a smooth experience for the user waiting for the confirmation.'),(0,r.yg)("h2",{id:"merchant-logo"},"Merchant logo"),(0,r.yg)("p",null,"On InitiatePayment you must define a merchantLogoUrl. If the merchant does not have a logo please use following url:\xa0",(0,r.yg)("a",{parentName:"p",href:"https://no-logo.png"},"https://no-logo.png")),(0,r.yg)("p",null,"This results in standard merchant logo to be displayed in the MobilePay app.\xa0\xa0"),(0,r.yg)("admonition",{title:"NOTE",type:"caution"},(0,r.yg)("p",{parentName:"admonition"},"All merchants should have their own logo to give the best user experience. Only use this as a temporary solution!")),(0,r.yg)("h2",{id:"diagrams"},"Diagrams"),(0,r.yg)("h3",{id:"payment---happy-day"},"Payment - Happy day"),(0,r.yg)("p",null,(0,r.yg)("a",{target:"_blank",href:a(24008).c},(0,r.yg)("img",{alt:"payment sequence diagram",src:a(42744).c,width:"1390",height:"813"}))),(0,r.yg)("h3",{id:"native-app-switching-payment---happy-day"},"Native app switching, Payment - Happy day"),(0,r.yg)("p",null,(0,r.yg)("a",{target:"_blank",href:a(91892).c},(0,r.yg)("img",{alt:"payment with native app switching diagram",src:a(47976).c,width:"1390",height:"937"})),"\n",(0,r.yg)("a",{target:"_blank",href:a(87908).c},(0,r.yg)("img",{alt:"after authorization sequence diagram",src:a(24884).c,width:"1151",height:"698"}))),(0,r.yg)("h3",{id:"when-acquirer-or-issurer-rejects-a-payment"},"When acquirer or issurer rejects a payment"),(0,r.yg)("p",null,(0,r.yg)("a",{target:"_blank",href:a(12588).c},(0,r.yg)("img",{alt:"acquirer or issuer reject payment sequence diagram",src:a(32848).c,width:"1411",height:"1063"}))),(0,r.yg)("h3",{id:"when-the-user-rejects-a-payment"},"When the user rejects a payment"),(0,r.yg)("p",null,(0,r.yg)("a",{target:"_blank",href:a(85896).c},(0,r.yg)("img",{alt:"user rejects payment sequence diagram",src:a(78012).c,width:"1409",height:"734"}))))}y.isMDXComponent=!0},12588:(e,t,a)=>{a.d(t,{c:()=>n});const n=a.p+"assets/files/online-acquirer-or-issuer-reject-payment-sequence-diagram-513088764b8a5cb9be4ba63d9906b131.svg"},87908:(e,t,a)=>{a.d(t,{c:()=>n});const n=a.p+"assets/files/online-after-authorization-sequence-diagram-6f8973db3ff4513deddbde6bac4f04ed.svg"},24008:(e,t,a)=>{a.d(t,{c:()=>n});const n=a.p+"assets/files/online-payment-sequence-diagram-9dc91084222ba60532734366c99cb05c.svg"},91892:(e,t,a)=>{a.d(t,{c:()=>n});const n=a.p+"assets/files/online-payment-with-native-app-switching-sequence-diagrams-49ca0a87ac1c4ef75a1a3ff441c7c9cd.svg"},85896:(e,t,a)=>{a.d(t,{c:()=>n});const n=a.p+"assets/files/online-user-rejects-payment-sequence-diagram-522a614bdb31b49e69e39fd5a8f00444.svg"},32848:(e,t,a)=>{a.d(t,{c:()=>n});const n=a.p+"assets/images/online-acquirer-or-issuer-reject-payment-sequence-diagram-513088764b8a5cb9be4ba63d9906b131.svg"},24884:(e,t,a)=>{a.d(t,{c:()=>n});const n=a.p+"assets/images/online-after-authorization-sequence-diagram-6f8973db3ff4513deddbde6bac4f04ed.svg"},42744:(e,t,a)=>{a.d(t,{c:()=>n});const n=a.p+"assets/images/online-payment-sequence-diagram-9dc91084222ba60532734366c99cb05c.svg"},47976:(e,t,a)=>{a.d(t,{c:()=>n});const n=a.p+"assets/images/online-payment-with-native-app-switching-sequence-diagrams-49ca0a87ac1c4ef75a1a3ff441c7c9cd.svg"},78012:(e,t,a)=>{a.d(t,{c:()=>n});const n=a.p+"assets/images/online-user-rejects-payment-sequence-diagram-522a614bdb31b49e69e39fd5a8f00444.svg"}}]);